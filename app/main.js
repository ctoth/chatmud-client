process.env.HMR_PORT=0;process.env.HMR_HOSTNAME="localhost";parcelRequire=function(e,r,n){var t="function"==typeof parcelRequire&&parcelRequire,i="function"==typeof require&&require;function u(n,o){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!o&&f)return f(n,!0);if(t)return t(n,!0);if(i&&"string"==typeof n)return i(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}a.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,a,l,l.exports)}return r[n].exports;function a(e){return u(a.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=t;for(var o=0;o<n.length;o++)u(n[o]);return u}({10:[function(require,module,exports) {
"use strict";class e{constructor(e,t){this.instance=t,this.domNode=e,this.maxLines=100}add(e){this.instance.tts.speak(e);let t=document.createElement("p"),s=document.createTextNode(e);t.appendChild(s),this.domNode.appendChild(t),this.checkScreen()}checkScreen(){this.domNode.childNodes.length,this.maxLines}}module.exports=e;
},{}],9:[function(require,module,exports) {
module.exports=["mcp","triggers","programmerhelper"];
},{}],25:[function(require,module,exports) {
"use strict";class e{constructor(){this.interface=null}act(e,t){return this.instance=t,console.log(document.getElementById("speechToggle").value),this.instance.tts.speak(e),e}}module.exports=e;
},{}],26:[function(require,module,exports) {
"use strict";class e{constructor(){this.instance=null,this.key=0,this.name=0}act(e,n){return(e=e.toString()).startsWith("#$#")?(this.instance=n,this.parse(e),""):e}parse(e){console.log("Parsing "+e);let n=e.slice(3,e.length),t=(n=n.trim()).slice(0,n.indexOf(" "));t=t.trim(),console.log("Command: "+t);let a=null;(n=n.slice(t.length,n.length)).includes("-|-")&&(a=n.slice(n.indexOf("-|-"),n.length),n=n.slice(0,n.indexOf("-|-")));let s=n.split("|");for(let e=0;e<s.length;e++)s[e]=s[e].trim();"mcp"==t&&this.initMCP(),this.executeMCP(t,s,a)}initMCP(){this.instance.connection.send("#$#register_client Chatmud Official Client (Alpha)"),this.instance.connection.send("#$#client_supports authkeys")}executeMCP(e,n,t){switch(e){case"authentication_key":this.key=n[0];break;case"my_name":this.name=n[0];break;case"channel_message":this.handleChannelMessage(n);break;case"channel_social":this.handleChannelSocial(n);break;case"social":this.handleSocial(n);break;case"watched_player_connect":this.handlePlayerConnect(n);break;case"watched_player_reconnect":this.handlePlayerReconnect(n);break;case"watched_player_disconnect":this.handlePlayerDisconnect(n);break;case"teleport_out":this.handlePlayerTeleportOut(n);break;case"teleport_in":this.handlePlayerTeleportIn(n);break;case"tell_message":this.handleTell(n);break;case"edit":this.handleEdit(n);break;default:this.handlePlay(e,n)}}handleChannelMessage(e){this.instance.history.addMessage(e[0],e[2]+e[3]),this.instance.output.add(e[2]+" "+e[3]),this.instance.soundPlayer.playChannel(e[0])}handleChannelSocial(e){console.log(JSON.stringify(e)),this.instance.history.addMessage(e[0],e[0]+NaN+e[3]),this.instance.output.add(e[0]+": "+e[3]),this.instance.soundPlayer.playSocial(e[2],e[5]),this.instance.soundPlayer.playChannel(e[0])}handleSocial(e){this.instance.soundPlayer.playSocial(e[0],e[2])}handlePlay(e,n){this.instance.soundPlayer.play(n[0],e)}handlePlayerConnect(e){this.instance.soundPlayer.play("enter"),this.instance.output.add(e[0]+" connected")}handlePlayerReconnect(e){this.instance.soundPlayer.play("reconnect"),this.instance.output.add(e[0]+" reconnected")}handlePlayerDisconnect(e){this.instance.soundPlayer.play("leave"),this.instance.output.add(e[0]+" disconnected")}handlePlayerTeleportOut(e){this.instance.soundPlayer.play("teleport%20out","misc")}handlePlayerTeleportIn(e){this.instance.soundPlayer.play("teleport%20in","misc")}handleTell(e){console.log("Parsed tell: "+e),this.instance.soundPlayer.play("tell"),this.instance.output.add(e[0]+" "+e[1]+" "+e[2])}handleEdit(e){let n=e[0].split(" ");this.instance.programmer.setObject(n[n.length-1]),this.instance.programmer.setEnableHelper(!0)}}module.exports=e;
},{}],27:[function(require,module,exports) {
"use strict";class e{constructor(){this.instance=null}act(e,t){return this.instance=t,this.executeTriggers(e),e}executeTriggers(e){let t=e.match("^Turning (off|on) channel ([a-zA-Z0-9]*)?.");t&&this.instance.soundPlayer.play(t[1]),(t=e.match("^I don't understand that.$"))&&this.instance.soundPlayer.play("huh","misc"),(t=e.match("^(>> Command Aborted <<|Invalid selection.)$"))&&this.instance.soundPlayer.play("cancel"),(t=e.match("(\\[(Type a line of input or `@abort' to abort the command|Type lines of input; use `\\.' to end or `@abort' to abort the command)\\.\\]|\\[Enter `yes' or `no'\\])"))&&this.instance.soundPlayer.play("prompt"),(t=e.match("You click your heels three times."))&&this.instance.soundPlayer.play("home","misc"),(t=e.match("[Connections] A new high player count has been reached! * players are connected."))&&this.instance.soundPlayer.play("high%connections","misc"),(t=e.match("[Creation] * has just connected for the first time! Please make them feel welcome."))&&this.instance.soundPlayer.play("creation"),(t=e.match("(.*) says,(.*)"))&&this.instance.soundPlayer.play("say"),(t=e.match("^You say,*?"))&&this.instance.soundPlayer.play("say")}}module.exports=e;
},{}],28:[function(require,module,exports) {
class e{constructor(){this.code="",this.receiving=!1,this.instance=null}act(e,i){return 1==i.programmer.enabled?(0==this.receiving&&(this.receiving=!0,this.code=""),this.instance=i,console.log("Checking: "+e),"."==e&&(this.instance.programmer.setCode(this.code),this.instance.programmer.open(),this.instance.programmer.setEnableHelper(!1),this.receiving=!1),this.code+=e+"\n",""):e}}module.exports=e;
},{}],11:[function(require,module,exports) {
"use strict";const e=require("./inserts/webtts"),r=require("./inserts/mcp"),s=require("./inserts/triggers"),t=require("./inserts/programmerhelper");class i{static getInsert(i){switch(i){case"webtts":return e;case"mcp":return r;case"triggers":return s;case"programmerhelper":return t}}}module.exports=i;
},{"./inserts/webtts":25,"./inserts/mcp":26,"./inserts/triggers":27,"./inserts/programmerhelper":28}],12:[function(require,module,exports) {
"use strict";class e{constructor(){this.channels=new Array}addMessage(e,n){console.log("Adding to "+e+", "+n);let a=this.getChannelByName(e);-1==a&&(a=new s(e),this.channels.push(a),console.log("Created new channel")),a.addMessage(n)}getChannelByName(e){console.log("Getting channel by name "+e);for(let s of this.channels)if(s.name==e)return s;return-1}getMessageForChannel(e,s){return console.log("Getting message "+s+" for channel "+e),this.getChannelByName(e).messages[s]}}class s{constructor(e){this.name=e,this.messages=new Array}addMessage(e){console.log("In-channel message add: "+e),this.messages.unshift(e)}}module.exports=e;
},{}],13:[function(require,module,exports) {
"use strict";const s=require("./channelhistory"),e=require("combokeys");class t{constructor(s,t){this.instance=t,this.currentChannel=0,this.currentMessage=0,this.history=s,this.shortcuts=new e(window),this.setupKeys()}nextChannel(){console.log("Next channel"),this.currentChannel<this.history.channels.length-1?this.currentChannel++:this.currentChannel=this.history.channels.length-1,this.instance.tts.speakImmediate(this.history.channels[this.currentChannel].name)}previousChannel(){console.log("Previous channel"),this.currentChannel>0?this.currentChannel--:this.currentChannel=0,this.instance.tts.speakImmediate(this.history.channels[this.currentChannel].name)}nextMessage(){console.log("Next message"),this.currentMessage>0?this.currentMessage--:this.currentMessage=0,this.readMessage(this.currentMessage)}previousMessage(){console.log("Previous message"),this.currentMessage<this.history.channels[this.currentChannel].messages.length-1?this.currentMessage++:this.currentMessage=this.history.channels[this.currentChannel].messages.length-1,this.readMessage(this.currentMessage)}readMessage(s){console.log("Reading "+this.history.channels[this.currentChannel].messages[s]),this.instance.tts.speakImmediate(this.history.channels[this.currentChannel].messages[s])}setupKeys(){"win32"===process.platform?(this.shortcuts.bind("alt+left",()=>this.previousChannel()),this.shortcuts.bind("alt+right",()=>this.nextChannel()),this.shortcuts.bind("alt+up",()=>this.previousMessage()),this.shortcuts.bind("alt+down",()=>this.nextMessage())):(this.shortcuts.bind("alt+meta+left",()=>this.previousChannel()),this.shortcuts.bind("alt+meta+right",()=>this.nextChannel()),this.shortcuts.bind("alt+meta+up",()=>this.previousMessage()),this.shortcuts.bind("alt+meta+down",()=>this.nextMessage()))}}module.exports=t;
},{"./channelhistory":12}],24:[function(require,module,exports) {
module.exports=[{type:"file",name:".DS_Store"},{type:"file",name:"cancel.ogg"},{type:"file",name:"dominion ship tell.ogg"},{type:"file",name:"enter.ogg"},{type:"file",name:"event.ogg"},{type:"file",name:"leave linkdead.ogg"},{type:"file",name:"leave.ogg"},{type:"file",name:"off.ogg"},{type:"file",name:"on.ogg"},{type:"file",name:"prompt.ogg"},{type:"file",name:"reconnected.ogg"},{type:"file",name:"reply.ogg"},{type:"file",name:"say.ogg"},{type:"file",name:"tell.ogg"},{type:"file",name:"whisper.ogg"},{name:"admin",type:"folder",children:[{type:"file",name:"administrators.ogg"},{type:"file",name:"wizchange.ogg"}]},{name:"casino",type:"folder",children:[{type:"file",name:"slot_bet.ogg"},{type:"file",name:"slot_lose.ogg"},{type:"file",name:"slot_win.ogg"}]},{name:"dragon",type:"folder",children:[{type:"file",name:"eat.ogg"},{type:"file",name:"flame.ogg"}]},{name:"channels",type:"folder",children:[{type:"file",name:".DS_Store"},{type:"file",name:"announce.ogg"},{type:"file",name:"botgames.ogg"},{type:"file",name:"chat.ogg"},{type:"file",name:"cp.ogg"},{type:"file",name:"crazyparty.ogg"},{type:"file",name:"creation.ogg"},{type:"file",name:"dev.ogg"},{type:"file",name:"games.ogg"},{type:"file",name:"global.ogg"},{type:"file",name:"haw.ogg"},{type:"file",name:"im.ogg"},{type:"file",name:"moderators.ogg"},{type:"file",name:"newbie.ogg"},{type:"file",name:"music.ogg"},{type:"file",name:"news.ogg"},{type:"file",name:"notify.ogg"},{type:"file",name:"shout.ogg"},{type:"file",name:"slej.ogg"},{type:"file",name:"wily.ogg"},{type:"file",name:"teamtalk.ogg"},{type:"file",name:"wizards.ogg"}]},{name:"games",type:"folder",children:[{type:"file",name:"anagrams_end.ogg"},{type:"file",name:"anagrams_invalid.ogg"},{type:"file",name:"anagrams_start.ogg"},{type:"file",name:"anagrams_valid.ogg"}]},{name:"guns",type:"folder",children:[{type:"file",name:"emptygun.ogg"},{type:"file",name:"gun_drop.ogg"},{type:"file",name:"gun_fired.ogg"},{type:"file",name:"gun_load.ogg"},{type:"file",name:"gun_silenced_fired.ogg"},{type:"file",name:"gun_unload.ogg"},{type:"file",name:"target_hit.ogg"},{type:"file",name:"target_miss.ogg"},{type:"file",name:"target_miss2.ogg"},{type:"file",name:"target_miss3.ogg"},{type:"file",name:"unwield_gun.ogg"},{type:"file",name:"wield_gun.ogg"}]},{name:"meow_button",type:"folder",children:[{type:"file",name:".DS_Store"},{type:"file",name:"meow.ogg"},{type:"file",name:"press.ogg"},{type:"file",name:"roll.ogg"}]},{name:"misc",type:"folder",children:[{type:"file",name:"high connections.ogg"},{type:"file",name:"change.ogg"},{type:"file",name:"home.ogg"},{type:"file",name:"huh.ogg"},{type:"file",name:"spoofer.ogg"},{type:"file",name:"teleport in.ogg"},{type:"file",name:"teleport out.ogg"}]},{name:"pocketbubble",type:"folder",children:[{type:"file",name:"bounce.ogg"},{type:"file",name:"create.ogg"},{type:"file",name:"pop.ogg"}]},{name:"tv",type:"folder",children:[{type:"file",name:"insult_off.ogg"},{type:"file",name:"shot_off.ogg"},{type:"file",name:"violent_social_off.ogg"}]},{name:"socials",type:"folder",children:[{type:"file",name:"Kick room.ogg"},{type:"file",name:"Kick.ogg"},{type:"file",name:"Kick10.ogg"},{type:"file",name:"Kick11.ogg"},{type:"file",name:"Kick12.ogg"},{type:"file",name:"Kick13.ogg"},{type:"file",name:"Kick14.ogg"},{type:"file",name:"Kick15.ogg"},{type:"file",name:"Kick16.ogg"},{type:"file",name:"Kick17.ogg"},{type:"file",name:"Kick18.ogg"},{type:"file",name:"Kick19.ogg"},{type:"file",name:"Kick2.ogg"},{type:"file",name:"Kick20.ogg"},{type:"file",name:"Kick3.ogg"},{type:"file",name:"Kick4.ogg"},{type:"file",name:"Kick5.ogg"},{type:"file",name:"Kick6.ogg"},{type:"file",name:"Kick7.ogg"},{type:"file",name:"Kick8.ogg"},{type:"file",name:"Kick9.ogg"},{type:"file",name:"Kiss.ogg"},{type:"file",name:"Poke me.ogg"},{type:"file",name:"Punch10.ogg"},{type:"file",name:"Punch11.ogg"},{type:"file",name:"Punch12.ogg"},{type:"file",name:"Punch13.ogg"},{type:"file",name:"Punch14.ogg"},{type:"file",name:"Punch15.ogg"},{type:"file",name:"Punch16.ogg"},{type:"file",name:"Punch18.ogg"},{type:"file",name:"Punch17.ogg"},{type:"file",name:"Punch19.ogg"},{type:"file",name:"Punch2.ogg"},{type:"file",name:"Punch20.ogg"},{type:"file",name:"Punch3.ogg"},{type:"file",name:"Punch4.ogg"},{type:"file",name:"Punch5.ogg"},{type:"file",name:"Punch6.ogg"},{type:"file",name:"Punch7.ogg"},{type:"file",name:"Punch8.ogg"},{type:"file",name:"Punch9.ogg"},{type:"file",name:"Slap2.ogg"},{type:"file",name:"Slap3.ogg"},{type:"file",name:"Slap4.ogg"},{type:"file",name:"Slap5.ogg"},{type:"file",name:"agree female101.ogg"},{type:"file",name:"agree101.ogg"},{type:"file",name:"apologize female101.ogg"},{type:"file",name:"bark.ogg"},{type:"file",name:"bored female101.ogg"},{type:"file",name:"bored101.ogg"},{type:"file",name:"brb101.ogg"},{type:"file",name:"burp.ogg"},{type:"file",name:"burp2.ogg"},{type:"file",name:"cackle female.ogg"},{type:"file",name:"cackle.ogg"},{type:"file",name:"cheer female101.ogg"},{type:"file",name:"chuckle female.ogg"},{type:"file",name:"chuckle female101.ogg"},{type:"file",name:"chuckle female102.ogg"},{type:"file",name:"chuckle.ogg"},{type:"file",name:"chuckle2.ogg"},{type:"file",name:"clap.ogg"},{type:"file",name:"coffee.ogg"},{type:"file",name:"coke.ogg"},{type:"file",name:"comfort female101.ogg"},{type:"file",name:"comfort101.ogg"},{type:"file",name:"confused female101.ogg"},{type:"file",name:"cough female.ogg"},{type:"file",name:"cough male.ogg"},{type:"file",name:"cry female.ogg"},{type:"file",name:"cry.ogg"},{type:"file",name:"fart female.ogg"},{type:"file",name:"fart.ogg"},{type:"file",name:"flirt female101.ogg"},{type:"file",name:"gasp female.ogg"},{type:"file",name:"gasp.ogg"},{type:"file",name:"giggle female.ogg"},{type:"file",name:"giggle.ogg"},{type:"file",name:"growl female.ogg"},{type:"file",name:"growl female101.ogg"},{type:"file",name:"growl female102.ogg"},{type:"file",name:"growl.ogg"},{type:"file",name:"hiss.ogg"},{type:"file",name:"hmm female101.ogg"},{type:"file",name:"hmm female102.ogg"},{type:"file",name:"hmm female103.ogg"},{type:"file",name:"hmm.ogg"},{type:"file",name:"laugh female.ogg"},{type:"file",name:"lol female101.ogg"},{type:"file",name:"lol.ogg"},{type:"file",name:"meow.ogg"},{type:"file",name:"meow2.ogg"},{type:"file",name:"meow3.ogg"},{type:"file",name:"nudge me.ogg"},{type:"file",name:"oic female101.ogg"},{type:"file",name:"oic female102.ogg"},{type:"file",name:"oic female103.ogg"},{type:"file",name:"oic101.ogg"},{type:"file",name:"okshut101.ogg"},{type:"file",name:"okshut102.ogg"},{type:"file",name:"paddle.ogg"},{type:"file",name:"punch room.ogg"},{type:"file",name:"punch.ogg"},{type:"file",name:"purr.ogg"},{type:"file",name:"rofl female.ogg"},{type:"file",name:"rofl male.ogg"},{type:"file",name:"scream female.ogg"},{type:"file",name:"scream.ogg"},{type:"file",name:"shove me.ogg"},{type:"file",name:"shut101.ogg"},{type:"file",name:"shutbuddy101.ogg"},{type:"file",name:"sigh female.ogg"},{type:"file",name:"sigh.ogg"},{type:"file",name:"sit.ogg"},{type:"file",name:"slap room.ogg"},{type:"file",name:"slap.ogg"},{type:"file",name:"snarl101.ogg"},{type:"file",name:"snicker female101.ogg"},{type:"file",name:"snicker.ogg"},{type:"file",name:"sniff female.ogg"},{type:"file",name:"sniff.ogg"},{type:"file",name:"snore.ogg"},{type:"file",name:"snort.ogg"},{type:"file",name:"squeak.ogg"},{type:"file",name:"stand.ogg"},{type:"file",name:"tackle.ogg"},{type:"file",name:"thank female101.ogg"},{type:"file",name:"vomit.ogg"},{type:"file",name:"yawn female.ogg"},{type:"file",name:"yawn female101.ogg"},{type:"file",name:"yawn male.ogg"}]},{name:"clocks",type:"folder",children:[{name:"bigben",type:"folder",children:[{type:"file",name:"00.ogg"},{type:"file",name:"15.ogg"},{type:"file",name:"30.ogg"},{type:"file",name:"45.ogg"},{type:"file",name:"chime.ogg"}]},{name:"grandfather",type:"folder",children:[{type:"file",name:"chime.ogg"}]}]}];
},{}],16:[function(require,module,exports) {
const e=require("./sounds");function n(n){let r=n.split("/"),t=e;for(let e of r)t=o(e,t);return t}function o(e,n){for(let o of n)if(o.name==e)return o.children}function r(e,n){let o=[];for(let r of n)r.name.includes(e)&&o.push(r.name);return o}module.exports.findSoundsInFolder=n,module.exports.findFilenames=r;
},{"./sounds":24}],5:[function(require,module,exports) {
const{Howl:e,Howler:s}=require("howler"),n=require("./soundops"),t=require("random-int"),o=require("./sounds");class l{constructor(){this.sounds=new Array,this.extension=".ogg",document.getElementById("soundVolume").onchange=function(e){console.log("Set volume to "+e.target.value+" percent"),s.volume(Number(e.target.value)/100)}}play(e,s=""){let n=this.searchSounds(e,s);-1==n&&(n=this.loadSound(e,s)),n.sound.play()}playChannel(e){let s=n.findSoundsInFolder("channels");e=0==n.findFilenames(e,s).length?"global":e,this.play(e,"channels")}playSocial(e,s){let o=n.findSoundsInFolder("socials"),l=n.findFilenames(e+" "+s,o);0==l.length&&(l=n.findFilenames(e,o));let i=l[t(0,l.length-1)].toString();i=i.slice(0,i.length-4),this.play(i,"socials")}searchSounds(e,s){for(let n of this.sounds)if(n.file==e&&n.folder==s)return n;return-1}loadSound(e,s){let n=new i(s,e);return this.sounds.push(n),n}}class i{constructor(s,n){this.basePath="./sounds/",this.file=n,this.folder=s,this.extension=".ogg",this.path=this.basePath+this.folder+"/"+this.file+this.extension,console.log("Loading "+this.path),this.sound=new e({src:this.path})}}module.exports=l;
},{"./soundops":16,"./sounds":24}],14:[function(require,module,exports) {
"use strict";class e{constructor(e){this.instance=e,this.code="",this.object="",this.enabled=!1,this.window=null,this.lines=new Array,this.currentLine=0}setEnableHelper(e){this.enabled=e}setCode(e){this.code=e,console.log("Code: "+this.code)}open(){this.window=window.open("./editor.html"),setTimeout(()=>{this.window.postMessage(this.code)},1e3),window.addEventListener("message",this.handleMessage.bind(this))}handleMessage(e){let s=e.data;this.sendCode(s),window.removeEventListener("message",this.handleMessage.bind(this))}sendCode(e){let s=e.split("\n");this.lines=s,this.instance.connection.send("@program "+this.object);for(let e of s)this.instance.connection.send(e);this.instance.connection.send("."),this.code="",this.enabled=!1}setObject(e){console.log("Object set to "+this.object),this.object=e}}module.exports=e;
},{}],15:[function(require,module,exports) {
const e=require("say"),s=require("combokeys");class t{constructor(){this.speaking=!1,this.speakQueue=new Array,this.voice="alex",this.rate=3,this.combokeys=new s(window),this.combokeys.bind("ctrl",()=>this.stopSpeech())}stopSpeech(){1==this.speaking&&(this.speaking=!1,this.speakQueue=[],e.stop())}speakImmediate(e){1==this.speaking&&this.stopSpeech(),this.speak(e)}speak(e){console.log(document.getElementById("speechToggle").value),document.getElementById("speechToggle").checked&&(e=(e=e.replace("["," ")).replace("]"," "),console.log("saying "+e),this.speakQueue.push(e),0==this.speaking&&(this.handleQueue(),this.speaking=!0))}handleQueue(){if(this.speakQueue.length>0){let s=this.speakQueue.shift();e.speak(s,this.voice,this.rate,e=>this.handleQueue())}else this.speaking=!1}}module.exports=t;
},{}],3:[function(require,module,exports) {
"use strict";const t=require("./cmoutput"),e=require("./inserts.json"),s=require("./insertfactory"),n=require("./channelhistory"),i=require("./channelinterface"),r=require("./soundplayer"),o=require("./programmer"),u=require("./tts");class h{constructor(e){console.log("Constructing handler"),this.input=document.getElementById("cm-input"),this.output=new t(document.getElementById("cm-output"),this),this.connection=e,this.inserts=new Array,this.history=new n,this.historyInterface=new i(this.history,this),this.soundPlayer=new r,this.tts=new u,this.programmer=new o(this),this.setupEvents(),this.setupInserts()}setupEvents(){console.log("Setting events"),this.connection.on("data",t=>this.handleData(t)),this.input.addEventListener("keyup",t=>{13==t.keyCode&&(this.tts.stopSpeech(),this.sendInput())})}setupInserts(){for(let t of e){let e=new(s.getInsert(t));this.inserts.push(e)}}handleData(t){console.log("Received data: "+t);for(let e of this.inserts)t=e.act(t,this);this.output.add(t)}sendInput(){console.log("Handle enter key");let t=this.input.value;this.connection.send(t),this.input.value=""}}module.exports=h;
},{"./cmoutput":10,"./inserts.json":9,"./insertfactory":11,"./channelhistory":12,"./channelinterface":13,"./soundplayer":5,"./programmer":14,"./tts":15}],4:[function(require,module,exports) {
"use strict";const t=require("net"),e=require("eventemitter3");class s extends e{constructor(e="chatmud.com",s=3e3){console.log("Connecting to "+e+" on port "+s),super(),this.address=e,this.port=s,this.client=new t.Socket,this.connection=this.client.connect(this.port,this.address,()=>this.setupEvents())}setupEvents(){console.log("Setting up tcp events"),this.client.on("data",t=>this.handleData(t))}handleData(t){console.log("TCP stream: "+t);let e=t.toString().split("\r\n");for(let t of e)this.emit("data",t)}send(t){console.log("Sending "+t),this.client.write(t+"\n")}}module.exports=s;
},{}],1:[function(require,module,exports) {
"use strict";const e=require("./chatmud.js"),n=require("./tcp.js"),o=require("./soundplayer");console.log("Starting connection...");const r=new n;console.log("Creating handler...");const t=new e(r);
},{"./chatmud.js":3,"./tcp.js":4,"./soundplayer":5}]},{},[1])
//# sourceMappingURL=/main.map
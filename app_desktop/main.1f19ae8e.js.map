{"version":3,"sources":["interface/cmoutput.js","inserts/inserts.json","inserts/webtts.js","inserts/pingutils.js","inserts/mcp.js","inserts/triggers.js","inserts/programmerhelper.js","inserts/notifier.js","factories/insertfactory.js","appends/appends.json","factories/appendfactory.js","history/channelhistory.js","interface/channelinterface.js","sounds/sounds.json","sounds/soundops.js","sounds/soundplayer.js","interface/programmer.js","tts/mactts.js","tts/ariatts.js","factories/ttsfactory.js","ui/mudinput.js","settings.json","ui/resolvinglink.js","ui/outputitem.js","ui/mudoutput.js","ui/settingspanel.js","ui/onlinelist.js","ui/toolbar.js","ui/main.js","interface/interface.js","history/inputhistory.js","chatmud.js","connection/tls.js","connection/websockets.js","factories/networkfactory.js","main.js"],"names":["EventEmitter","require","CMOutput","constructor","instance","maxLines","add","string","console","log","tts","speak","emit","history","addMessage","module","exports","WebTTS","interface","act","document","getElementById","value","PingUtils","token","time","start","performance","now","stop","MCP","key","name","pings","Array","toString","startsWith","slice","length","parsed","JSON","parse","executeMCP","command","authentication_key","error","output","s1","trim","indexOf","includes","s2","split","i","initMCP","connection","send","args","checkKey","info","handleChannelMessage","handleChannelSocial","handleSocial","handlePlayerConnect","handlePlayerReconnect","handlePlayerDisconnect","handlePlayerTeleportOut","handlePlayerTeleportIn","handleTell","handleEdit","handleNetLag","handlePlay","prefix","message","soundPlayer","playChannel","stringify","playSocial","social","gender","data","play","args2","programmer","setObject","setEnableHelper","newPing","push","findPingByToken","ping","Triggers","executeTriggers","matched","match","ProgrammerHelper","code","receiving","enabled","setCode","open","Notifier","Notification","requestPermission","then","result","body","inserts","webtts","mcp","triggers","programmerhelper","notifier","InsertFactory","getInsert","appends","AppendFactory","getInstance","ChannelHistory","channels","pChannel","channel","getChannelByName","Channel","getMessageForChannel","id","messages","unshift","ChannelInterface","currentChannel","currentMessage","nextChannel","speakImmediate","previousChannel","nextMessage","readMessage","previousMessage","type","children","sounds","findSoundsInFolder","path","directory","search","object","entry","findFilenames","array","returnObj","Howl","Howler","rng","soundops","Sounds","SoundPlayer","extension","file","folder","mFile","searchSounds","loadSound","sound","socials","foundSocials","filename","Sound","process","platform","basePath","join","__dirname","src","Programmer","window","lines","currentLine","boundMethod","setTimeout","postMessage","handleMessage","bind","addEventListener","sendCode","removeEventListener","line","obj","say","TTS","speaking","speakQueue","voice","rate","stopSpeech","replace","handleQueue","shift","err","innerHTML","item","node","createTextNode","appendChild","createElement","TTSFactory","React","MudInput","Component","props","state","inputValue","handleChange","handleKey","inputRef","createRef","render","componentDidMount","current","focus","evt","inputHistory","getLastEntered","setState","target","urlToTitle","ResolvingLink","text","url","resolved","onClick","YouTube","default","OutputItem","re","itemize","map","index","test","parseLink","openLink","event","link","preventDefault","parseYoutubeLink","e","andPosition","substring","Settings","MudOutput","addLine","on","SettingsPanel","volume","speech","resolveLinks","embedYoutube","handleVolumeChange","handleSpeechStateChange","Boolean","targetVolume","checked","setSpeechEnabled","OnlineList","people","active","idlers","bots","createGroup","response","componentWillMount","getOnlineList","fetch","json","parseData","list","flags","person","title","ToolBar","isSettingsOpened","isOnlineListOpened","showSettings","hideSettings","showOnlineList","hideOnlineList","renderButtons","renderSettings","renderOnlineList","buttons","MainWindow","Combokeys","reactDom","MainUI","Interface","shortcuts","setupEvents","setupKeys","setupInterface","bindGlobal","historyInterface","InputHistory","strings","iterator","getAtIndex","getAtIterator","increaseIterator","decreaseIterator","Inserts","Appends","ChatMud","setupInserts","setupAppends","handleData","insertDef","insert","appendDef","append","sendInput","input","net","TLS","TCPConnection","address","port","client","Socket","tcp","connect","options","socket","endsWith","emitData","arr","write","IO","Websockets","io","NetworkFactory","game"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\r\nconst EventEmitter = require('eventemitter3');\r\n\r\nclass CMOutput extends EventEmitter {\r\n\tconstructor(instance) {\r\n\t\tsuper();\r\n\t\tthis.instance = instance;\r\n\t\tthis.maxLines = 100;\r\n\t}\r\n\r\n\tadd(string) {\r\n\t\tconsole.log('Outputting ' + string);\r\n\t\tif (string != '') {\r\n\t\t\tthis.instance.tts.speak(string);\r\n\t\t\tthis.emit('MudOutput', string);\r\n\r\n\t\t\tthis.instance.history.addMessage('MudOutput', string);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = CMOutput;\r\n","module.exports=[\"mcp\",\"triggers\",\"programmerhelper\"];","'use strict';\r\n\r\nclass WebTTS {\r\n\tconstructor() {\r\n\t\tthis.interface = null;\r\n\t}\r\n\r\n\tact(string, instance) {\r\n\t\tthis.instance = instance;\r\n\t\tconsole.log(document.getElementById('speechToggle').value);\r\n\t\tthis.instance.tts.speak(string);\r\n\t\treturn string;\r\n\t}\r\n}\r\n\r\nmodule.exports = WebTTS;\r\n","'use strict';\r\nclass PingUtils {\r\n\tconstructor(token) {\r\n\t\tthis.token = token;\r\n\t\tthis.time = 0;\r\n\t}\r\n\r\n\tstart() {\r\n\t\tthis.time = performance.now();\r\n\t}\r\n\r\n\tstop() {\r\n\t\tthis.time = performance.now(); -this.time;\r\n\t}\r\n}\r\n\r\nmodule.exports = PingUtils;\r\n","'use strict';\r\nconst PingUtils = require('./pingutils');\r\n\r\n'use strict';\r\nclass MCP {\r\n\tconstructor() {\r\n\t\tthis.instance = null;\r\n\t\tthis.key = 0;\r\n\t\tthis.name = 0;\r\n\t\tthis.pings = new Array();\r\n\t}\r\n\r\n\tact(string, instance) {\r\n\t\tstring = string.toString();\r\n\t\tif (!string.startsWith('#$#')) {\r\n\t\t\treturn string;\r\n\t\t}\r\n\r\n\t\tthis.instance = instance;\r\n\t\tif (string.startsWith('#$#json')) {\r\n\t\t\ttry {\r\n\t\t\t\tstring = string.slice(8, string.length);\r\n\t\t\t\tconst parsed = JSON.parse(string);\r\n\t\t\t\tthis.executeMCP(parsed.command, parsed, parsed.authentication_key);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.instance.output.add('Error parsing MCP: ' + string);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.parse(string);\r\n\t\t}\r\n\r\n\t\treturn '';\r\n\t}\r\n\r\n\tparse(string) {\r\n\t\tconsole.log('Parsing ' + string);\r\n\t\tlet s1 = string.slice(3, string.length);\r\n\t\ts1 = s1.trim();\r\n\t\tlet command = s1.slice(0, s1.indexOf(' '));\r\n\r\n\t\tcommand = command.trim();\r\n\t\tconsole.log('Command: ' + command);\r\n\t\ts1 = s1.slice(command.length, s1.length);\r\n\t\tlet key = null;\r\n\t\tif (s1.includes('-|-')) {\r\n\t\t\tkey = s1.slice(s1.indexOf('-|-') + 4, s1.length);\r\n\t\t\tkey = key.trim();\r\n\t\t\ts1 = s1.slice(0, s1.indexOf('-|-'));\r\n\t\t}\r\n\r\n\t\tconst s2 = s1.split('|');\r\n\t\tfor (let i = 0; i < s2.length; i++) {\r\n\t\t\ts2[i] = s2[i].trim();\r\n\t\t}\r\n\r\n\t\tif (command == 'mcp') {\r\n\t\t\tthis.initMCP();\r\n\t\t}\r\n\r\n\t\tthis.executeMCP(command, s2, key);\r\n\t}\r\n\r\n\tinitMCP() {\r\n\t\tthis.instance.connection.send('#$#register_client Chatmud Official Client (Alpha)');\r\n\t\tthis.instance.connection.send('#$#client_supports authkeys');\r\n\t\tthis.instance.connection.send('#$#client_supports json');\r\n\t\tthis.instance.connection.send('#$#client_supports check_netlag');\r\n\t}\r\n\r\n\texecuteMCP(command, args, key) {\r\n\t\tif (key) {\r\n\t\t\tthis.checkKey(key);\r\n\t\t}\r\n\r\n\t\tswitch (command) {\r\n\t\t\tcase 'authentication_key':\r\n\t\t\t\tthis.key = args[0];\r\n\t\t\t\tthis.instance.info.key = args[0];\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'my_name':\r\n\t\t\t\tthis.name = args[0];\r\n\t\t\t\tthis.instance.info.name = args[0];\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'channel_message':\r\n\t\t\t\tthis.handleChannelMessage(args);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'channel_social':\r\n\t\t\t\tthis.handleChannelSocial(args);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'social':\r\n\t\t\t\tthis.handleSocial(args);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'watched_player_connect':\r\n\t\t\t\tthis.handlePlayerConnect(args);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'watched_player_reconnect':\r\n\t\t\t\tthis.handlePlayerReconnect(args);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'watched_player_disconnect':\r\n\t\t\t\tthis.handlePlayerDisconnect(args);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'teleport_out':\r\n\t\t\t\tthis.handlePlayerTeleportOut(args);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'teleport_in':\r\n\t\t\t\tthis.handlePlayerTeleportIn(args);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'tell_message':\r\n\t\t\t\tthis.handleTell(args);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'edit':\r\n\t\t\t\tthis.handleEdit(args);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'netlag':\r\n\t\t\t\tthis.handleNetLag(args);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthis.handlePlay(command, args);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\thandleChannelMessage(args) {\r\n\t\tthis.instance.history.addMessage(args.name, args.prefix + args.message);\r\n\t\tthis.instance.output.add(args.prefix + ' ' + args.message);\r\n\t\tthis.instance.soundPlayer.playChannel(args.name);\r\n\t}\r\n\r\n\thandleChannelSocial(args) {\r\n\t\tconsole.log(JSON.stringify(args));\r\n\t\tthis.instance.history.addMessage(args.name, args.name + ': ' + args.message);\r\n\t\tthis.instance.output.add(args.name + ': ' + args.message);\r\n\t\tthis.instance.soundPlayer.playSocial(args.social\t, args.gender);\r\n\t\tthis.instance.soundPlayer.playChannel(args.name);\r\n\t}\r\n\r\n\thandleSocial(args) {\r\n\t\tthis.instance.soundPlayer.playSocial(args.data[0], args.data[2]);\r\n\t}\r\n\r\n\thandlePlay(command, args) {\r\n\t\tif (args.data) {\r\n\t\t\tthis.instance.soundPlayer.play(args.data[0], command);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\thandlePlayerConnect(args) {\r\n\t\tthis.instance.soundPlayer.play('enter');\r\n\t\tthis.instance.output.add(args.data[0] + ' connected');\r\n\t}\r\n\r\n\thandlePlayerReconnect(args) {\r\n\t\tthis.instance.soundPlayer.play('reconnect');\r\n\t\tthis.instance.output.add(args[0] + ' reconnected');\r\n\t}\r\n\r\n\thandlePlayerDisconnect(args) {\r\n\t\tthis.instance.soundPlayer.play('leave');\r\n\t\tthis.instance.output.add(args.data[0] + ' disconnected');\r\n\t}\r\n\r\n\thandlePlayerTeleportOut(args) {\r\n\t\tthis.instance.soundPlayer.play('teleport%20out', 'misc');\r\n\t}\r\n\r\n\thandlePlayerTeleportIn(args) {\r\n\t\tthis.instance.soundPlayer.play('teleport%20in', 'misc');\r\n\t}\r\n\r\n\thandleTell(args) {\r\n\t\tconsole.log('Parsed tell: ' + args);\r\n\t\tthis.instance.soundPlayer.play('tell');\r\n\t\tthis.instance.output.add(args.data[0] + ' ' + args.data[1] + ' ' + args.data[2]);\r\n\t}\r\n\r\n\thandleEdit(args) {\r\nconsole.log(JSON.stringify(args));\r\n\t\tconst args2 = args[0].split(' ');\r\n\t\t// Console.log(\"Split args: \" + JSON.stringify(args2));\r\n\t\t// let verb = args2[1].split(\":\")[1];\r\n\t\t// let object = args2[4].split(\":\")[0];\r\n\t\tthis.instance.programmer.setObject(args2[args2.length - 1]);\r\n\t\tthis.instance.programmer.setEnableHelper(true);\r\n\t}\r\n\r\n\tcheckKey(key) {\r\n\t\tconsole.log('Checking ' + key + ' agains ' + this.key);\r\n\t\tif (key != this.key) {\r\n\t\t\tthis.instance.soundPlayer.play('spoofer', 'misc');\r\n\t\t\tthis.instance.output.add('Spoof attempt!');\r\n\t\t}\r\n\t}\r\n\r\n\thandleNetLag(args) {\r\n\t\tif (args.data[0] == 'ping') {\r\n\t\t\tconst newPing = new PingUtils(args.data[1]);\r\n\t\t\tthis.instance.connection.send('#$#netlag pong ' + args.data[1]);\r\n\t\t\tnewPing.start();\r\n\t\t\tthis.pings.push(newPing);\r\n\t\t}\r\n\r\n\t\tif (args.data[0] == 'pang') {\r\n\t\t\tconst myPing = this.findPingByToken(args.data[1]);\r\n\t\t\tmyPing.stop();\r\n\t\t}\r\n\t}\r\n\r\n\tfindPingByToken(token) {\r\n\t\tfor (const ping of this.pings) {\r\n\t\t\tif (ping.token == token) {\r\n\t\t\t\treturn ping;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = MCP;\r\n","'use strict';\r\n\r\nclass Triggers {\r\n\tconstructor() {\r\n\t\tthis.instance = null;\r\n\t}\r\n\r\n\tact(string, instance) {\r\n\t\tthis.instance = instance;\r\n\t\tthis.executeTriggers(string);\r\n\t\treturn string;\r\n\t}\r\n\r\n\texecuteTriggers(string) {\r\n\t\tlet matched = string.match('^Turning (off|on) channel ([a-zA-Z0-9]*)?\\.');\r\n\t\tif (matched) {\r\n\t\t\tthis.instance.soundPlayer.play(matched[1]);\r\n\t\t}\r\n\r\n\t\tmatched = string.match('^I don\\'t understand that\\.$');\r\n\t\tif (matched) {\r\n\t\t\tthis.instance.soundPlayer.play('huh', 'misc');\r\n\t\t}\r\n\r\n\t\tmatched = string.match('^(\\>\\> Command Aborted \\<\\<|Invalid selection.)$');\r\n\t\tif (matched) {\r\n\t\t\tthis.instance.soundPlayer.play('cancel');\r\n\t\t}\r\n\r\n\t\tmatched = string.match('(\\\\[(Type a line of input or `@abort\\' to abort the command|Type lines of input; use `\\\\.\\' to end or `@abort\\' to abort the command)\\\\.\\\\]|\\\\[Enter `yes\\' or `no\\'\\\\])');\r\n\t\tif (matched) {\r\n\t\t\tthis.instance.soundPlayer.play('prompt');\r\n\t\t}\r\n\r\n\t\tmatched = string.match('You click your heels three times.');\r\n\t\tif (matched) {\r\n\t\t\tthis.instance.soundPlayer.play('home', 'misc');\r\n\t\t}\r\n\r\n\t\tmatched = string.match('[Connections] A new high player count has been reached! * players are connected.');\r\n\t\tif (matched) {\r\n\t\t\tthis.instance.soundPlayer.play('high%connections', 'misc');\r\n\t\t}\r\n\r\n\t\tmatched = string.match('[Creation] * has just connected for the first time! Please make them feel welcome.');\r\n\t\tif (matched) {\r\n\t\t\tthis.instance.soundPlayer.play('creation');\r\n\t\t}\r\n\r\n\t\tmatched = string.match('(.*) says,(.*)');\r\n\t\tif (matched) {\r\n\t\t\tthis.instance.soundPlayer.play('say');\r\n\t\t}\r\n\r\n\t\tmatched = string.match('^You say,*?');\r\n\t\tif (matched) {\r\n\t\t\tthis.instance.soundPlayer.play('say');\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = Triggers;\r\n","'use strict';\r\nclass ProgrammerHelper {\r\n\tconstructor() {\r\n\t\tthis.code = '';\r\n\t\tthis.receiving = false;\r\n\t\tthis.instance = null;\r\n\t}\r\n\r\n\tact(string, instance) {\r\n\t\tif (instance.programmer.enabled == true) {\r\n\t\t\tif (this.receiving == false) {\r\n\t\t\t\tthis.receiving = true;\r\n\t\t\t\tthis.code = '';\r\n\t\t\t}\r\n\r\n\t\t\tthis.instance = instance;\r\n\t\t\tconsole.log('Checking: ' + string);\r\n\t\t\tif (string == '.') {\r\n\t\t\t\tthis.instance.programmer.setCode(this.code);\r\n\t\t\t\tthis.instance.programmer.open();\r\n\t\t\t\tthis.instance.programmer.setEnableHelper(false);\r\n\t\t\t\tthis.receiving = false;\r\n\t\t\t}\r\n\t\t\tthis.code += string + '\\n';\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\treturn string;\r\n\t}\r\n}\r\n\r\nmodule.exports = ProgrammerHelper;\r\n","'use strict';\r\n\r\nclass Notifier {\r\n\tconstructor() {\r\n\t\tthis.instance = null;\r\n\t\tNotification.requestPermission().then(result => console.log('Notification result: ' + result));\r\n\t}\r\n\r\n\tact(string, instance) {\r\n\t\tstring = string.toString();\r\n\t\tthis.instance = instance;\r\n\t\tif (this.instance.info.name != '') {\r\n\t\t\tif (string.includes(this.instance.info.name)) {\r\n\t\t\t\tconsole.log('Sending notification');\r\n\t\t\t\tnew Notification('ChatMud', {\r\n\t\t\t\t\tbody: 'You\\'ve been mentioned! ' + string});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn string;\r\n\t}\r\n}\r\n\r\nmodule.exports = Notifier;\r\n","'use strict';\r\n\r\nconst inserts = {\r\n\twebtts: require('../inserts/webtts'),\r\n\tmcp: require('../inserts/mcp'),\r\n\ttriggers: require('../inserts/triggers'),\r\n\tprogrammerhelper: require('../inserts/programmerhelper'),\r\n\tnotifier: require('../inserts/notifier')\r\n};\r\n\r\nclass InsertFactory {\r\n\tstatic getInsert(name) {\r\n\t\treturn inserts[name];\r\n\t}\r\n}\r\n\r\nmodule.exports = InsertFactory;\r\n","module.exports=[];","'use strict';\r\nconst appends = {\r\n};\r\nclass AppendFactory {\r\n\tstatic getInstance(instance) {\r\n\t\treturn appends[instance];\r\n\t}\r\n}\r\n\r\nmodule.exports = AppendFactory;\r\n","'use strict';\r\nclass ChannelHistory {\r\n\tconstructor() {\r\n\t\tthis.channels = new Array();\r\n\t}\r\n\r\n\taddMessage(pChannel, message) {\r\n\t\tconsole.log('Adding to ' + pChannel + ', ' + message);\r\n\t\tlet channel = this.getChannelByName(pChannel);\r\n\t\tif (channel == -1) {\r\n\t\t\tchannel = new Channel(pChannel);\r\n\t\t\tthis.channels.push(channel);\r\n\t\t\tconsole.log('Created new channel');\r\n\t\t}\r\n\t\tchannel.addMessage(message);\r\n\t}\r\n\r\n\tgetChannelByName(name) {\r\n\t\tconsole.log('Getting channel by name ' + name);\r\n\t\tfor (const channel of this.channels) {\r\n\t\t\tif (channel.name == name) {\r\n\t\t\t\treturn channel;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tgetMessageForChannel(name, id) {\r\n\t\tconsole.log('Getting message ' + id + ' for channel ' + name);\r\n\t\tconst channel = this.getChannelByName(name);\r\n\t\treturn channel.messages[id];\r\n\t}\r\n}\r\n\r\nclass Channel {\r\n\tconstructor(name) {\r\n\t\tthis.name = name;\r\n\t\tthis.messages = new Array();\r\n\t}\r\n\r\n\taddMessage(message) {\r\n\t\tconsole.log('In-channel message add: ' + message);\r\n\t\tthis.messages.unshift(message);\r\n\t}\r\n}\r\n\r\nmodule.exports = ChannelHistory;\r\n","'use strict';\r\nconst ChannelHistory = require('../history/channelhistory');\r\n\r\nclass ChannelInterface {\r\n\tconstructor(history, instance) {\r\n\t\tthis.instance = instance;\r\n\t\tthis.currentChannel = 0;\r\n\t\tthis.currentMessage = 0;\r\n\t\tthis.history = history;\r\n\t}\r\n\r\n\tnextChannel() {\r\n\t\tconsole.log('Next channel');\r\n\t\tif (this.currentChannel < this.history.channels.length - 1) {\r\n\t\t\tthis.currentChannel++;\r\n\t\t} else {\r\n\t\t\tthis.currentChannel = this.history.channels.length - 1;\r\n\t\t}\r\n\r\n\t\tthis.instance.tts.speakImmediate(this.history.channels[this.currentChannel].name);\r\n\t}\r\n\r\n\tpreviousChannel() {\r\n\t\tconsole.log('Previous channel');\r\n\t\tif (this.currentChannel > 0) {\r\n\t\t\tthis.currentChannel--;\r\n\t\t} else {\r\n\t\t\tthis.currentChannel = 0;\r\n\t\t}\r\n\r\n\t\tthis.instance.tts.speakImmediate(this.history.channels[this.currentChannel].name);\r\n\t}\r\n\r\n\tnextMessage() {\r\n\t\tconsole.log('Next message');\r\n\t\tif (this.currentMessage > 0) {\r\n\t\t\tthis.currentMessage--;\r\n\t\t} else {\r\n\t\t\tthis.currentMessage = 0;\r\n\t\t}\r\n\r\n\t\tthis.readMessage(this.currentMessage);\r\n\t}\r\n\r\n\tpreviousMessage() {\r\n\t\tconsole.log('Previous message');\r\n\t\tif (this.currentMessage < this.history.channels[this.currentChannel].messages.length - 1) {\r\n\t\t\tthis.currentMessage++;\r\n\t\t} else {\r\n\t\t\tthis.currentMessage = this.history.channels[this.currentChannel].messages.length - 1;\r\n\t\t}\r\n\r\n\t\tthis.readMessage(this.currentMessage);\r\n\t}\r\n\r\n\treadMessage(id) {\r\n\t\tconsole.log('Reading ' + this.history.channels[this.currentChannel].messages[id]);\r\n\t\tthis.instance.tts.speakImmediate(this.history.channels[this.currentChannel].messages[id]);\r\n\t}\r\n}\r\n\r\nmodule.exports = ChannelInterface;\r\n","module.exports=[{type:\"file\",name:\".DS_Store\"},{type:\"file\",name:\"cancel.ogg\"},{type:\"file\",name:\"dominion ship tell.ogg\"},{type:\"file\",name:\"enter.ogg\"},{type:\"file\",name:\"event.ogg\"},{type:\"file\",name:\"leave linkdead.ogg\"},{type:\"file\",name:\"leave.ogg\"},{type:\"file\",name:\"off.ogg\"},{type:\"file\",name:\"on.ogg\"},{type:\"file\",name:\"prompt.ogg\"},{type:\"file\",name:\"reconnected.ogg\"},{type:\"file\",name:\"reply.ogg\"},{type:\"file\",name:\"say.ogg\"},{type:\"file\",name:\"tell.ogg\"},{type:\"file\",name:\"whisper.ogg\"},{name:\"admin\",type:\"folder\",children:[{type:\"file\",name:\"administrators.ogg\"},{type:\"file\",name:\"wizchange.ogg\"}]},{name:\"casino\",type:\"folder\",children:[{type:\"file\",name:\"slot_bet.ogg\"},{type:\"file\",name:\"slot_lose.ogg\"},{type:\"file\",name:\"slot_win.ogg\"}]},{name:\"channels\",type:\"folder\",children:[{type:\"file\",name:\"announce.ogg\"},{type:\"file\",name:\"botgames.ogg\"},{type:\"file\",name:\"chat.ogg\"},{type:\"file\",name:\"cp.ogg\"},{type:\"file\",name:\"crazyparty.ogg\"},{type:\"file\",name:\"creation.ogg\"},{type:\"file\",name:\"dev.ogg\"},{type:\"file\",name:\"devlog.ogg\"},{type:\"file\",name:\"games.ogg\"},{type:\"file\",name:\"global.ogg\"},{type:\"file\",name:\"haw.ogg\"},{type:\"file\",name:\"im.ogg\"},{type:\"file\",name:\"kittycat.ogg\"},{type:\"file\",name:\"moderators.ogg\"},{type:\"file\",name:\"music.ogg\"},{type:\"file\",name:\"newbie.ogg\"},{type:\"file\",name:\"news.ogg\"},{type:\"file\",name:\"notify.ogg\"},{type:\"file\",name:\"program.ogg\"},{type:\"file\",name:\"slej.ogg\"},{type:\"file\",name:\"shout.ogg\"},{type:\"file\",name:\"teamtalk.ogg\"},{type:\"file\",name:\"wily.ogg\"},{type:\"file\",name:\"wizards.ogg\"}]},{name:\"dragon\",type:\"folder\",children:[{type:\"file\",name:\"eat.ogg\"},{type:\"file\",name:\"flame.ogg\"}]},{name:\"games\",type:\"folder\",children:[{type:\"file\",name:\"anagrams_end.ogg\"},{type:\"file\",name:\"anagrams_invalid.ogg\"},{type:\"file\",name:\"anagrams_start.ogg\"},{type:\"file\",name:\"anagrams_valid.ogg\"}]},{name:\"meow_button\",type:\"folder\",children:[{type:\"file\",name:\"meow.ogg\"},{type:\"file\",name:\"press.ogg\"},{type:\"file\",name:\"roll.ogg\"}]},{name:\"guns\",type:\"folder\",children:[{type:\"file\",name:\"emptygun.ogg\"},{type:\"file\",name:\"gun_drop.ogg\"},{type:\"file\",name:\"gun_fired.ogg\"},{type:\"file\",name:\"gun_load.ogg\"},{type:\"file\",name:\"gun_silenced_fired.ogg\"},{type:\"file\",name:\"gun_unload.ogg\"},{type:\"file\",name:\"target_hit.ogg\"},{type:\"file\",name:\"target_miss.ogg\"},{type:\"file\",name:\"target_miss2.ogg\"},{type:\"file\",name:\"target_miss3.ogg\"},{type:\"file\",name:\"unwield_gun.ogg\"},{type:\"file\",name:\"wield_gun.ogg\"}]},{name:\"misc\",type:\"folder\",children:[{type:\"file\",name:\"change.ogg\"},{type:\"file\",name:\"high connections.ogg\"},{type:\"file\",name:\"huh.ogg\"},{type:\"file\",name:\"home.ogg\"},{type:\"file\",name:\"spoofer.ogg\"},{type:\"file\",name:\"teleport in.ogg\"},{type:\"file\",name:\"teleport out.ogg\"}]},{name:\"pocketbubble\",type:\"folder\",children:[{type:\"file\",name:\"bounce.ogg\"},{type:\"file\",name:\"create.ogg\"},{type:\"file\",name:\"pop.ogg\"}]},{name:\"tv\",type:\"folder\",children:[{type:\"file\",name:\"insult_off.ogg\"},{type:\"file\",name:\"shot_off.ogg\"},{type:\"file\",name:\"violent_social_off.ogg\"}]},{name:\"socials\",type:\"folder\",children:[{type:\"file\",name:\"Kiss.ogg\"},{type:\"file\",name:\"Poke.ogg\"},{type:\"file\",name:\"agree_female_101.ogg\"},{type:\"file\",name:\"agree_male_101.ogg\"},{type:\"file\",name:\"apologize_female_101.ogg\"},{type:\"file\",name:\"bark.ogg\"},{type:\"file\",name:\"bored_female_101.ogg\"},{type:\"file\",name:\"bored_male_101.ogg\"},{type:\"file\",name:\"brb_101.ogg\"},{type:\"file\",name:\"burp.ogg\"},{type:\"file\",name:\"burp2.ogg\"},{type:\"file\",name:\"cackle_female.ogg\"},{type:\"file\",name:\"cackle_male.ogg\"},{type:\"file\",name:\"cheer_female_101.ogg\"},{type:\"file\",name:\"chuckle female101.ogg\"},{type:\"file\",name:\"chuckle female102.ogg\"},{type:\"file\",name:\"chuckle_female.ogg\"},{type:\"file\",name:\"chuckle_male_1.ogg\"},{type:\"file\",name:\"chuckle_male_2.ogg\"},{type:\"file\",name:\"clap.ogg\"},{type:\"file\",name:\"coffee.ogg\"},{type:\"file\",name:\"coke.ogg\"},{type:\"file\",name:\"comfort_female_101.ogg\"},{type:\"file\",name:\"comfort_male_101.ogg\"},{type:\"file\",name:\"confused_female_101.ogg\"},{type:\"file\",name:\"cough male.ogg\"},{type:\"file\",name:\"cough_female.ogg\"},{type:\"file\",name:\"cry_female.ogg\"},{type:\"file\",name:\"cry_male.ogg\"},{type:\"file\",name:\"fart_female.ogg\"},{type:\"file\",name:\"fart_male.ogg\"},{type:\"file\",name:\"flirt_female_101.ogg\"},{type:\"file\",name:\"gasp_female.ogg\"},{type:\"file\",name:\"gasp_male.ogg\"},{type:\"file\",name:\"giggle_female.ogg\"},{type:\"file\",name:\"giggle_male.ogg\"},{type:\"file\",name:\"growl female101.ogg\"},{type:\"file\",name:\"growl female102.ogg\"},{type:\"file\",name:\"growl_female.ogg\"},{type:\"file\",name:\"growl_male.ogg\"},{type:\"file\",name:\"hiss.ogg\"},{type:\"file\",name:\"hmm female102.ogg\"},{type:\"file\",name:\"hmm female103.ogg\"},{type:\"file\",name:\"hmm_female_101.ogg\"},{type:\"file\",name:\"hmm_male.ogg\"},{type:\"file\",name:\"kick room.ogg\"},{type:\"file\",name:\"kick.ogg\"},{type:\"file\",name:\"kick10.ogg\"},{type:\"file\",name:\"kick11.ogg\"},{type:\"file\",name:\"kick12.ogg\"},{type:\"file\",name:\"kick13.ogg\"},{type:\"file\",name:\"kick14.ogg\"},{type:\"file\",name:\"kick15.ogg\"},{type:\"file\",name:\"kick16.ogg\"},{type:\"file\",name:\"kick17.ogg\"},{type:\"file\",name:\"kick18.ogg\"},{type:\"file\",name:\"kick19.ogg\"},{type:\"file\",name:\"kick2.ogg\"},{type:\"file\",name:\"kick20.ogg\"},{type:\"file\",name:\"kick3.ogg\"},{type:\"file\",name:\"kick4.ogg\"},{type:\"file\",name:\"kick5.ogg\"},{type:\"file\",name:\"kick6.ogg\"},{type:\"file\",name:\"kick7.ogg\"},{type:\"file\",name:\"kick8.ogg\"},{type:\"file\",name:\"kick9.ogg\"},{type:\"file\",name:\"laugh_female.ogg\"},{type:\"file\",name:\"lol_female_101.ogg\"},{type:\"file\",name:\"lol_male.ogg\"},{type:\"file\",name:\"meow.ogg\"},{type:\"file\",name:\"meow2.ogg\"},{type:\"file\",name:\"meow3.ogg\"},{type:\"file\",name:\"nudge.ogg\"},{type:\"file\",name:\"oic female102.ogg\"},{type:\"file\",name:\"oic female103.ogg\"},{type:\"file\",name:\"oic_female_101.ogg\"},{type:\"file\",name:\"oic_male_101.ogg\"},{type:\"file\",name:\"okshut_101.ogg\"},{type:\"file\",name:\"okshut_102.ogg\"},{type:\"file\",name:\"paddle.ogg\"},{type:\"file\",name:\"punch room.ogg\"},{type:\"file\",name:\"punch.ogg\"},{type:\"file\",name:\"punch10.ogg\"},{type:\"file\",name:\"punch11.ogg\"},{type:\"file\",name:\"punch12.ogg\"},{type:\"file\",name:\"punch13.ogg\"},{type:\"file\",name:\"punch14.ogg\"},{type:\"file\",name:\"punch15.ogg\"},{type:\"file\",name:\"punch16.ogg\"},{type:\"file\",name:\"punch17.ogg\"},{type:\"file\",name:\"punch18.ogg\"},{type:\"file\",name:\"punch19.ogg\"},{type:\"file\",name:\"punch2.ogg\"},{type:\"file\",name:\"punch20.ogg\"},{type:\"file\",name:\"punch3.ogg\"},{type:\"file\",name:\"punch4.ogg\"},{type:\"file\",name:\"punch5.ogg\"},{type:\"file\",name:\"punch6.ogg\"},{type:\"file\",name:\"punch7.ogg\"},{type:\"file\",name:\"punch8.ogg\"},{type:\"file\",name:\"punch9.ogg\"},{type:\"file\",name:\"purr.ogg\"},{type:\"file\",name:\"rofl_female.ogg\"},{type:\"file\",name:\"rofl_male.ogg\"},{type:\"file\",name:\"scream_female.ogg\"},{type:\"file\",name:\"scream_male.ogg\"},{type:\"file\",name:\"shove.ogg\"},{type:\"file\",name:\"shut_101.ogg\"},{type:\"file\",name:\"shutbuddy_101.ogg\"},{type:\"file\",name:\"sigh_female.ogg\"},{type:\"file\",name:\"sigh_male.ogg\"},{type:\"file\",name:\"sit.ogg\"},{type:\"file\",name:\"slap room.ogg\"},{type:\"file\",name:\"slap.ogg\"},{type:\"file\",name:\"slap2.ogg\"},{type:\"file\",name:\"slap3.ogg\"},{type:\"file\",name:\"slap4.ogg\"},{type:\"file\",name:\"slap5.ogg\"},{type:\"file\",name:\"snarl_101.ogg\"},{type:\"file\",name:\"snicker_female_101.ogg\"},{type:\"file\",name:\"snicker_male.ogg\"},{type:\"file\",name:\"sniff_female.ogg\"},{type:\"file\",name:\"sniff_male.ogg\"},{type:\"file\",name:\"snore.ogg\"},{type:\"file\",name:\"snort.ogg\"},{type:\"file\",name:\"squeak.ogg\"},{type:\"file\",name:\"stand.ogg\"},{type:\"file\",name:\"tackle.ogg\"},{type:\"file\",name:\"thank_female_101.ogg\"},{type:\"file\",name:\"vomit.ogg\"},{type:\"file\",name:\"yawn_female_101.ogg\"},{type:\"file\",name:\"yawn_female.ogg\"},{type:\"file\",name:\"yawn_male.ogg\"}]},{name:\"clocks\",type:\"folder\",children:[{name:\"bigben\",type:\"folder\",children:[{type:\"file\",name:\"00.ogg\"},{type:\"file\",name:\"15.ogg\"},{type:\"file\",name:\"30.ogg\"},{type:\"file\",name:\"45.ogg\"},{type:\"file\",name:\"chime.ogg\"}]},{name:\"grandfather\",type:\"folder\",children:[{type:\"file\",name:\"chime.ogg\"}]}]}];","const sounds = require('./sounds');\r\n\r\nfunction findSoundsInFolder(path) {\r\n\tconst split = path.split('/');\r\n\tlet directory = sounds;\r\n\tfor (const string of split) {\r\n\t\tdirectory = search(string, directory);\r\n\t}\r\n\treturn directory;\r\n}\r\n\r\nfunction search(string, object) {\r\n\tfor (const entry of object) {\r\n\t\tif (entry.name == string) {\r\n\t\t\treturn entry.children;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction findFilenames(string, array) {\r\n\tconst returnObj = [];\r\n\tfor (const entry of array) {\r\n\t\tif (entry.name.includes(string)) {\r\n\t\t\treturnObj.push(entry.name);\r\n\t\t}\r\n\t}\r\n\treturn returnObj;\r\n}\r\n\r\nmodule.exports.findSoundsInFolder = findSoundsInFolder;\r\nmodule.exports.findFilenames = findFilenames;\r\n","const {Howl, Howler} = require('howler');\r\nconst rng = require('random-int');\r\nconst soundops = require('./soundops');\r\nconst Sounds = require('./sounds');\r\nconst path = require('path');\r\n\r\nclass SoundPlayer {\r\n\tconstructor(extension = '.m4a') {\r\n\t\tthis.sounds = new Array();\r\n\t\tthis.extension = extension;\r\n\t}\r\n\r\n\tplay(file, folder = '') {\r\n\t\tlet mFile = this.searchSounds(file, folder);\r\n\t\tif (mFile == -1) {\r\n\t\t\tmFile = this.loadSound(file, folder);\r\n\t\t}\r\n\t\tmFile.sound.play();\r\n\t}\r\n\r\n\tplayChannel(name) {\r\n\t\tconst channels = soundops.findSoundsInFolder('channels');\r\n\t\tconst foundChannels = soundops.findFilenames(name, channels);\r\n\t\tname = (foundChannels.length == 0 ? 'global' : name);\r\n\t\tthis.play(name, 'channels');\r\n\t}\r\n\r\n\tplaySocial(name, gender) {\r\n\t\tconst socials = soundops.findSoundsInFolder('socials');\r\n\t\tlet foundSocials = soundops.findFilenames(name + '_' + gender, socials);\r\n\t\tif (foundSocials.length == 0) {\r\n\t\t\tfoundSocials = soundops.findFilenames(name, socials);\r\n\t\t}\r\n\t\tlet filename = null;\r\n\t\tif (foundSocials.length > 0) {\r\n\t\t\tfilename = foundSocials[rng(0, foundSocials.length - 1)].toString();\r\n\t\t\tfilename = filename.slice(0, filename.length - 4);\r\n\t\t}\r\n\r\n\t\tif (!filename) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.play(filename, 'socials');\r\n\t}\r\n\r\n\tsearchSounds(file, folder) {\r\n\t\tfor (const sound of this.sounds) {\r\n\t\t\tif (sound.file == file && sound.folder == folder) {\r\n\t\t\t\treturn sound;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tloadSound(file, folder) {\r\n\t\tconst sound = new Sound(folder, file);\r\n\t\tthis.sounds.push(sound);\r\n\t\treturn sound;\r\n\t}\r\n}\r\n\r\nclass Sound {\r\n\tconstructor(folder, file, extension = '.m4a') {\r\n\t\tif (process.platform) {\r\n\t\t\tthis.basePath = path.join(__dirname, 'sounds/');\r\n\t\t} else {\r\n\t\t\tthis.basePath = './sounds/';\r\n\t\t}\r\n\t\tthis.file = file;\r\n\t\tthis.folder = folder;\r\n\t\tthis.extension = extension;\r\n\t\tthis.path = this.basePath + (this.folder ? this.folder + '/' : '') + this.file + this.extension;\r\n\r\n\t\tconsole.log('Loading ' + this.path);\r\n\t\tthis.sound = new Howl({src: this.path});\r\n\t}\r\n}\r\n\r\nmodule.exports = SoundPlayer;\r\n","'use strict';\r\n\r\nclass Programmer {\r\n\tconstructor(instance) {\r\n\t\tthis.instance = instance;\r\n\t\tthis.code = '';\r\n\t\tthis.object = '';\r\n\t\tthis.enabled = false;\r\n\t\tthis.window = null;\r\n\t\tthis.lines = new Array();\r\n\t\tthis.currentLine = 0;\r\n\t\tthis.boundMethod = null;\r\n\t}\r\n\r\n\tsetEnableHelper(value) {\r\n\t\tthis.enabled = value;\r\n\t}\r\n\r\n\tsetCode(code) {\r\n\t\tthis.code = code;\r\n\t\tconsole.log('Code: ' + this.code);\r\n\t}\r\n\r\n\topen() {\r\n\t\tthis.window = window.open('editor.html');\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.window.postMessage(this.code);\r\n\t\t}, 1000);\r\n\t\tthis.boundMethod = this.handleMessage.bind(this);\r\n\t\twindow.addEventListener('message', this.boundMethod);\r\n\t}\r\n\r\n\thandleMessage(data) {\r\n\t\tconst code = data.data;\r\n\t\tthis.sendCode(code);\r\n\t\twindow.removeEventListener('message', this.boundMethod);\r\n\t}\r\n\r\n\tsendCode(data) {\r\n\t\tconst lines = data.split('\\n');\r\n\t\tthis.lines = lines;\r\n\t\tthis.instance.connection.send('@program ' + this.object);\r\n\t\tfor (const line of lines) {\r\n\t\t\tthis.instance.connection.send(line);\r\n\t\t}\r\n\t\tthis.instance.connection.send('.');\r\n\t\tthis.code = '';\r\n\t\tthis.enabled = false;\r\n\t}\r\n\r\n\tsetObject(obj) {\r\n\t\tconsole.log('Object set to ' + this.object);\r\n\t\tthis.object = obj;\r\n\t}\r\n}\r\n\r\nmodule.exports = Programmer;\r\n","'use strict';\r\nconst say = require('say');\r\n\r\nclass TTS {\r\n\tconstructor() {\r\n\t\tthis.enabled = true;\r\n\t\tthis.speaking = false;\r\n\t\tthis.speakQueue = new Array();\r\n\t\tthis.voice = 'alex';\r\n\t\tthis.rate = 3.0;\r\n\t}\r\n\r\n\tstopSpeech() {\r\n\t\tif (this.speaking == true) {\r\n\t\t\tthis.speaking = false;\r\n\t\t\tthis.speakQueue = [];\r\n\t\t\tsay.stop();\r\n\t\t}\r\n\t}\r\n\r\n\tspeakImmediate(string) {\r\n\t\tif (this.speaking == true) {\r\n\t\t\tthis.stopSpeech();\r\n\t\t}\r\n\t\tthis.speak(string);\r\n\t}\r\n\r\n\tspeak(string) {\r\n\t\tif (!this.enabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tstring = string.replace('[', ' ');\r\n\t\tstring = string.replace(']', ' ');\r\n\t\tconsole.log('saying ' + string);\r\n\t\tthis.speakQueue.push(string);\r\n\t\tif (this.speaking == false) {\r\n\t\t\tthis.handleQueue();\r\n\t\t\tthis.speaking = true;\r\n\t\t}\r\n\t}\r\n\r\n\thandleQueue() {\r\n\t\tif (this.speakQueue.length > 0) {\r\n\t\t\tconst string = this.speakQueue.shift();\r\n\t\t\tsay.speak(string, this.voice, this.rate, err => this.handleQueue());\r\n\t\t} else {\r\n\t\t\tthis.speaking = false;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = TTS;\r\n","'use strict';\r\n\r\nclass TTS {\r\n\tconstructor() {\r\n\t\tthis.enabled = true;\r\n\t\tthis.speaking = false;\r\n\t\tthis.speakQueue = new Array();\r\n\t\tthis.voice = 'alex';\r\n\t\tthis.rate = 3.0;\r\n\t}\r\n\r\n\tstopSpeech() {\r\n\t\tlet item = document.getElementById(\"tts\");\r\n        item.innerHTML = \"\";\r\n\t}\r\n\r\n\tspeakImmediate(string) {\r\n\t\tlet item = document.getElementById(\"tts\");\r\n\t\titem.innerHTML = \"\";\r\n\t\tthis.speak(string);\r\n\t}\r\n\r\n\tspeak(string) {\r\n\t\tif (!this.enabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tstring = string.replace('[', ' ');\r\n\t\tstring = string.replace(']', ' ');\r\n\t\tconsole.log('saying ' + string);\r\n        \r\n\t\tlet item = document.getElementById(\"tts\");\r\n        let node = document.createTextNode(string+\"\\n\");\r\n\t\titem.appendChild(document.createElement('br'));\r\n\t\titem.appendChild(node);\r\n\t\tsetTimeout(this.stopSpeech.bind(this), 250);\r\n\t}\r\n\r\n\t\r\n}\r\n\r\nmodule.exports = TTS;\r\n","'use strict';\r\n\r\nclass TTSFactory {\r\n    static getInstance() {\r\n        switch(process.platform) {\r\n            case 'darwin':\r\n                const MacTTS = require('../tts/mactts');\r\n                return new MacTTS();\r\n                break;\r\n            default:\r\n                const AriaTTS = require('../tts/ariatts');\r\n                return new AriaTTS();\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = TTSFactory;","import './ui.css';\r\n\r\nconst React = require('react');\r\n\r\nclass MudInput extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tinputValue: ''\r\n\t\t};\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t\tthis.handleKey = this.handleKey.bind(this);\r\n\t\tthis.inputRef = React.createRef();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"input\">\r\n\t\t\t\t<h2>Input</h2>\r\n\t\t\t\t<input ref={this.inputRef} type=\"text\" aria-label=\"Mud Input\" value={this.state.inputValue} onChange={this.handleChange} onKeyPress={this.handleKey}/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.inputRef.current.focus();\r\n\t}\r\n\r\n\thandleKey(evt) {\r\n\t\tif (evt.key == 'Enter') {\r\n\t\t\tlet value = this.state.inputValue;\r\n\t\t\tif (value == '') {\r\n\t\t\t\tvalue = this.props.instance.inputHistory.getLastEntered();\r\n\t\t\t} else if (value != this.props.instance.inputHistory.getLastEntered()) {\r\n\t\t\t\tthis.props.instance.inputHistory.add(value);\r\n\t\t\t}\r\n\r\n\t\t\tthis.props.instance.connection.send(value);\r\n\t\t\tthis.props.instance.tts.stopSpeech();\r\n\t\t\tthis.setState({\r\n\t\t\t\tinputValue: ''\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleChange(evt) {\r\n\t\tthis.setState({\r\n\t\t\tinputValue: evt.target.value\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = MudInput;\r\n","module.exports={maxLines:500};","const React = require('react');\r\nconst urlToTitle = require('url-to-title');\r\n\r\nclass ResolvingLink extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\ttext: this.props.url\r\n\t\t};\r\n\t\turlToTitle(this.props.url, (err, resolved) => {\r\n\t\t\tif (err) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.setState({text: resolved});\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn <a href={this.props.url} onClick={this.props.onClick}>{this.state.text}</a>;\r\n\t}\r\n}\r\n\r\nmodule.exports = ResolvingLink;\r\n","const React = require('react');\r\nconst open = require('opn');\r\nconst YouTube = require('react-youtube-player').default;\r\nconst ResolvingLink = require('./resolvinglink');\r\n\r\nclass OutputItem extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t// This.re=/(http|ftp|https):\\/\\/([\\w_-]+(?:(?:\\.[\\w_-]+)+))([\\w.,@?\\^=%:\\/~+#-]*[\\w@?\\^=%\\/~+#-])?/gi;\r\n\t\tthis.re = /((?:http|ftp|https):\\/\\/(?:[\\w_-]+(?:(?:\\.[\\w_-]+)+))(?:[\\w.,@?\\^=%:\\/~+#-]*[\\w@?\\^=%\\/~+#-])?)/gi;\r\n\t}\r\n\r\n\titemize(text) {\r\n\t\tconst split = text.split(this.re);\r\n\t\tif (split.length == 1) {\r\n\t\t\treturn <div>{split[0]}</div>;\r\n\t\t}\r\n\t\treturn split.map((item, index) => {\r\n\t\t\tconst re = this.re; // Parcel doesn't let me use this.re directly for some odd reason\r\n\t\t\treturn (\r\n\t\t\t\tre.test(item) ? this.parseLink(item) : item\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\topenLink(event, link) {\r\n\t\tevent.preventDefault();\r\n\t\topen(link);\r\n\t}\r\n\r\n\tparseLink(item) {\r\n\t\tif (item.indexOf('youtube.com/watch') != -1) {\r\n\t\t\treturn this.parseYoutubeLink(item);\r\n\t\t}\r\n\t\treturn (<ResolvingLink url={item} onClick={e => this.openLink(e, item)}/>);\r\n\t}\r\n\r\n\tparseYoutubeLink(item) {\r\n\t\tlet id = item.split('v=')[1];\r\n\t\tconst andPosition = id.indexOf('&');\r\n\t\tif (andPosition != -1) {\r\n\t\t  id = id.substring(0, andPosition);\r\n\t\t}\r\n\t\treturn <YouTube videoId={id} />;\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn <div>{this.itemize(this.props.text)}</div>;\r\n\t}\r\n}\r\n\r\nmodule.exports = OutputItem;\r\n","const React = require('react');\r\nconst Settings = require('../settings.json');\r\nconst OutputItem = require('./outputitem');\r\n\r\nclass MudOutput extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tlines: []\r\n\t\t};\r\n\t\tthis.addLine = this.addLine.bind(this);\r\n\t\tthis.props.instance.output.on('MudOutput', data => this.addLine(data));\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"output\">\r\n\r\n\t\t\t\t{this.state.lines.map((line, index) => {\r\n\t\t\t\t\treturn <OutputItem text={line} />;\r\n\t\t\t\t})}\r\n\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\taddLine(line) {\r\n\t\tconsole.log('Adding line: ' + line);\r\n\t\tif (line) {\r\n\t\t\tconst lines = this.state.lines;\r\n\t\t\tlines.push(line);\r\n\t\t\tthis.setState({\r\n\t\t\t\tlines\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = MudOutput;\r\n","import {\r\n\tAccordion,\r\n\tAccordionItem,\r\n\tAccordionItemTitle,\r\n\tAccordionItemBody\r\n} from 'react-accessible-accordion';\r\n\r\nconst {Howler} = require('howler');\r\nconst React = require('react');\r\n\r\nclass SettingsPanel extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tvolume: Howler.volume() * 100,\r\n\t\t\tspeech: this.props.instance.tts.enabled,\r\n\t\t\tresolveLinks: true,\r\n\t\t\tembedYoutube: true,\r\n\t\t\tsounds: true\r\n\t\t};\r\n\r\n\t\tthis.handleVolumeChange = this.handleVolumeChange.bind(this);\r\n\t\tthis.handleSpeechStateChange = this.handleSpeechStateChange.bind(this);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Accordion>\r\n\t\t\t\t<AccordionItem>\r\n\t\t\t\t\t<AccordionItemTitle><h2>Audio</h2></AccordionItemTitle>\r\n\t\t\t\t\t<AccordionItemBody>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<label htmlFor=\"volume-slider\">Sound volume</label>\r\n\t\t\t\t\t\t\t<input type=\"range\" id=\"volume-slider\" value={this.state.volume} onChange={this.handleVolumeChange} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</AccordionItemBody>\r\n\t\t\t\t</AccordionItem>\r\n\r\n\t\t\t\t<AccordionItem>\r\n\t\t\t\t\t<AccordionItemTitle><h2>Speech</h2></AccordionItemTitle>\r\n\t\t\t\t\t<AccordionItemBody>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"speech-checkbox\">Speech enabled</label>\r\n\t\t\t\t\t\t<input type=\"checkbox\" id=\"speech-checkbox\" onChange={this.handleSpeechStateChange} checked={Boolean(this.state.speech)} />\r\n\r\n\t\t\t\t\t</AccordionItemBody>\r\n\t\t\t\t</AccordionItem>\r\n\t\t\t</Accordion>\r\n\t\t);\r\n\t}\r\n\r\n\thandleVolumeChange(event) {\r\n\t\tconst targetVolume = event.target.value;\r\n\t\tconsole.log('Target volume at ' + targetVolume / 100);\r\n\t\tHowler.volume(targetVolume / 100);\r\n\t\tthis.setState({\r\n\t\t\tvolume: targetVolume\r\n\t\t});\r\n\t}\r\n\r\n\thandleSpeechStateChange(event) {\r\n\t\tconsole.log('Target value is at ' + event.target.checked);\r\n\t\tthis.props.instance.interface.setSpeechEnabled(event.target.checked);\r\n\r\n\t\tthis.setState({\r\n\t\t\tspeech: event.target.checked\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = SettingsPanel;\r\n","'use strict';\r\nimport './ui.css';\r\n\r\nimport {\r\n\tAccordion,\r\n\tAccordionItem,\r\n\tAccordionItemTitle,\r\n\tAccordionItemBody\r\n} from 'react-accessible-accordion';\r\n\r\nconst React = require('react');\r\n\r\nclass OnlineList extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tpeople: {\r\n\t\t\t\tactive: [],\r\n\t\t\t\tidlers: [],\r\n\t\t\t\tbots: []\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t\tthis.people = {\r\n\t\t\tactive: [],\r\n\t\t\tbots: [],\r\n\t\t\tidlers: []\r\n\t\t};\r\n\r\n\t\tthis.createGroup = this.createGroup.bind(this);\r\n\r\n\t\tthis.response = null;\r\n\t}\r\n\r\n\tcomponentWillMount() {\r\n\t\tthis.getOnlineList();\r\n\t}\r\n\r\n\tgetOnlineList() {\r\n\t\tfetch('http://chatmud.com/api/who')\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(data => this.parseData(data));\r\n\t}\r\n\r\n\tparseData(data) {\r\n\t\tfor (const item in data.list) {\r\n\t\t\tconsole.log('Parsing item: ' + JSON.stringify(data.list[item]));\r\n\r\n\t\t\tif (data.list[item].flags && data.list[item].flags.includes('bot')) {\r\n\t\t\t\tconst person = {\r\n\t\t\t\t\tname: item,\r\n\t\t\t\t\ttitle: data.list[item].title\r\n\t\t\t\t};\r\n\t\t\t\tthis.people.bots.push(person);\r\n\t\t\t} else if (data.list[item].flags.includes('idle')) {\r\n\t\t\t\tconst person = {\r\n\t\t\t\t\tname: item,\r\n\t\t\t\t\ttitle: data.list[item].title\r\n\t\t\t\t};\r\n\t\t\t\tthis.people.idlers.push(person);\r\n\t\t\t} else {\r\n\t\t\t\tconst person = {\r\n\t\t\t\t\tname: item,\r\n\t\t\t\t\ttitle: data.list[item].title\r\n\t\t\t\t};\r\n\t\t\t\tthis.people.active.push(person);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tpeople: this.people\r\n\t\t});\r\n\t}\r\n\r\n\tcreateGroup(title, people) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<AccordionItem>\r\n\r\n\t\t\t\t\t<AccordionItemTitle>{title}</AccordionItemTitle>\r\n\t\t\t\t\t<AccordionItemBody>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t{people.map((item, index) => {\r\n\t\t\t\t\t\t\t\tconsole.log('Mapping ' + item.name);\r\n\t\t\t\t\t\t\t\treturn <li>{item.name} - {item.title}</li>;\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</AccordionItemBody>\r\n\t\t\t\t</AccordionItem>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div class=\"settings-panel\">\r\n\t\t\t\t<h1>Who's online</h1>\r\n\t\t\t\t<Accordion>\r\n\t\t\t\t\t{this.createGroup('Active', this.state.people.active)}\r\n\t\t\t\t\t{this.createGroup('Bots', this.state.people.bots)}\r\n\t\t\t\t\t{this.createGroup('Idlers', this.state.people.idlers)}\r\n\t\t\t\t</Accordion>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nmodule.exports = OnlineList;\r\n","import './ui.css';\r\n\r\nconst React = require('react');\r\nconst SettingsPanel = require('./settingspanel');\r\nconst OnlineList = require('./onlinelist');\r\n\r\nclass ToolBar extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tisSettingsOpened: false,\r\n\t\t\tisOnlineListOpened: false\r\n\t\t};\r\n\t\tthis.showSettings = this.showSettings.bind(this);\r\n\t\tthis.hideSettings = this.hideSettings.bind(this);\r\n\t\tthis.showOnlineList = this.showOnlineList.bind(this);\r\n\t\tthis.hideOnlineList = this.hideOnlineList.bind(this);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{this.renderButtons()}\r\n\t\t\t\t{this.renderSettings()}\r\n\t\t\t\t{this.renderOnlineList()}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tshowSettings() {\r\n\t\tthis.setState({\r\n\t\t\tisSettingsOpened: true,\r\n\t\t\tisOnlineListOpened: false\r\n\t\t});\r\n\t}\r\n\r\n\thideSettings() {\r\n\t\tthis.setState({\r\n\t\t\tisSettingsOpened: false,\r\n\t\t\tisOnlineListOpened: false\r\n\t\t});\r\n\t}\r\n\r\n\trenderButtons() {\r\n\t\tconst buttons = [];\r\n\r\n\t\tif (this.state.isSettingsOpened == true) {\r\n\t\t\tbuttons.push(<button key=\"1\" onClick={this.hideSettings} aria-expanded=\"true\">Settings</button>);\r\n\t\t} else {\r\n\t\t\tbuttons.push(<button key=\"2\" onClick={this.showSettings} aria-expanded=\"false\">Settings</button>);\r\n\t\t}\r\n\r\n\t\tif (this.state.isOnlineListOpened) {\r\n\t\t\tbuttons.push(<button key=\"3\" onClick={this.hideOnlineList} aria-expanded=\"true\">Online List</button>);\r\n\t\t} else {\r\n\t\t\tbuttons.push(<button key=\"5\" onClick={this.showOnlineList} aria-expanded=\"false\">Online List</button>);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"toolbar\">\r\n\t\t\t\t{buttons}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tshowOnlineList() {\r\n\t\tthis.setState({\r\n\t\t\tisOnlineListOpened: true,\r\n\t\t\tisSettingsOpened: false\r\n\t\t});\r\n\t}\r\n\r\n\thideOnlineList() {\r\n\t\tthis.setState({\r\n\t\t\tisOnlineListOpened: false,\r\n\t\t\tisSettingsOpened: false\r\n\t\t});\r\n\t}\r\n\r\n\trenderSettings() {\r\n\t\tif (this.state.isSettingsOpened) {\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\r\n\t\t\t\t\t<div className=\"settings-panel\">\r\n\t\t\t\t\t\t<SettingsPanel instance={this.props.instance}/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\trenderOnlineList() {\r\n\t\tif (this.state.isOnlineListOpened) {\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<OnlineList />\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = ToolBar;\r\n","import './ui.css';\r\n\r\nconst React = require('react');\r\nconst MudInput = require('./mudinput');\r\nconst MudOutput = require('./mudoutput');\r\nconst ToolBar = require('./toolbar');\r\n\r\nclass MainWindow extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"toolbar\">\r\n\t\t\t\t\t<ToolBar instance={this.props.instance}/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"output\">\r\n\t\t\t\t\t<MudOutput instance={this.props.instance}/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"input\">\r\n\t\t\t\t\t<MudInput\r\n\r\n\t\t\t\t\t\tinstance={this.props.instance}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nmodule.exports = MainWindow;\r\n","'use strict';\r\nconst Combokeys = require('combokeys');\r\nconst React = require('react');\r\nconst reactDom = require('react-dom');\r\nconst MainUI = require('../ui/main');\r\n\r\nclass Interface {\r\n\tconstructor(instance) {\r\n\t\tthis.instance = instance;\r\n\t\tthis.shortcuts = new Combokeys(window);\r\n\t\trequire('combokeys/plugins/global-bind')(this.shortcuts);\r\n\t\tthis.setupEvents();\r\n\t\tthis.setupKeys();\r\n\t\tthis.setupInterface();\r\n\t}\r\n\r\n\tsetupInterface() {\r\n\t\treactDom.render(<MainUI instance={this.instance}/>, document.getElementById('app'));\r\n\t}\r\n\r\n\tsetupKeys() {\r\n\t\tif (process.platform === 'win32') {\r\n\t\t\tthis.shortcuts.bindGlobal('alt+left', () => this.instance.historyInterface.previousChannel());\r\n\t\t\tthis.shortcuts.bindGlobal('alt+right', () => this.instance.historyInterface.nextChannel());\r\n\t\t\tthis.shortcuts.bindGlobal('alt+up', () => this.instance.historyInterface.previousMessage());\r\n\t\t\tthis.shortcuts.bindGlobal('alt+down', () => this.instance.historyInterface.nextMessage());\r\n\t\t} else {\r\n\t\t\tthis.shortcuts.bindGlobal('alt+meta+left', () => this.instance.historyInterface.previousChannel());\r\n\t\t\tthis.shortcuts.bindGlobal('alt+meta+right', () => this.instance.historyInterface.nextChannel());\r\n\t\t\tthis.shortcuts.bindGlobal('alt+meta+up', () => this.instance.historyInterface.previousMessage());\r\n\t\t\tthis.shortcuts.bindGlobal('alt+meta+down', () => this.instance.historyInterface.nextMessage());\r\n\t\t}\r\n\t\tthis.shortcuts.bindGlobal('ctrl', () => this.instance.tts.stopSpeech());\r\n\t\tthis.shortcuts.bindGlobal('f12', () => this.setSpeechEnabled(!this.instance.tts.enabled));\r\n\t}\r\n\r\n\tsetupEvents() {\r\n\r\n\t}\r\n\r\n\tsetSpeechEnabled(state) {\r\n\t\tthis.instance.tts.enabled = state;\r\n\t\tthis.instance.output.add('Speech ' + (state ? 'enabled' : 'disabled'));\r\n\t}\r\n}\r\n\r\nmodule.exports = Interface;\r\n","'use strict';\r\n\r\nclass InputHistory {\r\n\tconstructor() {\r\n\t\tthis.strings = [];\r\n\t\tthis.iterator = 0;\r\n\t}\r\n\r\n\tadd(string) {\r\n\t\tthis.strings.unshift(string);\r\n\t}\r\n\r\n\tgetLastEntered() {\r\n\t\treturn this.strings[0];\r\n\t}\r\n\r\n\tgetAtIndex(index) {\r\n\t\treturn this.strings[index];\r\n\t}\r\n\r\n\tgetAtIterator() {\r\n\t\treturn this.strings[iterator];\r\n\t}\r\n\r\n\tincreaseIterator() {\r\n\t\tthis.iterator++;\r\n\t\tif (this.iterator > this.strings.length) {\r\n\t\t\tthis.iterator = this.strings.length;\r\n\t\t}\r\n\t\treturn this.iterator;\r\n\t}\r\n\r\n\tdecreaseIterator() {\r\n\t\tthis.iterator--;\r\n\t\tif (this.iterator < 0) {\r\n\t\t\tthis.iterator = 0;\r\n\t\t}\r\n\t\treturn this.iterator;\r\n\t}\r\n}\r\n\r\nmodule.exports = InputHistory;\r\n","'use strict';\r\nconst CMOutput = require('./interface/cmoutput');\r\nconst Inserts = require('./inserts/inserts.json');\r\nconst InsertFactory = require('./factories/insertfactory');\r\nconst Appends = require('./appends/appends.json');\r\nconst AppendFactory = require('./factories/appendfactory');\r\nconst ChannelHistory = require('./history/channelhistory');\r\nconst ChannelInterface = require('./interface/channelinterface');\r\nconst SoundPlayer = require('./sounds/soundplayer');\r\nconst Programmer = require('./interface/programmer');\r\nconst TTSFactory = require('./factories/ttsfactory');\r\nconst Interface = require('./interface/interface');\r\nconst InputHistory = require('./history/inputhistory');\r\n\r\nclass ChatMud {\r\n\tconstructor(connection) {\r\n\t\tconsole.log('Constructing handler');\r\n\t\tthis.output = new CMOutput(this);\r\n\t\tthis.connection = connection;\r\n\t\tthis.inserts = new Array();\r\n\t\tthis.appends = new Array();\r\n\t\tthis.history = new ChannelHistory();\r\n\t\tthis.historyInterface = new ChannelInterface(this.history, this);\r\n\t\tthis.inputHistory = new InputHistory();\r\n\t\tthis.soundPlayer = new SoundPlayer();\r\n\t\tthis.tts = TTSFactory.getInstance();\r\n\r\n\t\t\r\n\t\tthis.interface = new Interface(this);\r\n\t\tthis.programmer = new Programmer(this);\r\n\t\tthis.info = {\r\n\t\t\tname: '',\r\n\t\t\tkey: ''\r\n\t\t};\r\n\r\n\t\tthis.setupEvents();\r\n\t\tthis.setupInserts();\r\n\t\tthis.setupAppends();\r\n\t}\r\n\r\n\tsetupEvents() {\r\n\t\tconsole.log('Setting events');\r\n\t\tthis.connection.on('data', data => this.handleData(data));\r\n\t}\r\n\r\n\tsetupInserts() {\r\n\t\tfor (const insertDef of Inserts) {\r\n\t\t\tconst insert = InsertFactory.getInsert(insertDef);\r\n\t\t\tconst instance = new insert();\r\n\t\t\tthis.inserts.push(instance);\r\n\t\t}\r\n\t}\r\n\r\n\tsetupAppends() {\r\n\t\tfor (const appendDef of Appends) {\r\n\t\t\tconst append = AppendFactory.getInstance(appendDef);\r\n\t\t\tconst instance = new append();\r\n\t\t\tthis.appends.push(instance);\r\n\t\t}\r\n\t}\r\n\r\n\thandleData(data) {\r\n\t\tconsole.log('Received data: ' + data);\r\n\t\tfor (const insert of this.inserts) {\r\n\t\t\tdata = insert.act(data, this);\r\n\t\t}\r\n\r\n\t\tthis.output.add(data);\r\n\r\n\t\tfor (const append of this.appends) {\r\n\t\t\tconsole.log('Appending');\r\n\t\t\tappend.act(data, this);\r\n\t\t}\r\n\t}\r\n\r\n\tsendInput() {\r\n\t\tconsole.log('Handle enter key');\r\n\r\n\t\tlet string = this.input.value;\r\n\t\tif (string == 'my_name') {\r\n\t\t\tthis.output.add('Your name is set to ' + this.info.name);\r\n\t\t}\r\n\t\tthis.output.add('Input history: ' + JSON.stringify(this.inputHistory.strings));\r\n\t\tif (string == '') {\r\n\t\t\tstring = this.inputHistory.getLastEntered();\r\n\t\t} else if (string != this.inputHistory.getLastEntered()) {\r\n\t\t\tthis.inputHistory.add(string);\r\n\t\t}\r\n\r\n\t\tthis.connection.send(string);\r\n\r\n\t\tthis.input.value = '';\r\n\t}\r\n}\r\n\r\nmodule.exports = ChatMud;\r\n","'use strict';\r\nconst net = require('net');\r\nconst EventEmitter = require('eventemitter3');\r\nconst TLS = require(\"tls\");\r\n\r\nclass TCPConnection extends EventEmitter {\r\n\tconstructor(address = 'chatmud.com', port = 7443) {\r\n\t\tconsole.log('Connecting to ' + address + ' on port ' + port);\r\n\t\tsuper();\r\n\t\tthis.address = address;\r\n\t\tthis.port = port;\r\n\t\tthis.client = new net.Socket();\r\n\t\tthis.tcp = this.client.connect(this.port, this.address);\r\n\t\tthis.options ={\r\n\t\tsocket: this.tcp,\r\n\t\t\r\n\t\t};\r\n\r\n\t\tthis.connection = TLS.connect(this.options, () => this.setupEvents());\r\n\t\tthis.data = null;\r\n\t}\r\n\r\n\tsetupEvents() {\r\n\t\tconsole.log('Setting up tcp events');\r\n\t\tthis.connection.on('data', data => this.handleData(data));\r\n\t}\r\n\r\n\thandleData(data) {\r\n\t\tconsole.log('TCP stream: ' + data);\r\n\r\n\t\tconst string = data.toString();\r\n\t\tthis.data += string;\r\n\t\tif (this.data.endsWith('\\n')) {\r\n\t\t\tthis.emitData(this.data);\r\n\t\t\tthis.data = '';\r\n\t\t}\r\n\t}\r\n\r\n\temitData(data) {\r\n\t\tconst arr = data.split('\\r\\n');\r\n\t\tfor (const i of arr) {\r\n\t\t\tthis.emit('data', i);\r\n\t\t}\r\n\t}\r\n\r\n\tsend(string) {\r\n\t\tconsole.log('Sending ' + string);\r\n\t\tthis.connection.write(string + '\\n');\r\n\t}\r\n}\r\n\r\nmodule.exports = TCPConnection;\r\n","'use strict';\r\nconst IO = require(\"socket.io-client\");\r\nconst EventEmitter = require(\"eventemitter3\");\r\n\r\nclass Websockets extends EventEmitter {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tconsole.log('constructing websockets');\r\n\t\tthis.io = new IO();\r\n\t\tthis.setupEvents();\r\n\t}\r\n\t\r\n\tsetupEvents() {\r\n\t\tthis.io.on(\"data\", data => this.handleData(data));\r\n\t}\r\n\t\r\n\thandleData(data) {\r\n\t\tthis.emit(\"data\", data);\r\n\t}\r\n\t\r\n\tsend(string) {\r\n\t\tthis.io.emit(\"data\", string + \"\\n\");\r\n\t}\r\n\t\r\n}\r\n\r\nmodule.exports = Websockets;","'use strict';\r\n\r\nclass NetworkFactory {\r\n    static getInstance() {\r\n        if (process.platform) {\r\n            const TLS = require('../connection/tls');\r\n            return TLS;\r\n        } else {\r\n            const Websockets = require('../connection/websockets');\r\n            return Websockets;\r\n        }\r\n    }\r\n\r\n}\r\n\r\nmodule.exports = NetworkFactory;","'use strict';\r\nconst ChatMud = require('./chatmud');\r\nconst NetworkFactory = require('./factories/networkfactory');\r\nconst SoundPlayer = require('./sounds/soundplayer');\r\n\r\nconsole.log('Starting connection...');\r\n\r\nconst connection = NetworkFactory.getInstance();\r\n\r\nconsole.log('Creating handler...');\r\nconst game = new ChatMud(new connection());"]}
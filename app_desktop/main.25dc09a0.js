process.env.HMR_PORT=0;process.env.HMR_HOSTNAME="localhost";parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"Qbp+":[function(require,module,exports) {
"use strict";const t=require("eventemitter3");class s extends t{constructor(t){super(),this.instance=t,this.maxLines=100}add(t){console.log("Outputting "+t),""!=t&&(this.instance.tts.speak(t),this.emit("MudOutput",t),this.instance.history.addMessage("MudOutput",t))}}module.exports=s;
},{}],"IrsF":[function(require,module,exports) {
module.exports=["mcp","triggers","programmerhelper"];
},{}],"4AMf":[function(require,module,exports) {
"use strict";class e{constructor(){this.interface=null}act(e,t){return this.instance=t,console.log(document.getElementById("speechToggle").value),this.instance.tts.speak(e),e}}module.exports=e;
},{}],"N8Ma":[function(require,module,exports) {
"use strict";class t{constructor(t){this.token=t,this.time=0}start(){this.time=performance.now()}stop(){this.time=performance.now(),this.time}}module.exports=t;
},{}],"h1cr":[function(require,module,exports) {
"use strict";const e=require("./pingutils");class n{constructor(){this.instance=null,this.key=0,this.name=0,this.pings=new Array}act(e,n){if(!(e=e.toString()).startsWith("#$#"))return e;if(this.instance=n,e.startsWith("#$#json"))try{e=e.slice(8,e.length);const n=JSON.parse(e);this.executeMCP(n.command,n,n.authentication_key)}catch(t){this.instance.output.add("Error parsing MCP: "+e)}else this.parse(e);return""}parse(e){console.log("Parsing "+e);let n=e.slice(3,e.length),t=(n=n.trim()).slice(0,n.indexOf(" "));t=t.trim(),console.log("Command: "+t);let a=null;(n=n.slice(t.length,n.length)).includes("-|-")&&(a=(a=n.slice(n.indexOf("-|-")+4,n.length)).trim(),n=n.slice(0,n.indexOf("-|-")));const s=n.split("|");for(let i=0;i<s.length;i++)s[i]=s[i].trim();"mcp"==t&&this.initMCP(),this.executeMCP(t,s,a)}initMCP(){this.instance.connection.send("#$#register_client Chatmud Official Client (Alpha)"),this.instance.connection.send("#$#client_supports authkeys"),this.instance.connection.send("#$#client_supports json"),this.instance.connection.send("#$#client_supports check_netlag")}executeMCP(e,n,t){switch(t&&this.checkKey(t),e){case"authentication_key":this.key=n[0],this.instance.info.key=n[0];break;case"my_name":this.name=n[0],this.instance.info.name=n[0];break;case"channel_message":this.handleChannelMessage(n);break;case"channel_social":this.handleChannelSocial(n);break;case"social":this.handleSocial(n);break;case"watched_player_connect":this.handlePlayerConnect(n);break;case"watched_player_reconnect":this.handlePlayerReconnect(n);break;case"watched_player_disconnect":this.handlePlayerDisconnect(n);break;case"teleport_out":this.handlePlayerTeleportOut(n);break;case"teleport_in":this.handlePlayerTeleportIn(n);break;case"tell_message":this.handleTell(n);break;case"edit":this.handleEdit(n);break;case"netlag":this.handleNetLag(n);break;default:this.handlePlay(e,n)}}handleChannelMessage(e){this.instance.history.addMessage(e.name,e.prefix+e.message),this.instance.output.add(e.prefix+" "+e.message),this.instance.soundPlayer.playChannel(e.name)}handleChannelSocial(e){console.log(JSON.stringify(e)),this.instance.history.addMessage(e.name,e.name+": "+e.message),this.instance.output.add(e.name+": "+e.message),this.instance.soundPlayer.playSocial(e.social,e.gender),this.instance.soundPlayer.playChannel(e.name)}handleSocial(e){this.instance.soundPlayer.playSocial(e.data[0],e.data[2])}handlePlay(e,n){n.data&&this.instance.soundPlayer.play(n.data[0],e)}handlePlayerConnect(e){this.instance.soundPlayer.play("enter"),this.instance.output.add(e.data[0]+" connected")}handlePlayerReconnect(e){this.instance.soundPlayer.play("reconnect"),this.instance.output.add(e[0]+" reconnected")}handlePlayerDisconnect(e){this.instance.soundPlayer.play("leave"),this.instance.output.add(e.data[0]+" disconnected")}handlePlayerTeleportOut(e){this.instance.soundPlayer.play("teleport%20out","misc")}handlePlayerTeleportIn(e){this.instance.soundPlayer.play("teleport%20in","misc")}handleTell(e){console.log("Parsed tell: "+e),this.instance.soundPlayer.play("tell"),this.instance.output.add(e.data[0]+" "+e.data[1]+" "+e.data[2])}handleEdit(e){console.log(JSON.stringify(e));const n=e[0].split(" ");this.instance.programmer.setObject(n[n.length-1]),this.instance.programmer.setEnableHelper(!0)}checkKey(e){console.log("Checking "+e+" agains "+this.key),e!=this.key&&(this.instance.soundPlayer.play("spoofer","misc"),this.instance.output.add("Spoof attempt!"))}handleNetLag(n){if("ping"==n.data[0]){const t=new e(n.data[1]);this.instance.connection.send("#$#netlag pong "+n.data[1]),t.start(),this.pings.push(t)}if("pang"==n.data[0]){this.findPingByToken(n.data[1]).stop()}}findPingByToken(e){for(const n of this.pings)if(n.token==e)return n}}module.exports=n;
},{"./pingutils":"N8Ma"}],"A5U3":[function(require,module,exports) {
"use strict";class e{constructor(){this.instance=null}act(e,t){return this.instance=t,this.executeTriggers(e),e}executeTriggers(e){let t=e.match("^Turning (off|on) channel ([a-zA-Z0-9]*)?.");t&&this.instance.soundPlayer.play(t[1]),(t=e.match("^I don't understand that.$"))&&this.instance.soundPlayer.play("huh","misc"),(t=e.match("^(>> Command Aborted <<|Invalid selection.)$"))&&this.instance.soundPlayer.play("cancel"),(t=e.match("(\\[(Type a line of input or `@abort' to abort the command|Type lines of input; use `\\.' to end or `@abort' to abort the command)\\.\\]|\\[Enter `yes' or `no'\\])"))&&this.instance.soundPlayer.play("prompt"),(t=e.match("You click your heels three times."))&&this.instance.soundPlayer.play("home","misc"),(t=e.match("[Connections] A new high player count has been reached! * players are connected."))&&this.instance.soundPlayer.play("high%connections","misc"),(t=e.match("[Creation] * has just connected for the first time! Please make them feel welcome."))&&this.instance.soundPlayer.play("creation"),(t=e.match("(.*) says,(.*)"))&&this.instance.soundPlayer.play("say"),(t=e.match("^You say,*?"))&&this.instance.soundPlayer.play("say")}}module.exports=e;
},{}],"owcG":[function(require,module,exports) {
"use strict";class e{constructor(){this.code="",this.receiving=!1,this.instance=null}act(e,i){return 1==i.programmer.enabled?(0==this.receiving&&(this.receiving=!0,this.code=""),this.instance=i,console.log("Checking: "+e),"."==e&&(this.instance.programmer.setCode(this.code),this.instance.programmer.open(),this.instance.programmer.setEnableHelper(!1),this.receiving=!1),this.code+=e+"\n",""):e}}module.exports=e;
},{}],"lPp8":[function(require,module,exports) {
"use strict";class n{constructor(){this.instance=null,Notification.requestPermission().then(n=>console.log("Notification result: "+n))}act(n,t){return n=n.toString(),this.instance=t,""!=this.instance.info.name&&n.includes(this.instance.info.name)&&(console.log("Sending notification"),new Notification("ChatMud",{body:"You've been mentioned! "+n})),n}}module.exports=n;
},{}],"x21l":[function(require,module,exports) {
"use strict";const r={webtts:require("../inserts/webtts"),mcp:require("../inserts/mcp"),triggers:require("../inserts/triggers"),programmerhelper:require("../inserts/programmerhelper"),notifier:require("../inserts/notifier")};class e{static getInsert(e){return r[e]}}module.exports=e;
},{"../inserts/webtts":"4AMf","../inserts/mcp":"h1cr","../inserts/triggers":"A5U3","../inserts/programmerhelper":"owcG","../inserts/notifier":"lPp8"}],"kCIE":[function(require,module,exports) {
module.exports=[];
},{}],"EnoW":[function(require,module,exports) {
"use strict";const t={};class s{static getInstance(s){return t[s]}}module.exports=s;
},{}],"0wDT":[function(require,module,exports) {
"use strict";class e{constructor(){this.channels=new Array}addMessage(e,n){console.log("Adding to "+e+", "+n);let a=this.getChannelByName(e);-1==a&&(a=new s(e),this.channels.push(a),console.log("Created new channel")),a.addMessage(n)}getChannelByName(e){console.log("Getting channel by name "+e);for(const s of this.channels)if(s.name==e)return s;return-1}getMessageForChannel(e,s){return console.log("Getting message "+s+" for channel "+e),this.getChannelByName(e).messages[s]}}class s{constructor(e){this.name=e,this.messages=new Array}addMessage(e){console.log("In-channel message add: "+e),this.messages.unshift(e)}}module.exports=e;
},{}],"ZayM":[function(require,module,exports) {
"use strict";const e=require("../history/channelhistory");class s{constructor(e,s){this.instance=s,this.currentChannel=0,this.currentMessage=0,this.history=e}nextChannel(){console.log("Next channel"),this.currentChannel<this.history.channels.length-1?this.currentChannel++:this.currentChannel=this.history.channels.length-1,this.instance.tts.speakImmediate(this.history.channels[this.currentChannel].name)}previousChannel(){console.log("Previous channel"),this.currentChannel>0?this.currentChannel--:this.currentChannel=0,this.instance.tts.speakImmediate(this.history.channels[this.currentChannel].name)}nextMessage(){console.log("Next message"),this.currentMessage>0?this.currentMessage--:this.currentMessage=0,this.readMessage(this.currentMessage)}previousMessage(){console.log("Previous message"),this.currentMessage<this.history.channels[this.currentChannel].messages.length-1?this.currentMessage++:this.currentMessage=this.history.channels[this.currentChannel].messages.length-1,this.readMessage(this.currentMessage)}readMessage(e){console.log("Reading "+this.history.channels[this.currentChannel].messages[e]),this.instance.tts.speakImmediate(this.history.channels[this.currentChannel].messages[e])}}module.exports=s;
},{"../history/channelhistory":"0wDT"}],"KCGG":[function(require,module,exports) {
module.exports=[{type:"file",name:".DS_Store"},{type:"file",name:"cancel.ogg"},{type:"file",name:"dominion ship tell.ogg"},{type:"file",name:"enter.ogg"},{type:"file",name:"event.ogg"},{type:"file",name:"leave linkdead.ogg"},{type:"file",name:"leave.ogg"},{type:"file",name:"off.ogg"},{type:"file",name:"on.ogg"},{type:"file",name:"prompt.ogg"},{type:"file",name:"reconnected.ogg"},{type:"file",name:"reply.ogg"},{type:"file",name:"say.ogg"},{type:"file",name:"tell.ogg"},{type:"file",name:"whisper.ogg"},{name:"admin",type:"folder",children:[{type:"file",name:"administrators.ogg"},{type:"file",name:"wizchange.ogg"}]},{name:"casino",type:"folder",children:[{type:"file",name:"slot_bet.ogg"},{type:"file",name:"slot_lose.ogg"},{type:"file",name:"slot_win.ogg"}]},{name:"channels",type:"folder",children:[{type:"file",name:"announce.ogg"},{type:"file",name:"botgames.ogg"},{type:"file",name:"chat.ogg"},{type:"file",name:"cp.ogg"},{type:"file",name:"crazyparty.ogg"},{type:"file",name:"creation.ogg"},{type:"file",name:"dev.ogg"},{type:"file",name:"devlog.ogg"},{type:"file",name:"games.ogg"},{type:"file",name:"global.ogg"},{type:"file",name:"haw.ogg"},{type:"file",name:"im.ogg"},{type:"file",name:"kittycat.ogg"},{type:"file",name:"moderators.ogg"},{type:"file",name:"music.ogg"},{type:"file",name:"newbie.ogg"},{type:"file",name:"news.ogg"},{type:"file",name:"notify.ogg"},{type:"file",name:"program.ogg"},{type:"file",name:"slej.ogg"},{type:"file",name:"shout.ogg"},{type:"file",name:"teamtalk.ogg"},{type:"file",name:"wily.ogg"},{type:"file",name:"wizards.ogg"}]},{name:"dragon",type:"folder",children:[{type:"file",name:"eat.ogg"},{type:"file",name:"flame.ogg"}]},{name:"games",type:"folder",children:[{type:"file",name:"anagrams_end.ogg"},{type:"file",name:"anagrams_invalid.ogg"},{type:"file",name:"anagrams_start.ogg"},{type:"file",name:"anagrams_valid.ogg"}]},{name:"meow_button",type:"folder",children:[{type:"file",name:"meow.ogg"},{type:"file",name:"press.ogg"},{type:"file",name:"roll.ogg"}]},{name:"guns",type:"folder",children:[{type:"file",name:"emptygun.ogg"},{type:"file",name:"gun_drop.ogg"},{type:"file",name:"gun_fired.ogg"},{type:"file",name:"gun_load.ogg"},{type:"file",name:"gun_silenced_fired.ogg"},{type:"file",name:"gun_unload.ogg"},{type:"file",name:"target_hit.ogg"},{type:"file",name:"target_miss.ogg"},{type:"file",name:"target_miss2.ogg"},{type:"file",name:"target_miss3.ogg"},{type:"file",name:"unwield_gun.ogg"},{type:"file",name:"wield_gun.ogg"}]},{name:"misc",type:"folder",children:[{type:"file",name:"change.ogg"},{type:"file",name:"high connections.ogg"},{type:"file",name:"huh.ogg"},{type:"file",name:"home.ogg"},{type:"file",name:"spoofer.ogg"},{type:"file",name:"teleport in.ogg"},{type:"file",name:"teleport out.ogg"}]},{name:"pocketbubble",type:"folder",children:[{type:"file",name:"bounce.ogg"},{type:"file",name:"create.ogg"},{type:"file",name:"pop.ogg"}]},{name:"tv",type:"folder",children:[{type:"file",name:"insult_off.ogg"},{type:"file",name:"shot_off.ogg"},{type:"file",name:"violent_social_off.ogg"}]},{name:"socials",type:"folder",children:[{type:"file",name:"Kiss.ogg"},{type:"file",name:"Poke.ogg"},{type:"file",name:"agree_female_101.ogg"},{type:"file",name:"agree_male_101.ogg"},{type:"file",name:"apologize_female_101.ogg"},{type:"file",name:"bark.ogg"},{type:"file",name:"bored_female_101.ogg"},{type:"file",name:"bored_male_101.ogg"},{type:"file",name:"brb_101.ogg"},{type:"file",name:"burp.ogg"},{type:"file",name:"burp2.ogg"},{type:"file",name:"cackle_female.ogg"},{type:"file",name:"cackle_male.ogg"},{type:"file",name:"cheer_female_101.ogg"},{type:"file",name:"chuckle female101.ogg"},{type:"file",name:"chuckle female102.ogg"},{type:"file",name:"chuckle_female.ogg"},{type:"file",name:"chuckle_male_1.ogg"},{type:"file",name:"chuckle_male_2.ogg"},{type:"file",name:"clap.ogg"},{type:"file",name:"coffee.ogg"},{type:"file",name:"coke.ogg"},{type:"file",name:"comfort_female_101.ogg"},{type:"file",name:"comfort_male_101.ogg"},{type:"file",name:"confused_female_101.ogg"},{type:"file",name:"cough male.ogg"},{type:"file",name:"cough_female.ogg"},{type:"file",name:"cry_female.ogg"},{type:"file",name:"cry_male.ogg"},{type:"file",name:"fart_female.ogg"},{type:"file",name:"fart_male.ogg"},{type:"file",name:"flirt_female_101.ogg"},{type:"file",name:"gasp_female.ogg"},{type:"file",name:"gasp_male.ogg"},{type:"file",name:"giggle_female.ogg"},{type:"file",name:"giggle_male.ogg"},{type:"file",name:"growl female101.ogg"},{type:"file",name:"growl female102.ogg"},{type:"file",name:"growl_female.ogg"},{type:"file",name:"growl_male.ogg"},{type:"file",name:"hiss.ogg"},{type:"file",name:"hmm female102.ogg"},{type:"file",name:"hmm female103.ogg"},{type:"file",name:"hmm_female_101.ogg"},{type:"file",name:"hmm_male.ogg"},{type:"file",name:"kick room.ogg"},{type:"file",name:"kick.ogg"},{type:"file",name:"kick10.ogg"},{type:"file",name:"kick11.ogg"},{type:"file",name:"kick12.ogg"},{type:"file",name:"kick13.ogg"},{type:"file",name:"kick14.ogg"},{type:"file",name:"kick15.ogg"},{type:"file",name:"kick16.ogg"},{type:"file",name:"kick17.ogg"},{type:"file",name:"kick18.ogg"},{type:"file",name:"kick19.ogg"},{type:"file",name:"kick2.ogg"},{type:"file",name:"kick20.ogg"},{type:"file",name:"kick3.ogg"},{type:"file",name:"kick4.ogg"},{type:"file",name:"kick5.ogg"},{type:"file",name:"kick6.ogg"},{type:"file",name:"kick7.ogg"},{type:"file",name:"kick8.ogg"},{type:"file",name:"kick9.ogg"},{type:"file",name:"laugh_female.ogg"},{type:"file",name:"lol_female_101.ogg"},{type:"file",name:"lol_male.ogg"},{type:"file",name:"meow.ogg"},{type:"file",name:"meow2.ogg"},{type:"file",name:"meow3.ogg"},{type:"file",name:"nudge.ogg"},{type:"file",name:"oic female102.ogg"},{type:"file",name:"oic female103.ogg"},{type:"file",name:"oic_female_101.ogg"},{type:"file",name:"oic_male_101.ogg"},{type:"file",name:"okshut_101.ogg"},{type:"file",name:"okshut_102.ogg"},{type:"file",name:"paddle.ogg"},{type:"file",name:"punch room.ogg"},{type:"file",name:"punch.ogg"},{type:"file",name:"punch10.ogg"},{type:"file",name:"punch11.ogg"},{type:"file",name:"punch12.ogg"},{type:"file",name:"punch13.ogg"},{type:"file",name:"punch14.ogg"},{type:"file",name:"punch15.ogg"},{type:"file",name:"punch16.ogg"},{type:"file",name:"punch17.ogg"},{type:"file",name:"punch18.ogg"},{type:"file",name:"punch19.ogg"},{type:"file",name:"punch2.ogg"},{type:"file",name:"punch20.ogg"},{type:"file",name:"punch3.ogg"},{type:"file",name:"punch4.ogg"},{type:"file",name:"punch5.ogg"},{type:"file",name:"punch6.ogg"},{type:"file",name:"punch7.ogg"},{type:"file",name:"punch8.ogg"},{type:"file",name:"punch9.ogg"},{type:"file",name:"purr.ogg"},{type:"file",name:"rofl_female.ogg"},{type:"file",name:"rofl_male.ogg"},{type:"file",name:"scream_female.ogg"},{type:"file",name:"scream_male.ogg"},{type:"file",name:"shove.ogg"},{type:"file",name:"shut_101.ogg"},{type:"file",name:"shutbuddy_101.ogg"},{type:"file",name:"sigh_female.ogg"},{type:"file",name:"sigh_male.ogg"},{type:"file",name:"sit.ogg"},{type:"file",name:"slap room.ogg"},{type:"file",name:"slap.ogg"},{type:"file",name:"slap2.ogg"},{type:"file",name:"slap3.ogg"},{type:"file",name:"slap4.ogg"},{type:"file",name:"slap5.ogg"},{type:"file",name:"snarl_101.ogg"},{type:"file",name:"snicker_female_101.ogg"},{type:"file",name:"snicker_male.ogg"},{type:"file",name:"sniff_female.ogg"},{type:"file",name:"sniff_male.ogg"},{type:"file",name:"snore.ogg"},{type:"file",name:"snort.ogg"},{type:"file",name:"squeak.ogg"},{type:"file",name:"stand.ogg"},{type:"file",name:"tackle.ogg"},{type:"file",name:"thank_female_101.ogg"},{type:"file",name:"vomit.ogg"},{type:"file",name:"yawn_female_101.ogg"},{type:"file",name:"yawn_female.ogg"},{type:"file",name:"yawn_male.ogg"}]},{name:"clocks",type:"folder",children:[{name:"bigben",type:"folder",children:[{type:"file",name:"00.ogg"},{type:"file",name:"15.ogg"},{type:"file",name:"30.ogg"},{type:"file",name:"45.ogg"},{type:"file",name:"chime.ogg"}]},{name:"grandfather",type:"folder",children:[{type:"file",name:"chime.ogg"}]}]}];
},{}],"KlPK":[function(require,module,exports) {
const n=require("./sounds");function o(o){const t=o.split("/");let r=n;for(const n of t)r=e(n,r);return r}function e(n,o){for(const e of o)if(e.name==n)return e.children}function t(n,o){const e=[];for(const t of o)t.name.includes(n)&&e.push(t.name);return e}module.exports.findSoundsInFolder=o,module.exports.findFilenames=t;
},{"./sounds":"KCGG"}],"KITK":[function(require,module,exports) {
const{Howl:s,Howler:n}=require("howler"),e=require("random-int"),o=require("./soundops"),t=require("./sounds");class i{constructor(s=".ogg"){this.sounds=new Array,this.extension=s}play(s,n=""){let e=this.searchSounds(s,n);-1==e&&(e=this.loadSound(s,n)),e.sound.play()}playChannel(s){const n=o.findSoundsInFolder("channels");s=0==o.findFilenames(s,n).length?"global":s,this.play(s,"channels")}playSocial(s,n){const t=o.findSoundsInFolder("socials");let i=o.findFilenames(s+"_"+n,t);0==i.length&&(i=o.findFilenames(s,t));let l=null;i.length>0&&(l=(l=i[e(0,i.length-1)].toString()).slice(0,l.length-4)),l&&this.play(l,"socials")}searchSounds(s,n){for(const e of this.sounds)if(e.file==s&&e.folder==n)return e;return-1}loadSound(s,n){const e=new l(n,s);return this.sounds.push(e),e}}class l{constructor(n,e,o=".ogg"){this.basePath="./sounds/",this.file=e,this.folder=n,this.extension=o,this.path=this.basePath+this.folder+"/"+this.file+this.extension,console.log("Loading "+this.path),this.sound=new s({src:this.path})}}module.exports=i;
},{"./soundops":"KlPK","./sounds":"KCGG"}],"EpYR":[function(require,module,exports) {
"use strict";class e{constructor(e){this.instance=e,this.code="",this.object="",this.enabled=!1,this.window=null,this.lines=new Array,this.currentLine=0,this.boundMethod=null}setEnableHelper(e){this.enabled=e}setCode(e){this.code=e,console.log("Code: "+this.code)}open(){this.window=window.open("editor.html"),setTimeout(()=>{this.window.postMessage(this.code)},1e3),this.boundMethod=this.handleMessage.bind(this),window.addEventListener("message",this.boundMethod)}handleMessage(e){const t=e.data;this.sendCode(t),window.removeEventListener("message",this.boundMethod)}sendCode(e){const t=e.split("\n");this.lines=t,this.instance.connection.send("@program "+this.object);for(const s of t)this.instance.connection.send(s);this.instance.connection.send("."),this.code="",this.enabled=!1}setObject(e){console.log("Object set to "+this.object),this.object=e}}module.exports=e;
},{}],"Rc1z":[function(require,module,exports) {
"use strict";class e{constructor(){this.enabled=!0,this.speaking=!1,this.speakQueue=new Array,this.voice="alex",this.rate=3}stopSpeech(){document.getElementById("tts").innerHTML=""}speakImmediate(e){document.getElementById("tts").innerHTML="",this.speak(e)}speak(e){if(!this.enabled)return;e=(e=e.replace("["," ")).replace("]"," "),console.log("saying "+e);let t=document.getElementById("tts"),n=document.createTextNode(e+"\n");t.appendChild(document.createElement("br")),t.appendChild(n)}}module.exports=e;
},{}],"6RYZ":[function(require,module,exports) {
"use strict";const e=require("say");class s{constructor(){this.enabled=!0,this.speaking=!1,this.speakQueue=new Array,this.voice="alex",this.rate=3}stopSpeech(){1==this.speaking&&(this.speaking=!1,this.speakQueue=[],e.stop())}speakImmediate(e){1==this.speaking&&this.stopSpeech(),this.speak(e)}speak(e){this.enabled&&(e=(e=e.replace("["," ")).replace("]"," "),console.log("saying "+e),this.speakQueue.push(e),0==this.speaking&&(this.handleQueue(),this.speaking=!0))}handleQueue(){if(this.speakQueue.length>0){const s=this.speakQueue.shift();e.speak(s,this.voice,this.rate,e=>this.handleQueue())}else this.speaking=!1}}module.exports=s;
},{}],"LfVA":[function(require,module,exports) {
"use strict";const t=require("../tts/ariatts"),e=require("../tts/mactts");class s{static getInstance(){switch(process.platform){case"darwin":return new e;default:return new t}}}module.exports=s;
},{"../tts/ariatts":"Rc1z","../tts/mactts":"6RYZ"}],"Hhav":[function(require,module,exports) {

},{}],"CEa6":[function(require,module,exports) {
"use strict";require("./ui.css");const t=require("react");class e extends t.Component{constructor(e){super(e),this.state={inputValue:""},this.handleChange=this.handleChange.bind(this),this.handleKey=this.handleKey.bind(this),this.inputRef=t.createRef()}render(){return t.createElement("div",{className:"input"},t.createElement("h2",null,"Input"),t.createElement("input",{ref:this.inputRef,type:"text","aria-label":"Mud Input",value:this.state.inputValue,onChange:this.handleChange,onKeyPress:this.handleKey}))}componentDidMount(){this.inputRef.current.focus()}handleKey(t){if("Enter"==t.key){let t=this.state.inputValue;""==t?t=this.props.instance.inputHistory.getLastEntered():t!=this.props.instance.inputHistory.getLastEntered()&&this.props.instance.inputHistory.add(t),this.props.instance.connection.send(t),this.props.instance.tts.stopSpeech(),this.setState({inputValue:""})}}handleChange(t){this.setState({inputValue:t.target.value})}}module.exports=e;
},{"./ui.css":"Hhav"}],"i/z1":[function(require,module,exports) {
module.exports={maxLines:500};
},{}],"8l8m":[function(require,module,exports) {
const t=require("react"),e=require("url-to-title");class r extends t.Component{constructor(t){super(t),this.state={text:this.props.url},e(this.props.url,(t,e)=>{t||this.setState({text:e})})}render(){return t.createElement("a",{href:this.props.url,onClick:this.props.onClick},this.state.text)}}module.exports=r;
},{}],"uJdq":[function(require,module,exports) {
const e=require("react"),t=require("opn"),r=require("react-youtube-player").default,n=require("./resolvinglink");class i extends e.Component{constructor(e){super(e),this.re=/((?:http|ftp|https):\/\/(?:[\w_-]+(?:(?:\.[\w_-]+)+))(?:[\w.,@?\^=%:\/~+#-]*[\w@?\^=%\/~+#-])?)/gi}itemize(t){const r=t.split(this.re);return 1==r.length?e.createElement("div",null,r[0]):r.map((e,t)=>{return this.re.test(e)?this.parseLink(e):e})}openLink(e,r){e.preventDefault(),t(r)}parseLink(t){return-1!=t.indexOf("youtube.com/watch")?this.parseYoutubeLink(t):e.createElement(n,{url:t,onClick:e=>this.openLink(e,t)})}parseYoutubeLink(t){let n=t.split("v=")[1];const i=n.indexOf("&");return-1!=i&&(n=n.substring(0,i)),e.createElement(r,{videoId:n})}render(){return e.createElement("div",null,this.itemize(this.props.text))}}module.exports=i;
},{"./resolvinglink":"8l8m"}],"dUWC":[function(require,module,exports) {
const t=require("react"),e=require("../settings.json"),s=require("./outputitem");class i extends t.Component{constructor(t){super(t),this.state={lines:[]},this.addLine=this.addLine.bind(this),this.props.instance.output.on("MudOutput",t=>this.addLine(t))}render(){return t.createElement("div",{className:"output"},this.state.lines.map((e,i)=>t.createElement(s,{text:e})))}addLine(t){if(console.log("Adding line: "+t),t){const e=this.state.lines;e.push(t),this.setState({lines:e})}}}module.exports=i;
},{"../settings.json":"i/z1","./outputitem":"uJdq"}],"Z0eu":[function(require,module,exports) {
"use strict";var e=require("react-accessible-accordion");const{Howler:t}=require("howler"),l=require("react");class n extends l.Component{constructor(e){super(e),this.state={volume:100*t.volume(),speech:this.props.instance.tts.enabled,resolveLinks:!0,embedYoutube:!0,sounds:!0},this.handleVolumeChange=this.handleVolumeChange.bind(this),this.handleSpeechStateChange=this.handleSpeechStateChange.bind(this)}render(){return l.createElement(e.Accordion,null,l.createElement(e.AccordionItem,null,l.createElement(e.AccordionItemTitle,null,l.createElement("h2",null,"Audio")),l.createElement(e.AccordionItemBody,null,l.createElement("div",null,l.createElement("label",{htmlFor:"volume-slider"},"Sound volume"),l.createElement("input",{type:"range",id:"volume-slider",value:this.state.volume,onChange:this.handleVolumeChange})))),l.createElement(e.AccordionItem,null,l.createElement(e.AccordionItemTitle,null,l.createElement("h2",null,"Speech")),l.createElement(e.AccordionItemBody,null,l.createElement("label",{htmlFor:"speech-checkbox"},"Speech enabled"),l.createElement("input",{type:"checkbox",id:"speech-checkbox",onChange:this.handleSpeechStateChange,checked:Boolean(this.state.speech)}))))}handleVolumeChange(e){const l=e.target.value;console.log("Target volume at "+l/100),t.volume(l/100),this.setState({volume:l})}handleSpeechStateChange(e){console.log("Target value is at "+e.target.checked),this.props.instance.interface.setSpeechEnabled(e.target.checked),this.setState({speech:e.target.checked})}}module.exports=n;
},{}],"sgII":[function(require,module,exports) {
"use strict";require("./ui.css");var e=require("react-accessible-accordion");const t=require("react");class s extends t.Component{constructor(e){super(e),this.state={people:{active:[],idlers:[],bots:[]}},this.people={active:[],bots:[],idlers:[]},this.createGroup=this.createGroup.bind(this),this.response=null}componentWillMount(){this.getOnlineList()}getOnlineList(){fetch("http://chatmud.com/api/who").then(e=>e.json()).then(e=>this.parseData(e))}parseData(e){for(const t in e.list)if(console.log("Parsing item: "+JSON.stringify(e.list[t])),e.list[t].flags&&e.list[t].flags.includes("bot")){const s={name:t,title:e.list[t].title};this.people.bots.push(s)}else if(e.list[t].flags.includes("idle")){const s={name:t,title:e.list[t].title};this.people.idlers.push(s)}else{const s={name:t,title:e.list[t].title};this.people.active.push(s)}this.setState({people:this.people})}createGroup(s,l){return t.createElement("div",null,t.createElement(e.AccordionItem,null,t.createElement(e.AccordionItemTitle,null,s),t.createElement(e.AccordionItemBody,null,t.createElement("ul",null,l.map((e,s)=>(console.log("Mapping "+e.name),t.createElement("li",null,e.name," - ",e.title)))))))}render(){return t.createElement("div",{class:"settings-panel"},t.createElement("h1",null,"Who's online"),t.createElement(e.Accordion,null,this.createGroup("Active",this.state.people.active),this.createGroup("Bots",this.state.people.bots),this.createGroup("Idlers",this.state.people.idlers)))}}module.exports=s;
},{"./ui.css":"Hhav"}],"Ulie":[function(require,module,exports) {
"use strict";require("./ui.css");const e=require("react"),t=require("./settingspanel"),i=require("./onlinelist");class n extends e.Component{constructor(e){super(e),this.state={isSettingsOpened:!1,isOnlineListOpened:!1},this.showSettings=this.showSettings.bind(this),this.hideSettings=this.hideSettings.bind(this),this.showOnlineList=this.showOnlineList.bind(this),this.hideOnlineList=this.hideOnlineList.bind(this)}render(){return e.createElement("div",null,this.renderButtons(),this.renderSettings(),this.renderOnlineList())}showSettings(){this.setState({isSettingsOpened:!0,isOnlineListOpened:!1})}hideSettings(){this.setState({isSettingsOpened:!1,isOnlineListOpened:!1})}renderButtons(){const t=[];return 1==this.state.isSettingsOpened?t.push(e.createElement("button",{key:"1",onClick:this.hideSettings,"aria-expanded":"true"},"Settings")):t.push(e.createElement("button",{key:"2",onClick:this.showSettings,"aria-expanded":"false"},"Settings")),this.state.isOnlineListOpened?t.push(e.createElement("button",{key:"3",onClick:this.hideOnlineList,"aria-expanded":"true"},"Online List")):t.push(e.createElement("button",{key:"5",onClick:this.showOnlineList,"aria-expanded":"false"},"Online List")),e.createElement("div",{className:"toolbar"},t)}showOnlineList(){this.setState({isOnlineListOpened:!0,isSettingsOpened:!1})}hideOnlineList(){this.setState({isOnlineListOpened:!1,isSettingsOpened:!1})}renderSettings(){if(this.state.isSettingsOpened)return e.createElement("div",null,e.createElement("div",{className:"settings-panel"},e.createElement(t,{instance:this.props.instance})))}renderOnlineList(){if(this.state.isOnlineListOpened)return e.createElement("div",null,e.createElement("div",null,e.createElement(i,null)))}}module.exports=n;
},{"./ui.css":"Hhav","./settingspanel":"Z0eu","./onlinelist":"sgII"}],"jtYh":[function(require,module,exports) {
"use strict";require("./ui.css");const e=require("react"),t=require("./mudinput"),r=require("./mudoutput"),n=require("./toolbar");class s extends e.Component{constructor(e){super(e)}render(){return e.createElement("div",null,e.createElement("div",{className:"toolbar"},e.createElement(n,{instance:this.props.instance})),e.createElement("div",{className:"output"},e.createElement(r,{instance:this.props.instance})),e.createElement("div",{className:"input"},e.createElement(t,{instance:this.props.instance})))}}module.exports=s;
},{"./ui.css":"Hhav","./mudinput":"CEa6","./mudoutput":"dUWC","./toolbar":"Ulie"}],"gLiW":[function(require,module,exports) {
"use strict";const t=require("combokeys"),e=require("react"),s=require("react-dom"),n=require("../ui/main");class i{constructor(e){this.instance=e,this.shortcuts=new t(window),require("combokeys/plugins/global-bind")(this.shortcuts),this.setupEvents(),this.setupKeys(),this.setupInterface()}setupInterface(){s.render(e.createElement(n,{instance:this.instance}),document.getElementById("app"))}setupKeys(){"win32"===process.platform?(this.shortcuts.bindGlobal("alt+left",()=>this.instance.historyInterface.previousChannel()),this.shortcuts.bindGlobal("alt+right",()=>this.instance.historyInterface.nextChannel()),this.shortcuts.bindGlobal("alt+up",()=>this.instance.historyInterface.previousMessage()),this.shortcuts.bindGlobal("alt+down",()=>this.instance.historyInterface.nextMessage())):(this.shortcuts.bindGlobal("alt+meta+left",()=>this.instance.historyInterface.previousChannel()),this.shortcuts.bindGlobal("alt+meta+right",()=>this.instance.historyInterface.nextChannel()),this.shortcuts.bindGlobal("alt+meta+up",()=>this.instance.historyInterface.previousMessage()),this.shortcuts.bindGlobal("alt+meta+down",()=>this.instance.historyInterface.nextMessage())),this.shortcuts.bindGlobal("ctrl",()=>this.instance.tts.stopSpeech()),this.shortcuts.bindGlobal("f12",()=>this.setSpeechEnabled(!this.instance.tts.enabled))}setupEvents(){}setSpeechEnabled(t){this.instance.tts.enabled=t,this.instance.output.add("Speech "+(t?"enabled":"disabled"))}}module.exports=i;
},{"../ui/main":"jtYh"}],"rhEh":[function(require,module,exports) {
"use strict";class t{constructor(){this.strings=[],this.iterator=0}add(t){this.strings.unshift(t)}getLastEntered(){return this.strings[0]}getAtIndex(t){return this.strings[t]}getAtIterator(){return this.strings[iterator]}increaseIterator(){return this.iterator++,this.iterator>this.strings.length&&(this.iterator=this.strings.length),this.iterator}decreaseIterator(){return this.iterator--,this.iterator<0&&(this.iterator=0),this.iterator}}module.exports=t;
},{}],"FNh7":[function(require,module,exports) {
"use strict";const t=require("./interface/cmoutput"),e=require("./inserts/inserts.json"),s=require("./factories/insertfactory"),n=require("./appends/appends.json"),i=require("./factories/appendfactory"),r=require("./history/channelhistory"),o=require("./interface/channelinterface"),a=require("./sounds/soundplayer"),h=require("./interface/programmer"),u=require("./factories/ttsfactory"),c=require("./interface/interface"),p=require("./history/inputhistory");class d{constructor(e){console.log("Constructing handler"),this.output=new t(this),this.connection=e,this.inserts=new Array,this.appends=new Array,this.history=new r,this.historyInterface=new o(this.history,this),this.inputHistory=new p,this.soundPlayer=new a,this.tts=u.getInstance(),this.interface=new c(this),this.programmer=new h(this),this.info={name:"",key:""},this.setupEvents(),this.setupInserts(),this.setupAppends()}setupEvents(){console.log("Setting events"),this.connection.on("data",t=>this.handleData(t))}setupInserts(){for(const t of e){const e=new(s.getInsert(t));this.inserts.push(e)}}setupAppends(){for(const t of n){const e=new(i.getInstance(t));this.appends.push(e)}}handleData(t){console.log("Received data: "+t);for(const e of this.inserts)t=e.act(t,this);this.output.add(t);for(const e of this.appends)console.log("Appending"),e.act(t,this)}sendInput(){console.log("Handle enter key");let t=this.input.value;"my_name"==t&&this.output.add("Your name is set to "+this.info.name),this.output.add("Input history: "+JSON.stringify(this.inputHistory.strings)),""==t?t=this.inputHistory.getLastEntered():t!=this.inputHistory.getLastEntered()&&this.inputHistory.add(t),this.connection.send(t),this.input.value=""}}module.exports=d;
},{"./interface/cmoutput":"Qbp+","./inserts/inserts.json":"IrsF","./factories/insertfactory":"x21l","./appends/appends.json":"kCIE","./factories/appendfactory":"EnoW","./history/channelhistory":"0wDT","./interface/channelinterface":"ZayM","./sounds/soundplayer":"KITK","./interface/programmer":"EpYR","./factories/ttsfactory":"LfVA","./interface/interface":"gLiW","./history/inputhistory":"rhEh"}],"y+gA":[function(require,module,exports) {
"use strict";const t=require("socket.io-client"),e=require("eventemitter3");class s extends e{constructor(){super(),this.io=new t,this.setupEvents()}setupEvents(){this.io.on("data",t=>this.handleData(t))}handleData(t){this.emit("data",t)}send(t){this.io.emit("data",t+"\n")}}module.exports=s;
},{}],"vBmE":[function(require,module,exports) {
"use strict";const t=require("net"),s=require("eventemitter3"),e=require("tls");class n extends s{constructor(s="chatmud.com",n=7443){console.log("Connecting to "+s+" on port "+n),super(),this.address=s,this.port=n,this.client=new t.Socket,this.tcp=this.client.connect(this.port,this.address),this.options={socket:this.tcp},this.connection=e.connect(this.options,()=>this.setupEvents()),this.data=null}setupEvents(){console.log("Setting up tcp events"),this.connection.on("data",t=>this.handleData(t))}handleData(t){console.log("TCP stream: "+t);const s=t.toString();this.data+=s,this.data.endsWith("\n")&&(this.emitData(this.data),this.data="")}emitData(t){const s=t.split("\r\n");for(const e of s)this.emit("data",e)}send(t){console.log("Sending "+t),this.connection.write(t+"\n")}}module.exports=n;
},{}],"VMdP":[function(require,module,exports) {
"use strict";const e=require("../connection/websockets"),t=require("../connection/tls");class s{static getInstance(){return process.platform.electron?t:e}}module.exports=s;
},{"../connection/websockets":"y+gA","../connection/tls":"vBmE"}],"WdKE":[function(require,module,exports) {
"use strict";const e=require("./chatmud"),n=require("./factories/networkfactory"),o=require("./sounds/soundplayer");console.log("Starting connection...");const t=new n.getInstance;console.log("Creating handler...");const r=new e(new t);
},{"./chatmud":"FNh7","./factories/networkfactory":"VMdP","./sounds/soundplayer":"KITK"}]},{},["WdKE"], null)
//# sourceMappingURL=/main.25dc09a0.map
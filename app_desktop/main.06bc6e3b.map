{"version":3,"sources":["../js/interface/cmoutput.js","0","../js/inserts/webtts.js","../js/inserts/pingutils.js","../js/inserts/mcp.js","../js/inserts/triggers.js","../js/inserts/programmerhelper.js","../js/inserts/notifier.js","../js/factories/insertfactory.js","../js/factories/appendfactory.js","../js/history/channelhistory.js","../js/interface/channelinterface.js","../js/sounds/soundops.js","../js/sounds/soundplayer.js","../js/interface/programmer.js","../js/tts/ariatts.js","../js/tts/mactts.js","../js/factories/ttsfactory.js","../js/ui/mudinput.js","../js/ui/resolvinglink.js","../js/ui/outputitem.js","../js/ui/mudoutput.js","../js/ui/settingspanel.js","../js/ui/onlinelist.js","../js/ui/toolbar.js","../js/ui/main.js","../js/interface/interface.js","../js/history/inputhistory.js","../js/chatmud.js","../js/connection/websockets.js","../js/connection/tls.js","../js/factories/networkfactory.js","../js/main.js"],"names":["EventEmitter","require","CMOutput","constructor","instance","maxLines","add","string","console","log","tts","speak","emit","history","addMessage","module","exports","WebTTS","interface","act","document","getElementById","value","PingUtils","token","time","start","performance","now","stop","MCP","key","name","pings","Array","toString","startsWith","slice","length","parsed","JSON","parse","executeMCP","command","authentication_key","error","output","s1","trim","indexOf","includes","s2","split","i","initMCP","connection","send","args","checkKey","info","handleChannelMessage","handleChannelSocial","handleSocial","handlePlayerConnect","handlePlayerReconnect","handlePlayerDisconnect","handlePlayerTeleportOut","handlePlayerTeleportIn","handleTell","handleEdit","handleNetLag","handlePlay","prefix","message","soundPlayer","playChannel","stringify","playSocial","social","gender","data","play","args2","programmer","setObject","setEnableHelper","newPing","push","findPingByToken","ping","Triggers","executeTriggers","matched","match","ProgrammerHelper","code","receiving","enabled","setCode","open","Notifier","Notification","requestPermission","then","result","body","inserts","webtts","mcp","triggers","programmerhelper","notifier","InsertFactory","getInsert","appends","AppendFactory","getInstance","ChannelHistory","channels","pChannel","channel","getChannelByName","Channel","getMessageForChannel","id","messages","unshift","ChannelInterface","currentChannel","currentMessage","nextChannel","speakImmediate","previousChannel","nextMessage","readMessage","previousMessage","type","children","sounds","findSoundsInFolder","path","directory","search","object","entry","findFilenames","array","returnObj","Howl","Howler","rng","soundops","Sounds","SoundPlayer","extension","file","folder","mFile","searchSounds","loadSound","sound","socials","foundSocials","filename","Sound","basePath","src","Programmer","window","lines","currentLine","boundMethod","setTimeout","postMessage","handleMessage","bind","addEventListener","sendCode","removeEventListener","line","obj","TTS","speaking","speakQueue","voice","rate","stopSpeech","innerHTML","replace","item","node","createTextNode","appendChild","createElement","say","handleQueue","shift","err","AriaTTS","MacTTS","TTSFactory","process","platform","React","MudInput","Component","props","state","inputValue","handleChange","handleKey","inputRef","createRef","render","componentDidMount","current","focus","evt","inputHistory","getLastEntered","setState","target","urlToTitle","ResolvingLink","text","url","resolved","onClick","YouTube","default","OutputItem","re","itemize","map","index","test","parseLink","openLink","event","link","preventDefault","parseYoutubeLink","e","andPosition","substring","Settings","MudOutput","addLine","on","SettingsPanel","volume","speech","resolveLinks","embedYoutube","handleVolumeChange","handleSpeechStateChange","Boolean","targetVolume","checked","setSpeechEnabled","OnlineList","people","active","idlers","bots","createGroup","response","componentWillMount","getOnlineList","fetch","json","parseData","list","flags","person","title","ToolBar","isSettingsOpened","isOnlineListOpened","showSettings","hideSettings","showOnlineList","hideOnlineList","renderButtons","renderSettings","renderOnlineList","buttons","MainWindow","Combokeys","reactDom","MainUI","Interface","shortcuts","setupEvents","setupKeys","setupInterface","bindGlobal","historyInterface","InputHistory","strings","iterator","getAtIndex","getAtIterator","increaseIterator","decreaseIterator","Inserts","Appends","ChatMud","setupInserts","setupAppends","handleData","insertDef","insert","appendDef","append","sendInput","input","IO","Websockets","io","net","TLS","TCPConnection","address","port","client","Socket","tcp","connect","options","socket","endsWith","emitData","arr","write","NetworkFactory","game"],"mappings":"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ACDwG,KAAM,OACNxG,KAAM,UACL,CACDwG,KAAM,OACNxG,KAAM,kBACL,CACDwG,KAAM,OACNxG,KAAM,gBACL,CACDwG,KAAM,OACNxG,KAAM,WACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,WACL,CACDwG,KAAM,OACNxG,KAAM,UACL,CACDwG,KAAM,OACNxG,KAAM,gBACL,CACDwG,KAAM,OACNxG,KAAM,kBACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,YACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,eACL,CACDwG,KAAM,OACNxG,KAAM,YACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,gBACL,CACDwG,KAAM,OACNxG,KAAM,YACL,CACDwG,KAAM,OACNxG,KAAM,iBAEP,CACDA,KAAM,SACNwG,KAAM,SACNC,SAAU,CAAC,CACTD,KAAM,OACNxG,KAAM,WACL,CACDwG,KAAM,OACNxG,KAAM,eAEP,CACDA,KAAM,QACNwG,KAAM,SACNC,SAAU,CAAC,CACTD,KAAM,OACNxG,KAAM,oBACL,CACDwG,KAAM,OACNxG,KAAM,wBACL,CACDwG,KAAM,OACNxG,KAAM,sBACL,CACDwG,KAAM,OACNxG,KAAM,wBAEP,CACDA,KAAM,cACNwG,KAAM,SACNC,SAAU,CAAC,CACTD,KAAM,OACNxG,KAAM,YACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,cAEP,CACDA,KAAM,OACNwG,KAAM,SACNC,SAAU,CAAC,CACTD,KAAM,OACNxG,KAAM,gBACL,CACDwG,KAAM,OACNxG,KAAM,gBACL,CACDwG,KAAM,OACNxG,KAAM,iBACL,CACDwG,KAAM,OACNxG,KAAM,gBACL,CACDwG,KAAM,OACNxG,KAAM,0BACL,CACDwG,KAAM,OACNxG,KAAM,kBACL,CACDwG,KAAM,OACNxG,KAAM,kBACL,CACDwG,KAAM,OACNxG,KAAM,mBACL,CACDwG,KAAM,OACNxG,KAAM,oBACL,CACDwG,KAAM,OACNxG,KAAM,oBACL,CACDwG,KAAM,OACNxG,KAAM,mBACL,CACDwG,KAAM,OACNxG,KAAM,mBAEP,CACDA,KAAM,OACNwG,KAAM,SACNC,SAAU,CAAC,CACTD,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,wBACL,CACDwG,KAAM,OACNxG,KAAM,WACL,CACDwG,KAAM,OACNxG,KAAM,YACL,CACDwG,KAAM,OACNxG,KAAM,eACL,CACDwG,KAAM,OACNxG,KAAM,mBACL,CACDwG,KAAM,OACNxG,KAAM,sBAEP,CACDA,KAAM,eACNwG,KAAM,SACNC,SAAU,CAAC,CACTD,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,aAEP,CACDA,KAAM,KACNwG,KAAM,SACNC,SAAU,CAAC,CACTD,KAAM,OACNxG,KAAM,kBACL,CACDwG,KAAM,OACNxG,KAAM,gBACL,CACDwG,KAAM,OACNxG,KAAM,4BAEP,CACDA,KAAM,UACNwG,KAAM,SACNC,SAAU,CAAC,CACTD,KAAM,OACNxG,KAAM,YACL,CACDwG,KAAM,OACNxG,KAAM,YACL,CACDwG,KAAM,OACNxG,KAAM,wBACL,CACDwG,KAAM,OACNxG,KAAM,sBACL,CACDwG,KAAM,OACNxG,KAAM,4BACL,CACDwG,KAAM,OACNxG,KAAM,YACL,CACDwG,KAAM,OACNxG,KAAM,wBACL,CACDwG,KAAM,OACNxG,KAAM,sBACL,CACDwG,KAAM,OACNxG,KAAM,eACL,CACDwG,KAAM,OACNxG,KAAM,YACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,qBACL,CACDwG,KAAM,OACNxG,KAAM,mBACL,CACDwG,KAAM,OACNxG,KAAM,wBACL,CACDwG,KAAM,OACNxG,KAAM,yBACL,CACDwG,KAAM,OACNxG,KAAM,yBACL,CACDwG,KAAM,OACNxG,KAAM,sBACL,CACDwG,KAAM,OACNxG,KAAM,sBACL,CACDwG,KAAM,OACNxG,KAAM,sBACL,CACDwG,KAAM,OACNxG,KAAM,YACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,YACL,CACDwG,KAAM,OACNxG,KAAM,0BACL,CACDwG,KAAM,OACNxG,KAAM,wBACL,CACDwG,KAAM,OACNxG,KAAM,2BACL,CACDwG,KAAM,OACNxG,KAAM,kBACL,CACDwG,KAAM,OACNxG,KAAM,oBACL,CACDwG,KAAM,OACNxG,KAAM,kBACL,CACDwG,KAAM,OACNxG,KAAM,gBACL,CACDwG,KAAM,OACNxG,KAAM,mBACL,CACDwG,KAAM,OACNxG,KAAM,iBACL,CACDwG,KAAM,OACNxG,KAAM,wBACL,CACDwG,KAAM,OACNxG,KAAM,mBACL,CACDwG,KAAM,OACNxG,KAAM,iBACL,CACDwG,KAAM,OACNxG,KAAM,qBACL,CACDwG,KAAM,OACNxG,KAAM,mBACL,CACDwG,KAAM,OACNxG,KAAM,uBACL,CACDwG,KAAM,OACNxG,KAAM,uBACL,CACDwG,KAAM,OACNxG,KAAM,oBACL,CACDwG,KAAM,OACNxG,KAAM,kBACL,CACDwG,KAAM,OACNxG,KAAM,YACL,CACDwG,KAAM,OACNxG,KAAM,qBACL,CACDwG,KAAM,OACNxG,KAAM,qBACL,CACDwG,KAAM,OACNxG,KAAM,sBACL,CACDwG,KAAM,OACNxG,KAAM,gBACL,CACDwG,KAAM,OACNxG,KAAM,iBACL,CACDwG,KAAM,OACNxG,KAAM,YACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,oBACL,CACDwG,KAAM,OACNxG,KAAM,sBACL,CACDwG,KAAM,OACNxG,KAAM,gBACL,CACDwG,KAAM,OACNxG,KAAM,YACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,qBACL,CACDwG,KAAM,OACNxG,KAAM,qBACL,CACDwG,KAAM,OACNxG,KAAM,sBACL,CACDwG,KAAM,OACNxG,KAAM,oBACL,CACDwG,KAAM,OACNxG,KAAM,kBACL,CACDwG,KAAM,OACNxG,KAAM,kBACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,kBACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,eACL,CACDwG,KAAM,OACNxG,KAAM,eACL,CACDwG,KAAM,OACNxG,KAAM,eACL,CACDwG,KAAM,OACNxG,KAAM,eACL,CACDwG,KAAM,OACNxG,KAAM,eACL,CACDwG,KAAM,OACNxG,KAAM,eACL,CACDwG,KAAM,OACNxG,KAAM,eACL,CACDwG,KAAM,OACNxG,KAAM,eACL,CACDwG,KAAM,OACNxG,KAAM,eACL,CACDwG,KAAM,OACNxG,KAAM,eACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,eACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,YACL,CACDwG,KAAM,OACNxG,KAAM,mBACL,CACDwG,KAAM,OACNxG,KAAM,iBACL,CACDwG,KAAM,OACNxG,KAAM,qBACL,CACDwG,KAAM,OACNxG,KAAM,mBACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,gBACL,CACDwG,KAAM,OACNxG,KAAM,qBACL,CACDwG,KAAM,OACNxG,KAAM,mBACL,CACDwG,KAAM,OACNxG,KAAM,iBACL,CACDwG,KAAM,OACNxG,KAAM,WACL,CACDwG,KAAM,OACNxG,KAAM,iBACL,CACDwG,KAAM,OACNxG,KAAM,YACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,iBACL,CACDwG,KAAM,OACNxG,KAAM,0BACL,CACDwG,KAAM,OACNxG,KAAM,oBACL,CACDwG,KAAM,OACNxG,KAAM,oBACL,CACDwG,KAAM,OACNxG,KAAM,kBACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,cACL,CACDwG,KAAM,OACNxG,KAAM,wBACL,CACDwG,KAAM,OACNxG,KAAM,aACL,CACDwG,KAAM,OACNxG,KAAM,uBACL,CACDwG,KAAM,OACNxG,KAAM,mBACL,CACDwG,KAAM,OACNxG,KAAM,mBAEP,CACDA,KAAM,SACNwG,KAAM,SACNC,SAAU,CAAC,CACTzG,KAAM,SACNwG,KAAM,SACNC,SAAU,CAAC,CACTD,KAAM,OACNxG,KAAM,UACL,CACDwG,KAAM,OACNxG,KAAM,UACL,CACDwG,KAAM,OACNx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","file":"main.06bc6e3b.map","sourceRoot":"../html","sourcesContent":["'use strict';\nconst EventEmitter = require('eventemitter3');\n\nclass CMOutput extends EventEmitter {\n\tconstructor(instance) {\n\t\tsuper();\n\t\tthis.instance = instance;\n\t\tthis.maxLines = 100;\n\t}\n\n\tadd(string) {\n\t\tconsole.log('Outputting ' + string);\n\t\tif (string != '') {\n\t\t\tthis.instance.tts.speak(string);\n\t\t\tthis.emit('MudOutput', string);\n\n\t\t\tthis.instance.history.addMessage('MudOutput', string);\n\t\t}\n\t}\n}\n\nmodule.exports = CMOutput;\n",null,"'use strict';\n\nclass WebTTS {\n\tconstructor() {\n\t\tthis.interface = null;\n\t}\n\n\tact(string, instance) {\n\t\tthis.instance = instance;\n\t\tconsole.log(document.getElementById('speechToggle').value);\n\t\tthis.instance.tts.speak(string);\n\t\treturn string;\n\t}\n}\n\nmodule.exports = WebTTS;\n","'use strict';\nclass PingUtils {\n\tconstructor(token) {\n\t\tthis.token = token;\n\t\tthis.time = 0;\n\t}\n\n\tstart() {\n\t\tthis.time = performance.now();\n\t}\n\n\tstop() {\n\t\tthis.time = performance.now(); -this.time;\n\t}\n}\n\nmodule.exports = PingUtils;\n","'use strict';\nconst PingUtils = require('./pingutils');\n\n'use strict';\nclass MCP {\n\tconstructor() {\n\t\tthis.instance = null;\n\t\tthis.key = 0;\n\t\tthis.name = 0;\n\t\tthis.pings = new Array();\n\t}\n\n\tact(string, instance) {\n\t\tstring = string.toString();\n\t\tif (!string.startsWith('#$#')) {\n\t\t\treturn string;\n\t\t}\n\n\t\tthis.instance = instance;\n\t\tif (string.startsWith('#$#json')) {\n\t\t\ttry {\n\t\t\t\tstring = string.slice(8, string.length);\n\t\t\t\tconst parsed = JSON.parse(string);\n\t\t\t\tthis.executeMCP(parsed.command, parsed, parsed.authentication_key);\n\t\t\t} catch (error) {\n\t\t\t\tthis.instance.output.add('Error parsing MCP: ' + string);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.parse(string);\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tparse(string) {\n\t\tconsole.log('Parsing ' + string);\n\t\tlet s1 = string.slice(3, string.length);\n\t\ts1 = s1.trim();\n\t\tlet command = s1.slice(0, s1.indexOf(' '));\n\n\t\tcommand = command.trim();\n\t\tconsole.log('Command: ' + command);\n\t\ts1 = s1.slice(command.length, s1.length);\n\t\tlet key = null;\n\t\tif (s1.includes('-|-')) {\n\t\t\tkey = s1.slice(s1.indexOf('-|-') + 4, s1.length);\n\t\t\tkey = key.trim();\n\t\t\ts1 = s1.slice(0, s1.indexOf('-|-'));\n\t\t}\n\n\t\tconst s2 = s1.split('|');\n\t\tfor (let i = 0; i < s2.length; i++) {\n\t\t\ts2[i] = s2[i].trim();\n\t\t}\n\n\t\tif (command == 'mcp') {\n\t\t\tthis.initMCP();\n\t\t}\n\n\t\tthis.executeMCP(command, s2, key);\n\t}\n\n\tinitMCP() {\n\t\tthis.instance.connection.send('#$#register_client Chatmud Official Client (Alpha)');\n\t\tthis.instance.connection.send('#$#client_supports authkeys');\n\t\tthis.instance.connection.send('#$#client_supports json');\n\t\tthis.instance.connection.send('#$#client_supports check_netlag');\n\t}\n\n\texecuteMCP(command, args, key) {\n\t\tif (key) {\n\t\t\tthis.checkKey(key);\n\t\t}\n\n\t\tswitch (command) {\n\t\t\tcase 'authentication_key':\n\t\t\t\tthis.key = args[0];\n\t\t\t\tthis.instance.info.key = args[0];\n\t\t\t\tbreak;\n\t\t\tcase 'my_name':\n\t\t\t\tthis.name = args[0];\n\t\t\t\tthis.instance.info.name = args[0];\n\t\t\t\tbreak;\n\t\t\tcase 'channel_message':\n\t\t\t\tthis.handleChannelMessage(args);\n\t\t\t\tbreak;\n\t\t\tcase 'channel_social':\n\t\t\t\tthis.handleChannelSocial(args);\n\t\t\t\tbreak;\n\t\t\tcase 'social':\n\t\t\t\tthis.handleSocial(args);\n\t\t\t\tbreak;\n\n\t\t\tcase 'watched_player_connect':\n\t\t\t\tthis.handlePlayerConnect(args);\n\t\t\t\tbreak;\n\t\t\tcase 'watched_player_reconnect':\n\t\t\t\tthis.handlePlayerReconnect(args);\n\t\t\t\tbreak;\n\t\t\tcase 'watched_player_disconnect':\n\t\t\t\tthis.handlePlayerDisconnect(args);\n\t\t\t\tbreak;\n\t\t\tcase 'teleport_out':\n\t\t\t\tthis.handlePlayerTeleportOut(args);\n\t\t\t\tbreak;\n\t\t\tcase 'teleport_in':\n\t\t\t\tthis.handlePlayerTeleportIn(args);\n\t\t\t\tbreak;\n\t\t\tcase 'tell_message':\n\t\t\t\tthis.handleTell(args);\n\t\t\t\tbreak;\n\t\t\tcase 'edit':\n\t\t\t\tthis.handleEdit(args);\n\t\t\t\tbreak;\n\n\t\t\tcase 'netlag':\n\t\t\t\tthis.handleNetLag(args);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.handlePlay(command, args);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thandleChannelMessage(args) {\n\t\tthis.instance.history.addMessage(args.name, args.prefix + args.message);\n\t\tthis.instance.output.add(args.prefix + ' ' + args.message);\n\t\tthis.instance.soundPlayer.playChannel(args.name);\n\t}\n\n\thandleChannelSocial(args) {\n\t\tconsole.log(JSON.stringify(args));\n\t\tthis.instance.history.addMessage(args.name, args.name + ': ' + args.message);\n\t\tthis.instance.output.add(args.name + ': ' + args.message);\n\t\tthis.instance.soundPlayer.playSocial(args.social\t, args.gender);\n\t\tthis.instance.soundPlayer.playChannel(args.name);\n\t}\n\n\thandleSocial(args) {\n\t\tthis.instance.soundPlayer.playSocial(args.data[0], args.data[2]);\n\t}\n\n\thandlePlay(command, args) {\n\t\tif (args.data) {\n\t\t\tthis.instance.soundPlayer.play(args.data[0], command);\n\t\t}\n\t\t\n\t}\n\n\thandlePlayerConnect(args) {\n\t\tthis.instance.soundPlayer.play('enter');\n\t\tthis.instance.output.add(args.data[0] + ' connected');\n\t}\n\n\thandlePlayerReconnect(args) {\n\t\tthis.instance.soundPlayer.play('reconnect');\n\t\tthis.instance.output.add(args[0] + ' reconnected');\n\t}\n\n\thandlePlayerDisconnect(args) {\n\t\tthis.instance.soundPlayer.play('leave');\n\t\tthis.instance.output.add(args.data[0] + ' disconnected');\n\t}\n\n\thandlePlayerTeleportOut(args) {\n\t\tthis.instance.soundPlayer.play('teleport%20out', 'misc');\n\t}\n\n\thandlePlayerTeleportIn(args) {\n\t\tthis.instance.soundPlayer.play('teleport%20in', 'misc');\n\t}\n\n\thandleTell(args) {\n\t\tconsole.log('Parsed tell: ' + args);\n\t\tthis.instance.soundPlayer.play('tell');\n\t\tthis.instance.output.add(args.data[0] + ' ' + args.data[1] + ' ' + args.data[2]);\n\t}\n\n\thandleEdit(args) {\nconsole.log(JSON.stringify(args));\n\t\tconst args2 = args[0].split(' ');\n\t\t// Console.log(\"Split args: \" + JSON.stringify(args2));\n\t\t// let verb = args2[1].split(\":\")[1];\n\t\t// let object = args2[4].split(\":\")[0];\n\t\tthis.instance.programmer.setObject(args2[args2.length - 1]);\n\t\tthis.instance.programmer.setEnableHelper(true);\n\t}\n\n\tcheckKey(key) {\n\t\tconsole.log('Checking ' + key + ' agains ' + this.key);\n\t\tif (key != this.key) {\n\t\t\tthis.instance.soundPlayer.play('spoofer', 'misc');\n\t\t\tthis.instance.output.add('Spoof attempt!');\n\t\t}\n\t}\n\n\thandleNetLag(args) {\n\t\tif (args.data[0] == 'ping') {\n\t\t\tconst newPing = new PingUtils(args.data[1]);\n\t\t\tthis.instance.connection.send('#$#netlag pong ' + args.data[1]);\n\t\t\tnewPing.start();\n\t\t\tthis.pings.push(newPing);\n\t\t}\n\n\t\tif (args.data[0] == 'pang') {\n\t\t\tconst myPing = this.findPingByToken(args.data[1]);\n\t\t\tmyPing.stop();\n\t\t}\n\t}\n\n\tfindPingByToken(token) {\n\t\tfor (const ping of this.pings) {\n\t\t\tif (ping.token == token) {\n\t\t\t\treturn ping;\n\t\t\t}\n\t\t}\n\t}\n}\n\nmodule.exports = MCP;\n","'use strict';\n\nclass Triggers {\n\tconstructor() {\n\t\tthis.instance = null;\n\t}\n\n\tact(string, instance) {\n\t\tthis.instance = instance;\n\t\tthis.executeTriggers(string);\n\t\treturn string;\n\t}\n\n\texecuteTriggers(string) {\n\t\tlet matched = string.match('^Turning (off|on) channel ([a-zA-Z0-9]*)?\\.');\n\t\tif (matched) {\n\t\t\tthis.instance.soundPlayer.play(matched[1]);\n\t\t}\n\n\t\tmatched = string.match('^I don\\'t understand that\\.$');\n\t\tif (matched) {\n\t\t\tthis.instance.soundPlayer.play('huh', 'misc');\n\t\t}\n\n\t\tmatched = string.match('^(\\>\\> Command Aborted \\<\\<|Invalid selection.)$');\n\t\tif (matched) {\n\t\t\tthis.instance.soundPlayer.play('cancel');\n\t\t}\n\n\t\tmatched = string.match('(\\\\[(Type a line of input or `@abort\\' to abort the command|Type lines of input; use `\\\\.\\' to end or `@abort\\' to abort the command)\\\\.\\\\]|\\\\[Enter `yes\\' or `no\\'\\\\])');\n\t\tif (matched) {\n\t\t\tthis.instance.soundPlayer.play('prompt');\n\t\t}\n\n\t\tmatched = string.match('You click your heels three times.');\n\t\tif (matched) {\n\t\t\tthis.instance.soundPlayer.play('home', 'misc');\n\t\t}\n\n\t\tmatched = string.match('[Connections] A new high player count has been reached! * players are connected.');\n\t\tif (matched) {\n\t\t\tthis.instance.soundPlayer.play('high%connections', 'misc');\n\t\t}\n\n\t\tmatched = string.match('[Creation] * has just connected for the first time! Please make them feel welcome.');\n\t\tif (matched) {\n\t\t\tthis.instance.soundPlayer.play('creation');\n\t\t}\n\n\t\tmatched = string.match('(.*) says,(.*)');\n\t\tif (matched) {\n\t\t\tthis.instance.soundPlayer.play('say');\n\t\t}\n\n\t\tmatched = string.match('^You say,*?');\n\t\tif (matched) {\n\t\t\tthis.instance.soundPlayer.play('say');\n\t\t}\n\t}\n}\n\nmodule.exports = Triggers;\n","'use strict';\nclass ProgrammerHelper {\n\tconstructor() {\n\t\tthis.code = '';\n\t\tthis.receiving = false;\n\t\tthis.instance = null;\n\t}\n\n\tact(string, instance) {\n\t\tif (instance.programmer.enabled == true) {\n\t\t\tif (this.receiving == false) {\n\t\t\t\tthis.receiving = true;\n\t\t\t\tthis.code = '';\n\t\t\t}\n\n\t\t\tthis.instance = instance;\n\t\t\tconsole.log('Checking: ' + string);\n\t\t\tif (string == '.') {\n\t\t\t\tthis.instance.programmer.setCode(this.code);\n\t\t\t\tthis.instance.programmer.open();\n\t\t\t\tthis.instance.programmer.setEnableHelper(false);\n\t\t\t\tthis.receiving = false;\n\t\t\t}\n\t\t\tthis.code += string + '\\n';\n\t\t\treturn '';\n\t\t}\n\t\treturn string;\n\t}\n}\n\nmodule.exports = ProgrammerHelper;\n","'use strict';\n\nclass Notifier {\n\tconstructor() {\n\t\tthis.instance = null;\n\t\tNotification.requestPermission().then(result => console.log('Notification result: ' + result));\n\t}\n\n\tact(string, instance) {\n\t\tstring = string.toString();\n\t\tthis.instance = instance;\n\t\tif (this.instance.info.name != '') {\n\t\t\tif (string.includes(this.instance.info.name)) {\n\t\t\t\tconsole.log('Sending notification');\n\t\t\t\tnew Notification('ChatMud', {\n\t\t\t\t\tbody: 'You\\'ve been mentioned! ' + string});\n\t\t\t}\n\t\t}\n\t\treturn string;\n\t}\n}\n\nmodule.exports = Notifier;\n","'use strict';\n\nconst inserts = {\n\twebtts: require('../inserts/webtts'),\n\tmcp: require('../inserts/mcp'),\n\ttriggers: require('../inserts/triggers'),\n\tprogrammerhelper: require('../inserts/programmerhelper'),\n\tnotifier: require('../inserts/notifier')\n};\n\nclass InsertFactory {\n\tstatic getInsert(name) {\n\t\treturn inserts[name];\n\t}\n}\n\nmodule.exports = InsertFactory;\n","'use strict';\nconst appends = {\n};\nclass AppendFactory {\n\tstatic getInstance(instance) {\n\t\treturn appends[instance];\n\t}\n}\n\nmodule.exports = AppendFactory;\n","'use strict';\nclass ChannelHistory {\n\tconstructor() {\n\t\tthis.channels = new Array();\n\t}\n\n\taddMessage(pChannel, message) {\n\t\tconsole.log('Adding to ' + pChannel + ', ' + message);\n\t\tlet channel = this.getChannelByName(pChannel);\n\t\tif (channel == -1) {\n\t\t\tchannel = new Channel(pChannel);\n\t\t\tthis.channels.push(channel);\n\t\t\tconsole.log('Created new channel');\n\t\t}\n\t\tchannel.addMessage(message);\n\t}\n\n\tgetChannelByName(name) {\n\t\tconsole.log('Getting channel by name ' + name);\n\t\tfor (const channel of this.channels) {\n\t\t\tif (channel.name == name) {\n\t\t\t\treturn channel;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\n\tgetMessageForChannel(name, id) {\n\t\tconsole.log('Getting message ' + id + ' for channel ' + name);\n\t\tconst channel = this.getChannelByName(name);\n\t\treturn channel.messages[id];\n\t}\n}\n\nclass Channel {\n\tconstructor(name) {\n\t\tthis.name = name;\n\t\tthis.messages = new Array();\n\t}\n\n\taddMessage(message) {\n\t\tconsole.log('In-channel message add: ' + message);\n\t\tthis.messages.unshift(message);\n\t}\n}\n\nmodule.exports = ChannelHistory;\n","'use strict';\nconst ChannelHistory = require('../history/channelhistory');\n\nclass ChannelInterface {\n\tconstructor(history, instance) {\n\t\tthis.instance = instance;\n\t\tthis.currentChannel = 0;\n\t\tthis.currentMessage = 0;\n\t\tthis.history = history;\n\t}\n\n\tnextChannel() {\n\t\tconsole.log('Next channel');\n\t\tif (this.currentChannel < this.history.channels.length - 1) {\n\t\t\tthis.currentChannel++;\n\t\t} else {\n\t\t\tthis.currentChannel = this.history.channels.length - 1;\n\t\t}\n\n\t\tthis.instance.tts.speakImmediate(this.history.channels[this.currentChannel].name);\n\t}\n\n\tpreviousChannel() {\n\t\tconsole.log('Previous channel');\n\t\tif (this.currentChannel > 0) {\n\t\t\tthis.currentChannel--;\n\t\t} else {\n\t\t\tthis.currentChannel = 0;\n\t\t}\n\n\t\tthis.instance.tts.speakImmediate(this.history.channels[this.currentChannel].name);\n\t}\n\n\tnextMessage() {\n\t\tconsole.log('Next message');\n\t\tif (this.currentMessage > 0) {\n\t\t\tthis.currentMessage--;\n\t\t} else {\n\t\t\tthis.currentMessage = 0;\n\t\t}\n\n\t\tthis.readMessage(this.currentMessage);\n\t}\n\n\tpreviousMessage() {\n\t\tconsole.log('Previous message');\n\t\tif (this.currentMessage < this.history.channels[this.currentChannel].messages.length - 1) {\n\t\t\tthis.currentMessage++;\n\t\t} else {\n\t\t\tthis.currentMessage = this.history.channels[this.currentChannel].messages.length - 1;\n\t\t}\n\n\t\tthis.readMessage(this.currentMessage);\n\t}\n\n\treadMessage(id) {\n\t\tconsole.log('Reading ' + this.history.channels[this.currentChannel].messages[id]);\n\t\tthis.instance.tts.speakImmediate(this.history.channels[this.currentChannel].messages[id]);\n\t}\n}\n\nmodule.exports = ChannelInterface;\n","const sounds = require('./sounds');\n\nfunction findSoundsInFolder(path) {\n\tconst split = path.split('/');\n\tlet directory = sounds;\n\tfor (const string of split) {\n\t\tdirectory = search(string, directory);\n\t}\n\treturn directory;\n}\n\nfunction search(string, object) {\n\tfor (const entry of object) {\n\t\tif (entry.name == string) {\n\t\t\treturn entry.children;\n\t\t}\n\t}\n}\n\nfunction findFilenames(string, array) {\n\tconst returnObj = [];\n\tfor (const entry of array) {\n\t\tif (entry.name.includes(string)) {\n\t\t\treturnObj.push(entry.name);\n\t\t}\n\t}\n\treturn returnObj;\n}\n\nmodule.exports.findSoundsInFolder = findSoundsInFolder;\nmodule.exports.findFilenames = findFilenames;\n","const {Howl, Howler} = require('howler');\nconst rng = require('random-int');\nconst soundops = require('./soundops');\nconst Sounds = require('./sounds');\n\nclass SoundPlayer {\n\tconstructor(extension = '.ogg') {\n\t\tthis.sounds = new Array();\n\t\tthis.extension = extension;\n\t}\n\n\tplay(file, folder = '') {\n\t\tlet mFile = this.searchSounds(file, folder);\n\t\tif (mFile == -1) {\n\t\t\tmFile = this.loadSound(file, folder);\n\t\t}\n\t\tmFile.sound.play();\n\t}\n\n\tplayChannel(name) {\n\t\tconst channels = soundops.findSoundsInFolder('channels');\n\t\tconst foundChannels = soundops.findFilenames(name, channels);\n\t\tname = (foundChannels.length == 0 ? 'global' : name);\n\t\tthis.play(name, 'channels');\n\t}\n\n\tplaySocial(name, gender) {\n\t\tconst socials = soundops.findSoundsInFolder('socials');\n\t\tlet foundSocials = soundops.findFilenames(name + '_' + gender, socials);\n\t\tif (foundSocials.length == 0) {\n\t\t\tfoundSocials = soundops.findFilenames(name, socials);\n\t\t}\n\t\tlet filename = null;\n\t\tif (foundSocials.length > 0) {\n\t\t\tfilename = foundSocials[rng(0, foundSocials.length - 1)].toString();\n\t\t\tfilename = filename.slice(0, filename.length - 4);\n\t\t}\n\n\t\tif (!filename) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.play(filename, 'socials');\n\t}\n\n\tsearchSounds(file, folder) {\n\t\tfor (const sound of this.sounds) {\n\t\t\tif (sound.file == file && sound.folder == folder) {\n\t\t\t\treturn sound;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\n\tloadSound(file, folder) {\n\t\tconst sound = new Sound(folder, file);\n\t\tthis.sounds.push(sound);\n\t\treturn sound;\n\t}\n}\n\nclass Sound {\n\tconstructor(folder, file, extension = '.ogg') {\n\t\tthis.basePath = './sounds/';\n\t\tthis.file = file;\n\t\tthis.folder = folder;\n\t\tthis.extension = extension;\n\t\tthis.path = this.basePath + this.folder + '/' + this.file + this.extension;\n\n\t\tconsole.log('Loading ' + this.path);\n\t\tthis.sound = new Howl({src: this.path});\n\t}\n}\n\nmodule.exports = SoundPlayer;\n","'use strict';\n\nclass Programmer {\n\tconstructor(instance) {\n\t\tthis.instance = instance;\n\t\tthis.code = '';\n\t\tthis.object = '';\n\t\tthis.enabled = false;\n\t\tthis.window = null;\n\t\tthis.lines = new Array();\n\t\tthis.currentLine = 0;\n\t\tthis.boundMethod = null;\n\t}\n\n\tsetEnableHelper(value) {\n\t\tthis.enabled = value;\n\t}\n\n\tsetCode(code) {\n\t\tthis.code = code;\n\t\tconsole.log('Code: ' + this.code);\n\t}\n\n\topen() {\n\t\tthis.window = window.open('editor.html');\n\t\tsetTimeout(() => {\n\t\t\tthis.window.postMessage(this.code);\n\t\t}, 1000);\n\t\tthis.boundMethod = this.handleMessage.bind(this);\n\t\twindow.addEventListener('message', this.boundMethod);\n\t}\n\n\thandleMessage(data) {\n\t\tconst code = data.data;\n\t\tthis.sendCode(code);\n\t\twindow.removeEventListener('message', this.boundMethod);\n\t}\n\n\tsendCode(data) {\n\t\tconst lines = data.split('\\n');\n\t\tthis.lines = lines;\n\t\tthis.instance.connection.send('@program ' + this.object);\n\t\tfor (const line of lines) {\n\t\t\tthis.instance.connection.send(line);\n\t\t}\n\t\tthis.instance.connection.send('.');\n\t\tthis.code = '';\n\t\tthis.enabled = false;\n\t}\n\n\tsetObject(obj) {\n\t\tconsole.log('Object set to ' + this.object);\n\t\tthis.object = obj;\n\t}\n}\n\nmodule.exports = Programmer;\n","'use strict';\n\nclass TTS {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t\tthis.speaking = false;\n\t\tthis.speakQueue = new Array();\n\t\tthis.voice = 'alex';\n\t\tthis.rate = 3.0;\n\t}\n\n\tstopSpeech() {\n\t\tlet item = document.getElementById(\"tts\");\n        item.innerHTML = \"\";\n\t}\n\n\tspeakImmediate(string) {\n\t\tlet item = document.getElementById(\"tts\");\n\t\titem.innerHTML = \"\";\n\t\tthis.speak(string);\n\t}\n\n\tspeak(string) {\n\t\tif (!this.enabled) {\n\t\t\treturn;\n\t\t}\n\t\tstring = string.replace('[', ' ');\n\t\tstring = string.replace(']', ' ');\n\t\tconsole.log('saying ' + string);\n        \n\t\tlet item = document.getElementById(\"tts\");\n        let node = document.createTextNode(string+\"\\n\");\n\t\titem.appendChild(document.createElement('br'));\n        item.appendChild(node);\n\t}\n\n\t\n}\n\nmodule.exports = TTS;\n","'use strict';\nconst say = require('say');\n\nclass TTS {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t\tthis.speaking = false;\n\t\tthis.speakQueue = new Array();\n\t\tthis.voice = 'alex';\n\t\tthis.rate = 3.0;\n\t}\n\n\tstopSpeech() {\n\t\tif (this.speaking == true) {\n\t\t\tthis.speaking = false;\n\t\t\tthis.speakQueue = [];\n\t\t\tsay.stop();\n\t\t}\n\t}\n\n\tspeakImmediate(string) {\n\t\tif (this.speaking == true) {\n\t\t\tthis.stopSpeech();\n\t\t}\n\t\tthis.speak(string);\n\t}\n\n\tspeak(string) {\n\t\tif (!this.enabled) {\n\t\t\treturn;\n\t\t}\n\t\tstring = string.replace('[', ' ');\n\t\tstring = string.replace(']', ' ');\n\t\tconsole.log('saying ' + string);\n\t\tthis.speakQueue.push(string);\n\t\tif (this.speaking == false) {\n\t\t\tthis.handleQueue();\n\t\t\tthis.speaking = true;\n\t\t}\n\t}\n\n\thandleQueue() {\n\t\tif (this.speakQueue.length > 0) {\n\t\t\tconst string = this.speakQueue.shift();\n\t\t\tsay.speak(string, this.voice, this.rate, err => this.handleQueue());\n\t\t} else {\n\t\t\tthis.speaking = false;\n\t\t}\n\t}\n}\n\nmodule.exports = TTS;\n","'use strict';\n\nconst AriaTTS = require('../tts/ariatts');\nconst MacTTS = require('../tts/mactts');\n\nclass TTSFactory {\n    static getInstance() {\n        switch(process.platform) {\n            case 'darwin':\n                return new MacTTS();\n                break;\n            default:\n                return new AriaTTS();\n                break;\n        }\n    }\n}\n\nmodule.exports = TTSFactory;","import './ui.css';\n\nconst React = require('react');\n\nclass MudInput extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tinputValue: ''\n\t\t};\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\tthis.handleKey = this.handleKey.bind(this);\n\t\tthis.inputRef = React.createRef();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"input\">\n\t\t\t\t<h2>Input</h2>\n\t\t\t\t<input ref={this.inputRef} type=\"text\" aria-label=\"Mud Input\" value={this.state.inputValue} onChange={this.handleChange} onKeyPress={this.handleKey}/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.inputRef.current.focus();\n\t}\n\n\thandleKey(evt) {\n\t\tif (evt.key == 'Enter') {\n\t\t\tlet value = this.state.inputValue;\n\t\t\tif (value == '') {\n\t\t\t\tvalue = this.props.instance.inputHistory.getLastEntered();\n\t\t\t} else if (value != this.props.instance.inputHistory.getLastEntered()) {\n\t\t\t\tthis.props.instance.inputHistory.add(value);\n\t\t\t}\n\n\t\t\tthis.props.instance.connection.send(value);\n\t\t\tthis.props.instance.tts.stopSpeech();\n\t\t\tthis.setState({\n\t\t\t\tinputValue: ''\n\t\t\t});\n\t\t}\n\t}\n\n\thandleChange(evt) {\n\t\tthis.setState({\n\t\t\tinputValue: evt.target.value\n\t\t});\n\t}\n}\n\nmodule.exports = MudInput;\n","const React = require('react');\nconst urlToTitle = require('url-to-title');\n\nclass ResolvingLink extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttext: this.props.url\n\t\t};\n\t\turlToTitle(this.props.url, (err, resolved) => {\n\t\t\tif (err) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.setState({text: resolved});\n\t\t});\n\t}\n\n\trender() {\n\t\treturn <a href={this.props.url} onClick={this.props.onClick}>{this.state.text}</a>;\n\t}\n}\n\nmodule.exports = ResolvingLink;\n","const React = require('react');\nconst open = require('opn');\nconst YouTube = require('react-youtube-player').default;\nconst ResolvingLink = require('./resolvinglink');\n\nclass OutputItem extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// This.re=/(http|ftp|https):\\/\\/([\\w_-]+(?:(?:\\.[\\w_-]+)+))([\\w.,@?\\^=%:\\/~+#-]*[\\w@?\\^=%\\/~+#-])?/gi;\n\t\tthis.re = /((?:http|ftp|https):\\/\\/(?:[\\w_-]+(?:(?:\\.[\\w_-]+)+))(?:[\\w.,@?\\^=%:\\/~+#-]*[\\w@?\\^=%\\/~+#-])?)/gi;\n\t}\n\n\titemize(text) {\n\t\tconst split = text.split(this.re);\n\t\tif (split.length == 1) {\n\t\t\treturn <div>{split[0]}</div>;\n\t\t}\n\t\treturn split.map((item, index) => {\n\t\t\tconst re = this.re; // Parcel doesn't let me use this.re directly for some odd reason\n\t\t\treturn (\n\t\t\t\tre.test(item) ? this.parseLink(item) : item\n\t\t\t);\n\t\t});\n\t}\n\n\topenLink(event, link) {\n\t\tevent.preventDefault();\n\t\topen(link);\n\t}\n\n\tparseLink(item) {\n\t\tif (item.indexOf('youtube.com/watch') != -1) {\n\t\t\treturn this.parseYoutubeLink(item);\n\t\t}\n\t\treturn (<ResolvingLink url={item} onClick={e => this.openLink(e, item)}/>);\n\t}\n\n\tparseYoutubeLink(item) {\n\t\tlet id = item.split('v=')[1];\n\t\tconst andPosition = id.indexOf('&');\n\t\tif (andPosition != -1) {\n\t\t  id = id.substring(0, andPosition);\n\t\t}\n\t\treturn <YouTube videoId={id} />;\n\t}\n\n\trender() {\n\t\treturn <div>{this.itemize(this.props.text)}</div>;\n\t}\n}\n\nmodule.exports = OutputItem;\n","const React = require('react');\nconst Settings = require('../settings.json');\nconst OutputItem = require('./outputitem');\n\nclass MudOutput extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tlines: []\n\t\t};\n\t\tthis.addLine = this.addLine.bind(this);\n\t\tthis.props.instance.output.on('MudOutput', data => this.addLine(data));\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"output\">\n\n\t\t\t\t{this.state.lines.map((line, index) => {\n\t\t\t\t\treturn <OutputItem text={line} />;\n\t\t\t\t})}\n\n\t\t\t</div>\n\t\t);\n\t}\n\n\taddLine(line) {\n\t\tconsole.log('Adding line: ' + line);\n\t\tif (line) {\n\t\t\tconst lines = this.state.lines;\n\t\t\tlines.push(line);\n\t\t\tthis.setState({\n\t\t\t\tlines\n\t\t\t});\n\t\t}\n\t}\n}\n\nmodule.exports = MudOutput;\n","import {\n\tAccordion,\n\tAccordionItem,\n\tAccordionItemTitle,\n\tAccordionItemBody\n} from 'react-accessible-accordion';\n\nconst {Howler} = require('howler');\nconst React = require('react');\n\nclass SettingsPanel extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tvolume: Howler.volume() * 100,\n\t\t\tspeech: this.props.instance.tts.enabled,\n\t\t\tresolveLinks: true,\n\t\t\tembedYoutube: true,\n\t\t\tsounds: true\n\t\t};\n\n\t\tthis.handleVolumeChange = this.handleVolumeChange.bind(this);\n\t\tthis.handleSpeechStateChange = this.handleSpeechStateChange.bind(this);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Accordion>\n\t\t\t\t<AccordionItem>\n\t\t\t\t\t<AccordionItemTitle><h2>Audio</h2></AccordionItemTitle>\n\t\t\t\t\t<AccordionItemBody>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label htmlFor=\"volume-slider\">Sound volume</label>\n\t\t\t\t\t\t\t<input type=\"range\" id=\"volume-slider\" value={this.state.volume} onChange={this.handleVolumeChange} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</AccordionItemBody>\n\t\t\t\t</AccordionItem>\n\n\t\t\t\t<AccordionItem>\n\t\t\t\t\t<AccordionItemTitle><h2>Speech</h2></AccordionItemTitle>\n\t\t\t\t\t<AccordionItemBody>\n\n\t\t\t\t\t\t<label htmlFor=\"speech-checkbox\">Speech enabled</label>\n\t\t\t\t\t\t<input type=\"checkbox\" id=\"speech-checkbox\" onChange={this.handleSpeechStateChange} checked={Boolean(this.state.speech)} />\n\n\t\t\t\t\t</AccordionItemBody>\n\t\t\t\t</AccordionItem>\n\t\t\t</Accordion>\n\t\t);\n\t}\n\n\thandleVolumeChange(event) {\n\t\tconst targetVolume = event.target.value;\n\t\tconsole.log('Target volume at ' + targetVolume / 100);\n\t\tHowler.volume(targetVolume / 100);\n\t\tthis.setState({\n\t\t\tvolume: targetVolume\n\t\t});\n\t}\n\n\thandleSpeechStateChange(event) {\n\t\tconsole.log('Target value is at ' + event.target.checked);\n\t\tthis.props.instance.interface.setSpeechEnabled(event.target.checked);\n\n\t\tthis.setState({\n\t\t\tspeech: event.target.checked\n\t\t});\n\t}\n}\n\nmodule.exports = SettingsPanel;\n","'use strict';\nimport './ui.css';\n\nimport {\n\tAccordion,\n\tAccordionItem,\n\tAccordionItemTitle,\n\tAccordionItemBody\n} from 'react-accessible-accordion';\n\nconst React = require('react');\n\nclass OnlineList extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tpeople: {\n\t\t\t\tactive: [],\n\t\t\t\tidlers: [],\n\t\t\t\tbots: []\n\t\t\t}\n\n\t\t};\n\t\tthis.people = {\n\t\t\tactive: [],\n\t\t\tbots: [],\n\t\t\tidlers: []\n\t\t};\n\n\t\tthis.createGroup = this.createGroup.bind(this);\n\n\t\tthis.response = null;\n\t}\n\n\tcomponentWillMount() {\n\t\tthis.getOnlineList();\n\t}\n\n\tgetOnlineList() {\n\t\tfetch('http://chatmud.com/api/who')\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => this.parseData(data));\n\t}\n\n\tparseData(data) {\n\t\tfor (const item in data.list) {\n\t\t\tconsole.log('Parsing item: ' + JSON.stringify(data.list[item]));\n\n\t\t\tif (data.list[item].flags && data.list[item].flags.includes('bot')) {\n\t\t\t\tconst person = {\n\t\t\t\t\tname: item,\n\t\t\t\t\ttitle: data.list[item].title\n\t\t\t\t};\n\t\t\t\tthis.people.bots.push(person);\n\t\t\t} else if (data.list[item].flags.includes('idle')) {\n\t\t\t\tconst person = {\n\t\t\t\t\tname: item,\n\t\t\t\t\ttitle: data.list[item].title\n\t\t\t\t};\n\t\t\t\tthis.people.idlers.push(person);\n\t\t\t} else {\n\t\t\t\tconst person = {\n\t\t\t\t\tname: item,\n\t\t\t\t\ttitle: data.list[item].title\n\t\t\t\t};\n\t\t\t\tthis.people.active.push(person);\n\t\t\t}\n\t\t}\n\t\tthis.setState({\n\t\t\tpeople: this.people\n\t\t});\n\t}\n\n\tcreateGroup(title, people) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<AccordionItem>\n\n\t\t\t\t\t<AccordionItemTitle>{title}</AccordionItemTitle>\n\t\t\t\t\t<AccordionItemBody>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t{people.map((item, index) => {\n\t\t\t\t\t\t\t\tconsole.log('Mapping ' + item.name);\n\t\t\t\t\t\t\t\treturn <li>{item.name} - {item.title}</li>;\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</AccordionItemBody>\n\t\t\t\t</AccordionItem>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div class=\"settings-panel\">\n\t\t\t\t<h1>Who's online</h1>\n\t\t\t\t<Accordion>\n\t\t\t\t\t{this.createGroup('Active', this.state.people.active)}\n\t\t\t\t\t{this.createGroup('Bots', this.state.people.bots)}\n\t\t\t\t\t{this.createGroup('Idlers', this.state.people.idlers)}\n\t\t\t\t</Accordion>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nmodule.exports = OnlineList;\n","import './ui.css';\n\nconst React = require('react');\nconst SettingsPanel = require('./settingspanel');\nconst OnlineList = require('./onlinelist');\n\nclass ToolBar extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisSettingsOpened: false,\n\t\t\tisOnlineListOpened: false\n\t\t};\n\t\tthis.showSettings = this.showSettings.bind(this);\n\t\tthis.hideSettings = this.hideSettings.bind(this);\n\t\tthis.showOnlineList = this.showOnlineList.bind(this);\n\t\tthis.hideOnlineList = this.hideOnlineList.bind(this);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{this.renderButtons()}\n\t\t\t\t{this.renderSettings()}\n\t\t\t\t{this.renderOnlineList()}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tshowSettings() {\n\t\tthis.setState({\n\t\t\tisSettingsOpened: true,\n\t\t\tisOnlineListOpened: false\n\t\t});\n\t}\n\n\thideSettings() {\n\t\tthis.setState({\n\t\t\tisSettingsOpened: false,\n\t\t\tisOnlineListOpened: false\n\t\t});\n\t}\n\n\trenderButtons() {\n\t\tconst buttons = [];\n\n\t\tif (this.state.isSettingsOpened == true) {\n\t\t\tbuttons.push(<button key=\"1\" onClick={this.hideSettings} aria-expanded=\"true\">Settings</button>);\n\t\t} else {\n\t\t\tbuttons.push(<button key=\"2\" onClick={this.showSettings} aria-expanded=\"false\">Settings</button>);\n\t\t}\n\n\t\tif (this.state.isOnlineListOpened) {\n\t\t\tbuttons.push(<button key=\"3\" onClick={this.hideOnlineList} aria-expanded=\"true\">Online List</button>);\n\t\t} else {\n\t\t\tbuttons.push(<button key=\"5\" onClick={this.showOnlineList} aria-expanded=\"false\">Online List</button>);\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"toolbar\">\n\t\t\t\t{buttons}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tshowOnlineList() {\n\t\tthis.setState({\n\t\t\tisOnlineListOpened: true,\n\t\t\tisSettingsOpened: false\n\t\t});\n\t}\n\n\thideOnlineList() {\n\t\tthis.setState({\n\t\t\tisOnlineListOpened: false,\n\t\t\tisSettingsOpened: false\n\t\t});\n\t}\n\n\trenderSettings() {\n\t\tif (this.state.isSettingsOpened) {\n\t\t\treturn (\n\t\t\t\t<div>\n\n\t\t\t\t\t<div className=\"settings-panel\">\n\t\t\t\t\t\t<SettingsPanel instance={this.props.instance}/>\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n\n\trenderOnlineList() {\n\t\tif (this.state.isOnlineListOpened) {\n\t\t\treturn (\n\t\t\t\t<div>\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<OnlineList />\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n}\n\nmodule.exports = ToolBar;\n","import './ui.css';\n\nconst React = require('react');\nconst MudInput = require('./mudinput');\nconst MudOutput = require('./mudoutput');\nconst ToolBar = require('./toolbar');\n\nclass MainWindow extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className=\"toolbar\">\n\t\t\t\t\t<ToolBar instance={this.props.instance}/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"output\">\n\t\t\t\t\t<MudOutput instance={this.props.instance}/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"input\">\n\t\t\t\t\t<MudInput\n\n\t\t\t\t\t\tinstance={this.props.instance}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nmodule.exports = MainWindow;\n","'use strict';\nconst Combokeys = require('combokeys');\nconst React = require('react');\nconst reactDom = require('react-dom');\nconst MainUI = require('../ui/main');\n\nclass Interface {\n\tconstructor(instance) {\n\t\tthis.instance = instance;\n\t\tthis.shortcuts = new Combokeys(window);\n\t\trequire('combokeys/plugins/global-bind')(this.shortcuts);\n\t\tthis.setupEvents();\n\t\tthis.setupKeys();\n\t\tthis.setupInterface();\n\t}\n\n\tsetupInterface() {\n\t\treactDom.render(<MainUI instance={this.instance}/>, document.getElementById('app'));\n\t}\n\n\tsetupKeys() {\n\t\tif (process.platform === 'win32') {\n\t\t\tthis.shortcuts.bindGlobal('alt+left', () => this.instance.historyInterface.previousChannel());\n\t\t\tthis.shortcuts.bindGlobal('alt+right', () => this.instance.historyInterface.nextChannel());\n\t\t\tthis.shortcuts.bindGlobal('alt+up', () => this.instance.historyInterface.previousMessage());\n\t\t\tthis.shortcuts.bindGlobal('alt+down', () => this.instance.historyInterface.nextMessage());\n\t\t} else {\n\t\t\tthis.shortcuts.bindGlobal('alt+meta+left', () => this.instance.historyInterface.previousChannel());\n\t\t\tthis.shortcuts.bindGlobal('alt+meta+right', () => this.instance.historyInterface.nextChannel());\n\t\t\tthis.shortcuts.bindGlobal('alt+meta+up', () => this.instance.historyInterface.previousMessage());\n\t\t\tthis.shortcuts.bindGlobal('alt+meta+down', () => this.instance.historyInterface.nextMessage());\n\t\t}\n\t\tthis.shortcuts.bindGlobal('ctrl', () => this.instance.tts.stopSpeech());\n\t\tthis.shortcuts.bindGlobal('f12', () => this.setSpeechEnabled(!this.instance.tts.enabled));\n\t}\n\n\tsetupEvents() {\n\n\t}\n\n\tsetSpeechEnabled(state) {\n\t\tthis.instance.tts.enabled = state;\n\t\tthis.instance.output.add('Speech ' + (state ? 'enabled' : 'disabled'));\n\t}\n}\n\nmodule.exports = Interface;\n","'use strict';\n\nclass InputHistory {\n\tconstructor() {\n\t\tthis.strings = [];\n\t\tthis.iterator = 0;\n\t}\n\n\tadd(string) {\n\t\tthis.strings.unshift(string);\n\t}\n\n\tgetLastEntered() {\n\t\treturn this.strings[0];\n\t}\n\n\tgetAtIndex(index) {\n\t\treturn this.strings[index];\n\t}\n\n\tgetAtIterator() {\n\t\treturn this.strings[iterator];\n\t}\n\n\tincreaseIterator() {\n\t\tthis.iterator++;\n\t\tif (this.iterator > this.strings.length) {\n\t\t\tthis.iterator = this.strings.length;\n\t\t}\n\t\treturn this.iterator;\n\t}\n\n\tdecreaseIterator() {\n\t\tthis.iterator--;\n\t\tif (this.iterator < 0) {\n\t\t\tthis.iterator = 0;\n\t\t}\n\t\treturn this.iterator;\n\t}\n}\n\nmodule.exports = InputHistory;\n","'use strict';\nconst CMOutput = require('./interface/cmoutput');\nconst Inserts = require('./inserts/inserts.json');\nconst InsertFactory = require('./factories/insertfactory');\nconst Appends = require('./appends/appends.json');\nconst AppendFactory = require('./factories/appendfactory');\nconst ChannelHistory = require('./history/channelhistory');\nconst ChannelInterface = require('./interface/channelinterface');\nconst SoundPlayer = require('./sounds/soundplayer');\nconst Programmer = require('./interface/programmer');\nconst TTSFactory = require('./factories/ttsfactory');\nconst Interface = require('./interface/interface');\nconst InputHistory = require('./history/inputhistory');\n\nclass ChatMud {\n\tconstructor(connection) {\n\t\tconsole.log('Constructing handler');\n\t\tthis.output = new CMOutput(this);\n\t\tthis.connection = connection;\n\t\tthis.inserts = new Array();\n\t\tthis.appends = new Array();\n\t\tthis.history = new ChannelHistory();\n\t\tthis.historyInterface = new ChannelInterface(this.history, this);\n\t\tthis.inputHistory = new InputHistory();\n\t\tthis.soundPlayer = new SoundPlayer();\n\t\tthis.tts = TTSFactory.getInstance();\n\n\t\t\n\t\tthis.interface = new Interface(this);\n\t\tthis.programmer = new Programmer(this);\n\t\tthis.info = {\n\t\t\tname: '',\n\t\t\tkey: ''\n\t\t};\n\n\t\tthis.setupEvents();\n\t\tthis.setupInserts();\n\t\tthis.setupAppends();\n\t}\n\n\tsetupEvents() {\n\t\tconsole.log('Setting events');\n\t\tthis.connection.on('data', data => this.handleData(data));\n\t}\n\n\tsetupInserts() {\n\t\tfor (const insertDef of Inserts) {\n\t\t\tconst insert = InsertFactory.getInsert(insertDef);\n\t\t\tconst instance = new insert();\n\t\t\tthis.inserts.push(instance);\n\t\t}\n\t}\n\n\tsetupAppends() {\n\t\tfor (const appendDef of Appends) {\n\t\t\tconst append = AppendFactory.getInstance(appendDef);\n\t\t\tconst instance = new append();\n\t\t\tthis.appends.push(instance);\n\t\t}\n\t}\n\n\thandleData(data) {\n\t\tconsole.log('Received data: ' + data);\n\t\tfor (const insert of this.inserts) {\n\t\t\tdata = insert.act(data, this);\n\t\t}\n\n\t\tthis.output.add(data);\n\n\t\tfor (const append of this.appends) {\n\t\t\tconsole.log('Appending');\n\t\t\tappend.act(data, this);\n\t\t}\n\t}\n\n\tsendInput() {\n\t\tconsole.log('Handle enter key');\n\n\t\tlet string = this.input.value;\n\t\tif (string == 'my_name') {\n\t\t\tthis.output.add('Your name is set to ' + this.info.name);\n\t\t}\n\t\tthis.output.add('Input history: ' + JSON.stringify(this.inputHistory.strings));\n\t\tif (string == '') {\n\t\t\tstring = this.inputHistory.getLastEntered();\n\t\t} else if (string != this.inputHistory.getLastEntered()) {\n\t\t\tthis.inputHistory.add(string);\n\t\t}\n\n\t\tthis.connection.send(string);\n\n\t\tthis.input.value = '';\n\t}\n}\n\nmodule.exports = ChatMud;\n","'use strict';\nconst IO = require(\"socket.io-client\");\nconst EventEmitter = require(\"eventemitter3\");\n\nclass Websockets extends EventEmitter {\n\tconstructor() {\n\t\tsuper();\n\t\tconsole.log('constructing websockets');\n\t\tthis.io = new IO();\n\t\tthis.setupEvents();\n\t}\n\t\n\tsetupEvents() {\n\t\tthis.io.on(\"data\", data => this.handleData(data));\n\t}\n\t\n\thandleData(data) {\n\t\tthis.emit(\"data\", data);\n\t}\n\t\n\tsend(string) {\n\t\tthis.io.emit(\"data\", string + \"\\n\");\n\t}\n\t\n}\n\nmodule.exports = Websockets;","'use strict';\nconst net = require('net');\nconst EventEmitter = require('eventemitter3');\nconst TLS = require(\"tls\");\n\nclass TCPConnection extends EventEmitter {\n\tconstructor(address = 'chatmud.com', port = 7443) {\n\t\tconsole.log('Connecting to ' + address + ' on port ' + port);\n\t\tsuper();\n\t\tthis.address = address;\n\t\tthis.port = port;\n\t\tthis.client = new net.Socket();\n\t\tthis.tcp = this.client.connect(this.port, this.address);\n\t\tthis.options ={\n\t\tsocket: this.tcp,\n\t\t\n\t\t};\n\n\t\tthis.connection = TLS.connect(this.options, () => this.setupEvents());\n\t\tthis.data = null;\n\t}\n\n\tsetupEvents() {\n\t\tconsole.log('Setting up tcp events');\n\t\tthis.connection.on('data', data => this.handleData(data));\n\t}\n\n\thandleData(data) {\n\t\tconsole.log('TCP stream: ' + data);\n\n\t\tconst string = data.toString();\n\t\tthis.data += string;\n\t\tif (this.data.endsWith('\\n')) {\n\t\t\tthis.emitData(this.data);\n\t\t\tthis.data = '';\n\t\t}\n\t}\n\n\temitData(data) {\n\t\tconst arr = data.split('\\r\\n');\n\t\tfor (const i of arr) {\n\t\t\tthis.emit('data', i);\n\t\t}\n\t}\n\n\tsend(string) {\n\t\tconsole.log('Sending ' + string);\n\t\tthis.connection.write(string + '\\n');\n\t}\n}\n\nmodule.exports = TCPConnection;\n","'use strict';\n\nconst Websockets = require('../connection/websockets');\nconst TLS = require('../connection/tls');\n\nclass NetworkFactory {\n    static getInstance() {\n        if (typeof process !== 'undefined') {\nreturn TLS;    \n        } else {\n                        return Websockets;\n        }\n    }\n\n}\n\nmodule.exports = NetworkFactory;","'use strict';\nconst ChatMud = require('./chatmud');\nconst NetworkFactory = require('./factories/networkfactory');\nconst SoundPlayer = require('./sounds/soundplayer');\n\nconsole.log('Starting connection...');\n\nconst connection = NetworkFactory.getInstance();\n\nconsole.log('Creating handler...');\nconst game = new ChatMud(new connection());"]}
{"dependencies":[{"name":"/Users/ghorthalon/code/chatmud-client/package.json","includedInParent":true,"mtime":1523198551366},{"name":"./soundops","loc":{"line":2,"column":25}},{"name":"./sounds","loc":{"line":4,"column":23}}],"generated":{"js":"const{Howl:e,Howler:s}=require(\"howler\"),n=require(\"./soundops\"),t=require(\"random-int\"),o=require(\"./sounds\");class l{constructor(){this.sounds=new Array,this.extension=\".ogg\",document.getElementById(\"soundVolume\").onchange=function(e){console.log(\"Set volume to \"+e.target.value+\" percent\"),s.volume(Number(e.target.value)/100)}}play(e,s=\"\"){let n=this.searchSounds(e,s);-1==n&&(n=this.loadSound(e,s)),n.sound.play()}playChannel(e){let s=n.findSoundsInFolder(\"channels\");e=0==n.findFilenames(e,s).length?\"global\":e,this.play(e,\"channels\")}playSocial(e,s){let o=n.findSoundsInFolder(\"socials\"),l=n.findFilenames(e+\" \"+s,o);0==l.length&&(l=n.findFilenames(e,o));let i=l[t(0,l.length-1)].toString();i=i.slice(0,i.length-4),this.play(i,\"socials\")}searchSounds(e,s){for(let n of this.sounds)if(n.file==e&&n.folder==s)return n;return-1}loadSound(e,s){let n=new i(s,e);return this.sounds.push(n),n}}class i{constructor(s,n){this.basePath=\"./sounds/\",this.file=n,this.folder=s,this.extension=\".ogg\",this.path=this.basePath+this.folder+\"/\"+this.file+this.extension,console.log(\"Loading \"+this.path),this.sound=new e({src:this.path})}}module.exports=l;","map":{"mappings":[{"source":"soundplayer.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"soundplayer.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"soundplayer.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"soundplayer.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"soundplayer.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"soundplayer.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"soundplayer.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"soundplayer.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"soundplayer.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"soundplayer.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"soundplayer.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"soundplayer.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"soundplayer.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"soundplayer.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"soundplayer.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"soundplayer.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"soundplayer.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"soundplayer.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"soundplayer.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"soundplayer.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"soundplayer.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"soundplayer.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"soundplayer.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"soundplayer.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"soundplayer.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"soundplayer.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"soundplayer.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"soundplayer.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"soundplayer.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"soundplayer.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"soundplayer.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"soundplayer.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"soundplayer.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"soundplayer.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"soundplayer.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"soundplayer.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"soundplayer.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"soundplayer.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"soundplayer.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"soundplayer.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"soundplayer.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"soundplayer.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"soundplayer.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"soundplayer.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"soundplayer.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"soundplayer.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"soundplayer.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"soundplayer.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}},{"source":"soundplayer.js","original":{"line":49,"column":0},"generated":{"line":49,"column":0}},{"source":"soundplayer.js","original":{"line":50,"column":0},"generated":{"line":50,"column":0}},{"source":"soundplayer.js","original":{"line":51,"column":0},"generated":{"line":51,"column":0}},{"source":"soundplayer.js","original":{"line":52,"column":0},"generated":{"line":52,"column":0}},{"source":"soundplayer.js","original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"soundplayer.js","original":{"line":54,"column":0},"generated":{"line":54,"column":0}},{"source":"soundplayer.js","original":{"line":55,"column":0},"generated":{"line":55,"column":0}},{"source":"soundplayer.js","original":{"line":56,"column":0},"generated":{"line":56,"column":0}},{"source":"soundplayer.js","original":{"line":57,"column":0},"generated":{"line":57,"column":0}},{"source":"soundplayer.js","original":{"line":58,"column":0},"generated":{"line":58,"column":0}},{"source":"soundplayer.js","original":{"line":59,"column":0},"generated":{"line":59,"column":0}},{"source":"soundplayer.js","original":{"line":60,"column":0},"generated":{"line":60,"column":0}},{"source":"soundplayer.js","original":{"line":61,"column":0},"generated":{"line":61,"column":0}},{"source":"soundplayer.js","original":{"line":62,"column":0},"generated":{"line":62,"column":0}},{"source":"soundplayer.js","original":{"line":63,"column":0},"generated":{"line":63,"column":0}},{"source":"soundplayer.js","original":{"line":64,"column":0},"generated":{"line":64,"column":0}},{"source":"soundplayer.js","original":{"line":65,"column":0},"generated":{"line":65,"column":0}},{"source":"soundplayer.js","original":{"line":66,"column":0},"generated":{"line":66,"column":0}},{"source":"soundplayer.js","original":{"line":67,"column":0},"generated":{"line":67,"column":0}},{"source":"soundplayer.js","original":{"line":68,"column":0},"generated":{"line":68,"column":0}},{"source":"soundplayer.js","original":{"line":69,"column":0},"generated":{"line":69,"column":0}},{"source":"soundplayer.js","original":{"line":70,"column":0},"generated":{"line":70,"column":0}},{"source":"soundplayer.js","original":{"line":71,"column":0},"generated":{"line":71,"column":0}},{"source":"soundplayer.js","original":{"line":72,"column":0},"generated":{"line":72,"column":0}},{"source":"soundplayer.js","original":{"line":73,"column":0},"generated":{"line":73,"column":0}},{"source":"soundplayer.js","original":{"line":74,"column":0},"generated":{"line":74,"column":0}}],"sources":{"soundplayer.js":"const {Howl, Howler} = require(\"howler\");\nconst soundops = require(\"./soundops\");\nconst rng = require(\"random-int\");\nconst Sounds = require(\"./sounds\");\n\nclass SoundPlayer {\n\tconstructor() {\n\t\tthis.sounds = new Array();\n\t\tthis.extension = \".ogg\";\n\t\tdocument.getElementById('soundVolume').onchange = function(event) {\n\t\t\tconsole.log(\"Set volume to \"+event.target.value+\" percent\");\n\t\t\tHowler.volume(Number(event.target.value)/100);\n\t\t\t}\n\t}\n\t\n\t\tplay(file, folder = \"\") {\n\t\tlet mFile = this.searchSounds(file, folder);\n\t\tif (mFile == -1) {\n\t\t\tmFile = this.loadSound(file, folder);\n\t\t}\n\t\tmFile.sound.play();\n\t}\n\t\n\tplayChannel(name) {\n\t\tlet channels = soundops.findSoundsInFolder(\"channels\");\n\t\tlet foundChannels = soundops.findFilenames(name, channels);\n\t\tname = (foundChannels.length==0 ? 'global' : name);\n\t\tthis.play(name, \"channels\");\n\t}\n\t\n\tplaySocial(name, gender) {\n\t\tlet socials = soundops.findSoundsInFolder(\"socials\");\n\t\tlet foundSocials = soundops.findFilenames(name + \" \" + gender, socials);\n\t\tif (foundSocials.length == 0) {\n\t\t\tfoundSocials = soundops.findFilenames(name, socials);\n\t\t}\n\t\tlet filename = foundSocials[rng(0, foundSocials.length-1)].toString();\n\t\tfilename = filename.slice(0, filename.length-4);\n\t\tthis.play(filename, \"socials\");\n\t\t\n\t\t\n\t}\n\t\n\tsearchSounds(file, folder) {\n\t\tfor (let sound of this.sounds) {\n\t\t\tif (sound.file == file && sound.folder == folder) return sound;\n\t\t}\n\t\treturn -1;\n\t}\n\t\n\tloadSound(file, folder) {\n\t\tlet sound = new Sound(folder, file);\n\t\tthis.sounds.push(sound);\n\t\treturn sound;\n\t}\n\t\n\t\n}\n\nclass Sound {\n\tconstructor(folder, file) {\n\t\tthis.basePath = \"./sounds/\";\n\t\tthis.file = file;\n\t\tthis.folder = folder;\n\t\tthis.extension = \".ogg\";\n\t\tthis.path = this.basePath + this.folder + \"/\" + this.file + this.extension;\n\t\t\n\t\tconsole.log(\"Loading \" + this.path);\n\t\tthis.sound = new Howl({src:this.path});\n\t}\n\t\n}\n\nmodule.exports = SoundPlayer;"},"lineCount":74}},"hash":"096c1a402ad5efd25117e3bc03486237","cacheData":{"env":{}}}
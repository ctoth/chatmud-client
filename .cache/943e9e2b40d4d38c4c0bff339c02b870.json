{"dependencies":[{"name":"/Users/ghorthalon/code/chatmud-client/package.json","includedInParent":true,"mtime":1523198551366},{"name":"./cmoutput","loc":{"line":2,"column":25}},{"name":"./inserts.json","loc":{"line":3,"column":24}},{"name":"./insertfactory","loc":{"line":4,"column":30}},{"name":"./channelhistory","loc":{"line":5,"column":31}},{"name":"./channelinterface","loc":{"line":6,"column":33}},{"name":"./soundplayer","loc":{"line":7,"column":28}},{"name":"./programmer","loc":{"line":8,"column":27}},{"name":"./tts","loc":{"line":9,"column":20}}],"generated":{"js":"\"use strict\";const t=require(\"./cmoutput\"),e=require(\"./inserts.json\"),s=require(\"./insertfactory\"),n=require(\"./channelhistory\"),i=require(\"./channelinterface\"),r=require(\"./soundplayer\"),o=require(\"./programmer\"),u=require(\"./tts\");class h{constructor(e){console.log(\"Constructing handler\"),this.input=document.getElementById(\"cm-input\"),this.output=new t(document.getElementById(\"cm-output\"),this),this.connection=e,this.inserts=new Array,this.history=new n,this.historyInterface=new i(this.history,this),this.soundPlayer=new r,this.tts=new u,this.programmer=new o(this),this.setupEvents(),this.setupInserts()}setupEvents(){console.log(\"Setting events\"),this.connection.on(\"data\",t=>this.handleData(t)),this.input.addEventListener(\"keyup\",t=>{13==t.keyCode&&(this.tts.stopSpeech(),this.sendInput())})}setupInserts(){for(let t of e){let e=new(s.getInsert(t));this.inserts.push(e)}}handleData(t){console.log(\"Received data: \"+t);for(let e of this.inserts)t=e.act(t,this);this.output.add(t)}sendInput(){console.log(\"Handle enter key\");let t=this.input.value;this.connection.send(t),this.input.value=\"\"}}module.exports=h;","map":{"mappings":[{"source":"chatmud.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"chatmud.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"chatmud.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"chatmud.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"chatmud.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"chatmud.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"chatmud.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"chatmud.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"chatmud.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"chatmud.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"chatmud.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"chatmud.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"chatmud.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"chatmud.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"chatmud.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"chatmud.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"chatmud.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"chatmud.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"chatmud.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"chatmud.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"chatmud.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"chatmud.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"chatmud.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"chatmud.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"chatmud.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"chatmud.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"chatmud.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"chatmud.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"chatmud.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"chatmud.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"chatmud.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"chatmud.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"chatmud.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"chatmud.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"chatmud.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"chatmud.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"chatmud.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"chatmud.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"chatmud.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"chatmud.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"chatmud.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"chatmud.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"chatmud.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"chatmud.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"chatmud.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"chatmud.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"chatmud.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"chatmud.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}},{"source":"chatmud.js","original":{"line":49,"column":0},"generated":{"line":49,"column":0}},{"source":"chatmud.js","original":{"line":50,"column":0},"generated":{"line":50,"column":0}},{"source":"chatmud.js","original":{"line":51,"column":0},"generated":{"line":51,"column":0}},{"source":"chatmud.js","original":{"line":52,"column":0},"generated":{"line":52,"column":0}},{"source":"chatmud.js","original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"chatmud.js","original":{"line":54,"column":0},"generated":{"line":54,"column":0}},{"source":"chatmud.js","original":{"line":55,"column":0},"generated":{"line":55,"column":0}},{"source":"chatmud.js","original":{"line":56,"column":0},"generated":{"line":56,"column":0}},{"source":"chatmud.js","original":{"line":57,"column":0},"generated":{"line":57,"column":0}},{"source":"chatmud.js","original":{"line":58,"column":0},"generated":{"line":58,"column":0}},{"source":"chatmud.js","original":{"line":59,"column":0},"generated":{"line":59,"column":0}},{"source":"chatmud.js","original":{"line":60,"column":0},"generated":{"line":60,"column":0}},{"source":"chatmud.js","original":{"line":61,"column":0},"generated":{"line":61,"column":0}},{"source":"chatmud.js","original":{"line":62,"column":0},"generated":{"line":62,"column":0}},{"source":"chatmud.js","original":{"line":63,"column":0},"generated":{"line":63,"column":0}},{"source":"chatmud.js","original":{"line":64,"column":0},"generated":{"line":64,"column":0}},{"source":"chatmud.js","original":{"line":65,"column":0},"generated":{"line":65,"column":0}},{"source":"chatmud.js","original":{"line":66,"column":0},"generated":{"line":66,"column":0}},{"source":"chatmud.js","original":{"line":67,"column":0},"generated":{"line":67,"column":0}},{"source":"chatmud.js","original":{"line":68,"column":0},"generated":{"line":68,"column":0}},{"source":"chatmud.js","original":{"line":69,"column":0},"generated":{"line":69,"column":0}},{"source":"chatmud.js","original":{"line":70,"column":0},"generated":{"line":70,"column":0}},{"source":"chatmud.js","original":{"line":71,"column":0},"generated":{"line":71,"column":0}}],"sources":{"chatmud.js":"'use strict';\nconst CMOutput = require(\"./cmoutput\");\nconst Inserts = require(\"./inserts.json\");\nconst InsertFactory = require(\"./insertfactory\");\nconst ChannelHistory = require(\"./channelhistory\");\nconst ChannelInterface = require(\"./channelinterface\");\nconst SoundPlayer = require(\"./soundplayer\");\nconst Programmer = require(\"./programmer\");\nconst TTS = require(\"./tts\");\n\nclass ChatMud {\n\tconstructor(connection) {\n\t\tconsole.log(\"Constructing handler\");\n\t\tthis.input = document.getElementById(\"cm-input\");\n\t\tthis.output = new CMOutput(document.getElementById(\"cm-output\"), this);\n\t\tthis.connection = connection;\n\t\tthis.inserts = new Array();\n\t\tthis.history = new ChannelHistory();\n\t\tthis.historyInterface = new ChannelInterface(this.history, this);\n\t\tthis.soundPlayer = new SoundPlayer();\n\t\tthis.tts = new TTS();\n\t\tthis.programmer = new Programmer(this);\n\t\tthis.setupEvents();\n\t\tthis.setupInserts();\n\t}\n\t\n\tsetupEvents() {\n\t\tconsole.log(\"Setting events\");\n\t\tthis.connection.on(\"data\", data => this.handleData(data));\n\t\tthis.input.addEventListener(\"keyup\", event => {\n\t\t\tif (event.keyCode == 13) {\n\t\t\t\tthis.tts.stopSpeech();\n\t\t\t\tthis.sendInput();\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t}\n\t\n\tsetupInserts() {\n\t\tfor (let insertDef of Inserts) {\n\t\t\tlet insert = InsertFactory.getInsert(insertDef);\n\t\t\tlet instance = new insert();\n\t\t\tthis.inserts.push(instance);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t\n\t\thandleData(data) {\n\t\t\tconsole.log(\"Received data: \" + data);\n\t\t\tfor (let insert of this.inserts) {\n\t\t\t\tdata = insert.act(data, this);\n\t\t\t}\n\t\t\t\n\t\t\tthis.output.add(data);\n\t\t}\n\t\t\n\t\t\n\tsendInput() {\n\t\tconsole.log(\"Handle enter key\");\n\n\t\tlet string = this.input.value;\n\t\tthis.connection.send(string);\n\t\t\t\tthis.input.value = \"\";\n\t}\n\t\n}\n\nmodule.exports = ChatMud;"},"lineCount":71}},"hash":"1cb87c10d8932a086e89b11bb975d3ef","cacheData":{"env":{}}}